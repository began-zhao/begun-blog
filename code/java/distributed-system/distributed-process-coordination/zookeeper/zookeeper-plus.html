<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.0" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.5" />
    <style>
      html {
        background: var(--bg-color, #fff);
      }

      html[data-theme="dark"] {
        background: var(--bg-color, #1d1e1f);
      }

      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://began-zhao.github.io/begun-blog/code/java/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html"><meta property="og:site_name" content="å’–é£ž"><meta property="og:title" content="ZooKeeper å®žæˆ˜"><meta property="og:description" content="FrancisQ (https://juejin.im/user/5c33853851882525ea106810) æŠ•ç¨¿ã€‚ 1. å¥½ä¹…ä¸è§ ç¦»ä¸Šä¸€ç¯‡æ–‡ç« çš„å‘å¸ƒä¹Ÿå¿«ä¸€ä¸ªæœˆäº†ï¼Œæƒ³æƒ³å·²ç»å¿«ä¸€ä¸ªæœˆæ²¡å†™ä¸œè¥¿äº†ï¼Œå…¶ä¸­å¯èƒ½æœ‰æœŸæœ«è€ƒè¯•ã€è¯¾ç¨‹è®¾è®¡å’Œé©¾ç…§è€ƒè¯•ï¼Œä½†è¿™éƒ½ä¸æ˜¯å€Ÿå£ï¼ ä¸€åˆ°å†¬å¤©å°±æ‡’çš„ä¸è¡Œï¼Œæœ›å¹¿å¤§æŽ˜å‹ç£ä¿ƒæˆ‘ðŸ™„ðŸ™„âœï¸âœï¸ã€‚ æ–‡ç« å¾ˆé•¿ï¼Œå…ˆèµžåŽçœ‹ï¼Œå…»æˆä¹ æƒ¯ã€‚â¤ï¸ ï¿½..."><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2023-12-19T03:27:59.000Z"><meta property="article:author" content="å’–é£ž"><meta property="article:published_time" content="2020-11-28T00:00:00.000Z"><meta property="article:modified_time" content="2023-12-19T03:27:59.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"ZooKeeper å®žæˆ˜","image":[""],"datePublished":"2020-11-28T00:00:00.000Z","dateModified":"2023-12-19T03:27:59.000Z","author":[{"@type":"Person","name":"å’–é£ž","url":"https://began-zhao.github.io/"}]}</script><title>ZooKeeper å®žæˆ˜ | å’–é£ž</title><meta name="description" content="FrancisQ (https://juejin.im/user/5c33853851882525ea106810) æŠ•ç¨¿ã€‚ 1. å¥½ä¹…ä¸è§ ç¦»ä¸Šä¸€ç¯‡æ–‡ç« çš„å‘å¸ƒä¹Ÿå¿«ä¸€ä¸ªæœˆäº†ï¼Œæƒ³æƒ³å·²ç»å¿«ä¸€ä¸ªæœˆæ²¡å†™ä¸œè¥¿äº†ï¼Œå…¶ä¸­å¯èƒ½æœ‰æœŸæœ«è€ƒè¯•ã€è¯¾ç¨‹è®¾è®¡å’Œé©¾ç…§è€ƒè¯•ï¼Œä½†è¿™éƒ½ä¸æ˜¯å€Ÿå£ï¼ ä¸€åˆ°å†¬å¤©å°±æ‡’çš„ä¸è¡Œï¼Œæœ›å¹¿å¤§æŽ˜å‹ç£ä¿ƒæˆ‘ðŸ™„ðŸ™„âœï¸âœï¸ã€‚ æ–‡ç« å¾ˆé•¿ï¼Œå…ˆèµžåŽçœ‹ï¼Œå…»æˆä¹ æƒ¯ã€‚â¤ï¸ ï¿½...">
    <link rel="preload" href="/begun-blog/assets/style-O8GaRnPz.css" as="style"><link rel="stylesheet" href="/begun-blog/assets/style-O8GaRnPz.css">
    <link rel="modulepreload" href="/begun-blog/assets/app-4Zcd0y0J.js"><link rel="modulepreload" href="/begun-blog/assets/zookeeper-plus.html-tIy5tDVI.js"><link rel="modulepreload" href="/begun-blog/assets/plugin-vue_export-helper-x3n3nnut.js"><link rel="modulepreload" href="/begun-blog/assets/zookeeper-plus.html-E2JDB0Ss.js">
    <link rel="prefetch" href="/begun-blog/assets/index.html-C7BjcjfR.js" as="script"><link rel="prefetch" href="/begun-blog/assets/APP.html-VBMwq26j.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-Vvno0oqa.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-LGfYU3ZD.js" as="script"><link rel="prefetch" href="/begun-blog/assets/Collections-FAQ.html-ccZSljhQ.js" as="script"><link rel="prefetch" href="/begun-blog/assets/Design-Pattern-FAQ.html-8l5oNqB7.js" as="script"><link rel="prefetch" href="/begun-blog/assets/Elasticsearch-FAQ.html-1JoQJjyo.js" as="script"><link rel="prefetch" href="/begun-blog/assets/GC-FAQ.html-U2KCQV46.js" as="script"><link rel="prefetch" href="/begun-blog/assets/JUC-FAQ.html-xMFr6PPW.js" as="script"><link rel="prefetch" href="/begun-blog/assets/JVM-FAQ.html-VAjdp8uT.js" as="script"><link rel="prefetch" href="/begun-blog/assets/Java-Basics-FAQ.html-jfZixGH1.js" as="script"><link rel="prefetch" href="/begun-blog/assets/Java-Develop-FAQ.html-wa4oEm6W.js" as="script"><link rel="prefetch" href="/begun-blog/assets/Kafka-FAQ.html-m17k-VFv.js" as="script"><link rel="prefetch" href="/begun-blog/assets/MyBatis-FAQ.html-eco-OaPy.js" as="script"><link rel="prefetch" href="/begun-blog/assets/MySQL-FAQ.html-X4vDAkyu.js" as="script"><link rel="prefetch" href="/begun-blog/assets/Network-FAQ.html-WMFjR0bk.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-EjVAAO8n.js" as="script"><link rel="prefetch" href="/begun-blog/assets/RPC-FAQ.html-HbsaTF5A.js" as="script"><link rel="prefetch" href="/begun-blog/assets/Redis-FAQ.html-nIC3N69K.js" as="script"><link rel="prefetch" href="/begun-blog/assets/Spring-FAQ.html-BOXASR89.js" as="script"><link rel="prefetch" href="/begun-blog/assets/SpringBoot-FAQ.html-_i2EoaSr.js" as="script"><link rel="prefetch" href="/begun-blog/assets/Tomcat-FAQ.html-fLbYOig9.js" as="script"><link rel="prefetch" href="/begun-blog/assets/ZooKeeper-FAQ.html-wAQfPmia.js" as="script"><link rel="prefetch" href="/begun-blog/assets/networks-interview.html-AZMyiD5Z.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-wgBudThL.js" as="script"><link rel="prefetch" href="/begun-blog/assets/WSL.html-djn4cddr.js" as="script"><link rel="prefetch" href="/begun-blog/assets/centos.html-z8xB1eYl.js" as="script"><link rel="prefetch" href="/begun-blog/assets/ssh.html-kzvhIfEq.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-FpOroCNN.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-YGZ_TaT-.js" as="script"><link rel="prefetch" href="/begun-blog/assets/big-data.html-LNOGRXZm.js" as="script"><link rel="prefetch" href="/begun-blog/assets/machine-learning.html-5gVhvs8g.js" as="script"><link rel="prefetch" href="/begun-blog/assets/practical-project.html-UVMLXaQk.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-e0a9Sg-w.js" as="script"><link rel="prefetch" href="/begun-blog/assets/system-design.html-cYdvf-Z2.js" as="script"><link rel="prefetch" href="/begun-blog/assets/tool-library.html-EKwj52g7.js" as="script"><link rel="prefetch" href="/begun-blog/assets/tools.html-BRuAbUCi.js" as="script"><link rel="prefetch" href="/begun-blog/assets/tutorial.html-tkAA_yZY.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-NNwGLu5Y.js" as="script"><link rel="prefetch" href="/begun-blog/assets/gestalt-principle.html-dUteiZKb.js" as="script"><link rel="prefetch" href="/begun-blog/assets/infomation-flow.html-qFHJRZMk.js" as="script"><link rel="prefetch" href="/begun-blog/assets/left-or-right.html-GBL5R1fU.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-HKHIy-pC.js" as="script"><link rel="prefetch" href="/begun-blog/assets/apply.html-XQ_QfLHK.js" as="script"><link rel="prefetch" href="/begun-blog/assets/decorative.html-HbPwzZl-.js" as="script"><link rel="prefetch" href="/begun-blog/assets/draw.html-2DPA4XxV.js" as="script"><link rel="prefetch" href="/begun-blog/assets/flour.html-24bfQlb2.js" as="script"><link rel="prefetch" href="/begun-blog/assets/guide.html-_H3Wi4MM.js" as="script"><link rel="prefetch" href="/begun-blog/assets/intro.html-wTnD4Xqe.js" as="script"><link rel="prefetch" href="/begun-blog/assets/line.html-7XkBuftT.js" as="script"><link rel="prefetch" href="/begun-blog/assets/rule.html-kloqV-Kl.js" as="script"><link rel="prefetch" href="/begun-blog/assets/skill.html-IbPSht8G.js" as="script"><link rel="prefetch" href="/begun-blog/assets/software.html-hgWxTDJW.js" as="script"><link rel="prefetch" href="/begun-blog/assets/start.html-suZ9H_az.js" as="script"><link rel="prefetch" href="/begun-blog/assets/type.html-vbvCGgwX.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-1ZMPC0IT.js" as="script"><link rel="prefetch" href="/begun-blog/assets/search.html-DqYkf7Mo.js" as="script"><link rel="prefetch" href="/begun-blog/assets/text-field.html-IzQqa6_f.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-WNyKQ_l-.js" as="script"><link rel="prefetch" href="/begun-blog/assets/intro.html-VaEofrI_.js" as="script"><link rel="prefetch" href="/begun-blog/assets/navbar-design.html-B4mE0oj-.js" as="script"><link rel="prefetch" href="/begun-blog/assets/navbar.html-Ao1J9h4l.js" as="script"><link rel="prefetch" href="/begun-blog/assets/sidebar-navigate.html-U_NBrDyO.js" as="script"><link rel="prefetch" href="/begun-blog/assets/tabbar-design.html-rLOlZegx.js" as="script"><link rel="prefetch" href="/begun-blog/assets/tabbar.html--5wG6qyR.js" as="script"><link rel="prefetch" href="/begun-blog/assets/OS.html-DFWsWWrf.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-sajkHXZu.js" as="script"><link rel="prefetch" href="/begun-blog/assets/ci.html-IKsLbXfD.js" as="script"><link rel="prefetch" href="/begun-blog/assets/computer.html-kq37SRAA.js" as="script"><link rel="prefetch" href="/begun-blog/assets/debug.html-FczrkvN3.js" as="script"><link rel="prefetch" href="/begun-blog/assets/encoding.html-452Us9V3.js" as="script"><link rel="prefetch" href="/begun-blog/assets/file-extension.html-MwDfXyIR.js" as="script"><link rel="prefetch" href="/begun-blog/assets/glob.html-jL1XE9T_.js" as="script"><link rel="prefetch" href="/begun-blog/assets/license.html-p86H1Eva.js" as="script"><link rel="prefetch" href="/begun-blog/assets/open-source-and-free.html-uial1k6T.js" as="script"><link rel="prefetch" href="/begun-blog/assets/path.html-2Ig9ErZc.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-TuE1X1Xd.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-2unkHb-V.js" as="script"><link rel="prefetch" href="/begun-blog/assets/deploy.html-hJmw4VTt.js" as="script"><link rel="prefetch" href="/begun-blog/assets/intro.html-T-AoQspI.js" as="script"><link rel="prefetch" href="/begun-blog/assets/pages.html-XvoqGvl2.js" as="script"><link rel="prefetch" href="/begun-blog/assets/pr.html-_T4qbZou.js" as="script"><link rel="prefetch" href="/begun-blog/assets/semantic.html-_CMUWMTj.js" as="script"><link rel="prefetch" href="/begun-blog/assets/speedup.html-0e6OwyF_.js" as="script"><link rel="prefetch" href="/begun-blog/assets/token.html-Nl5yBz77.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-qnfMjZn3.js" as="script"><link rel="prefetch" href="/begun-blog/assets/add-path.html-ZWCn8ols.js" as="script"><link rel="prefetch" href="/begun-blog/assets/cmd.html-MTz0qZ6a.js" as="script"><link rel="prefetch" href="/begun-blog/assets/hidden-file.html-tB6hwk_P.js" as="script"><link rel="prefetch" href="/begun-blog/assets/notepad.html-6CjyREnB.js" as="script"><link rel="prefetch" href="/begun-blog/assets/shortcut-key.html-FAtxnceU.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-Hb33Zffw.js" as="script"><link rel="prefetch" href="/begun-blog/assets/arithmetic.html-a39ol7fv.js" as="script"><link rel="prefetch" href="/begun-blog/assets/array.html-kJXLak2Z.js" as="script"><link rel="prefetch" href="/begun-blog/assets/condition.html-1i7TdGYQ.js" as="script"><link rel="prefetch" href="/begun-blog/assets/debug.html-49pH5q4W.js" as="script"><link rel="prefetch" href="/begun-blog/assets/expansion.html-yv9f9eer.js" as="script"><link rel="prefetch" href="/begun-blog/assets/function.html-ASPutzUw.js" as="script"><link rel="prefetch" href="/begun-blog/assets/grammar.html-2A1mBwAE.js" as="script"><link rel="prefetch" href="/begun-blog/assets/intro.html-O0QW09V-.js" as="script"><link rel="prefetch" href="/begun-blog/assets/loop.html-uqY35a0b.js" as="script"><link rel="prefetch" href="/begun-blog/assets/mktemp.html-XMpGd2yi.js" as="script"><link rel="prefetch" href="/begun-blog/assets/prompt.html-YraEAtvZ.js" as="script"><link rel="prefetch" href="/begun-blog/assets/quotation.html-gVujledG.js" as="script"><link rel="prefetch" href="/begun-blog/assets/read.html-8xkKR7CU.js" as="script"><link rel="prefetch" href="/begun-blog/assets/readline.html-ilOgWW7E.js" as="script"><link rel="prefetch" href="/begun-blog/assets/script.html-S45uZLgf.js" as="script"><link rel="prefetch" href="/begun-blog/assets/set.html-Pwfx7xx2.js" as="script"><link rel="prefetch" href="/begun-blog/assets/stack.html-r5P33iSL.js" as="script"><link rel="prefetch" href="/begun-blog/assets/startup.html-zpEUkehW.js" as="script"><link rel="prefetch" href="/begun-blog/assets/string.html-Wo_Pbdff.js" as="script"><link rel="prefetch" href="/begun-blog/assets/variable.html-1EpA1Pkk.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-yY1GpD3y.js" as="script"><link rel="prefetch" href="/begun-blog/assets/add.html-vaZwzb44.js" as="script"><link rel="prefetch" href="/begun-blog/assets/command.html-yYq9x5u5.js" as="script"><link rel="prefetch" href="/begun-blog/assets/dir.html-Kk8yCwE0.js" as="script"><link rel="prefetch" href="/begun-blog/assets/excu.html-DTLWJX0S.js" as="script"><link rel="prefetch" href="/begun-blog/assets/file.html-r1JmFxM_.js" as="script"><link rel="prefetch" href="/begun-blog/assets/ln.html-7Bnwto_4.js" as="script"><link rel="prefetch" href="/begun-blog/assets/other.html-yauneY7y.js" as="script"><link rel="prefetch" href="/begun-blog/assets/path.html-V1bFX2LT.js" as="script"><link rel="prefetch" href="/begun-blog/assets/temp.html-3Ho61zDl.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-InVcZABH.js" as="script"><link rel="prefetch" href="/begun-blog/assets/dir.html-fjOk9t5d.js" as="script"><link rel="prefetch" href="/begun-blog/assets/file.html-SepcYf7M.js" as="script"><link rel="prefetch" href="/begun-blog/assets/mount.html-PLDYpKqb.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-CmC4ZhXV.js" as="script"><link rel="prefetch" href="/begun-blog/assets/advantage.html-K-xIjbcp.js" as="script"><link rel="prefetch" href="/begun-blog/assets/desktop.html-qUR7X4hg.js" as="script"><link rel="prefetch" href="/begun-blog/assets/history.html-k75AvE1L.js" as="script"><link rel="prefetch" href="/begun-blog/assets/intro.html-r-DKBiN-.js" as="script"><link rel="prefetch" href="/begun-blog/assets/language.html-GsJuUvle.js" as="script"><link rel="prefetch" href="/begun-blog/assets/startup.html-IVxHVvjr.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-Lx9_4ctT.js" as="script"><link rel="prefetch" href="/begun-blog/assets/debug.html-2kf2OadP.js" as="script"><link rel="prefetch" href="/begun-blog/assets/lang.html-hzht6Y-h.js" as="script"><link rel="prefetch" href="/begun-blog/assets/manage.html-pYfY3lRs.js" as="script"><link rel="prefetch" href="/begun-blog/assets/webserver.html-EwdtKsbg.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-9qak7GeH.js" as="script"><link rel="prefetch" href="/begun-blog/assets/debug.html-a6j3ibUp.js" as="script"><link rel="prefetch" href="/begun-blog/assets/1.html-5CoSC-47.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-oRMIxigq.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-y2g7H8ST.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-zvlPEVTA.js" as="script"><link rel="prefetch" href="/begun-blog/assets/hadoop-base.html-SWqZbP__.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-xWq6uRQ5.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-VyqzvDCO.js" as="script"><link rel="prefetch" href="/begun-blog/assets/cache.html-RIGSg3WL.js" as="script"><link rel="prefetch" href="/begun-blog/assets/checkout.html-xigKIGsG.js" as="script"><link rel="prefetch" href="/begun-blog/assets/config.html-JIGioKA7.js" as="script"><link rel="prefetch" href="/begun-blog/assets/gh-pages-deploy.html-XlP3Ro59.js" as="script"><link rel="prefetch" href="/begun-blog/assets/intro.html-4Zac3Xp8.js" as="script"><link rel="prefetch" href="/begun-blog/assets/basic.html-Ov71e5et.js" as="script"><link rel="prefetch" href="/begun-blog/assets/character-set.html-ZlGHbqhl.js" as="script"><link rel="prefetch" href="/begun-blog/assets/api-gateway.html-WvJXtqaF.js" as="script"><link rel="prefetch" href="/begun-blog/assets/distributed-id.html-3UaqnhJn.js" as="script"><link rel="prefetch" href="/begun-blog/assets/distributed-transaction.html-caGaS1Ru.js" as="script"><link rel="prefetch" href="/begun-blog/assets/cluster.html-703ZoOBe.js" as="script"><link rel="prefetch" href="/begun-blog/assets/disaster-recovery_remote-live.html-nk3Zqn6u.js" as="script"><link rel="prefetch" href="/begun-blog/assets/fallback_circuit-breaker.html-ZwjvKafX.js" as="script"><link rel="prefetch" href="/begun-blog/assets/high-availability-system-design.html-35Rv1XxV.js" as="script"><link rel="prefetch" href="/begun-blog/assets/limit-request.html-rixw-ZFm.js" as="script"><link rel="prefetch" href="/begun-blog/assets/performance-test.html-U56n0Wt8.js" as="script"><link rel="prefetch" href="/begun-blog/assets/timeout-and-retry.html-J63Q203m.js" as="script"><link rel="prefetch" href="/begun-blog/assets/load-balancing.html-PoBg3Icm.js" as="script"><link rel="prefetch" href="/begun-blog/assets/read-and-write-separation-and-library-subtable.html-Dx0UWJSA.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-AfPrFVtF.js" as="script"><link rel="prefetch" href="/begun-blog/assets/J2EEåŸºç¡€çŸ¥è¯†.html-e2hgjE2Z.js" as="script"><link rel="prefetch" href="/begun-blog/assets/system-design-questions.html-MQSCBC8i.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-IZRRaMdE.js" as="script"><link rel="prefetch" href="/begun-blog/assets/bigdecimal.html-fSf-zGyi.js" as="script"><link rel="prefetch" href="/begun-blog/assets/generics-and-wildcards.html-fGAakvLj.js" as="script"><link rel="prefetch" href="/begun-blog/assets/io.html-W9ybcbHK.js" as="script"><link rel="prefetch" href="/begun-blog/assets/java-basic-questions-01.html-0uhH06m9.js" as="script"><link rel="prefetch" href="/begun-blog/assets/java-basic-questions-02.html-jawk6GyF.js" as="script"><link rel="prefetch" href="/begun-blog/assets/java-basic-questions-03.html-i6SrUSQG.js" as="script"><link rel="prefetch" href="/begun-blog/assets/java-keyword-summary.html-xH5AlUYu.js" as="script"><link rel="prefetch" href="/begun-blog/assets/proxy.html-0dc5G4IR.js" as="script"><link rel="prefetch" href="/begun-blog/assets/reflection.html-WFIJIiwx.js" as="script"><link rel="prefetch" href="/begun-blog/assets/serialization.html-TWH5neSP.js" as="script"><link rel="prefetch" href="/begun-blog/assets/why-there-only-value-passing-in-java.html-du6wFnbg.js" as="script"><link rel="prefetch" href="/begun-blog/assets/arraylist-source-code.html-NjdZ0286.js" as="script"><link rel="prefetch" href="/begun-blog/assets/concurrent-hash-map-source-code.html-bXtJlDNA.js" as="script"><link rel="prefetch" href="/begun-blog/assets/hashmap-source-code.html-Oy60wlVA.js" as="script"><link rel="prefetch" href="/begun-blog/assets/java-collection-precautions-for-use.html-pbfm1ykp.js" as="script"><link rel="prefetch" href="/begun-blog/assets/java-collection-questions-01.html-GpDt4Eep.js" as="script"><link rel="prefetch" href="/begun-blog/assets/java-collection-questions-02.html-4EcgRPaY.js" as="script"><link rel="prefetch" href="/begun-blog/assets/aqs.html-VnC1F0Y6.js" as="script"><link rel="prefetch" href="/begun-blog/assets/atomic-classes.html-J12rzStv.js" as="script"><link rel="prefetch" href="/begun-blog/assets/completablefuture-intro.html-fkpFHJ9P.js" as="script"><link rel="prefetch" href="/begun-blog/assets/java-concurrent-collections.html-4pcGHd9Q.js" as="script"><link rel="prefetch" href="/begun-blog/assets/java-concurrent-questions-01.html-a3reeOft.js" as="script"><link rel="prefetch" href="/begun-blog/assets/java-concurrent-questions-02.html-5t33jv0E.js" as="script"><link rel="prefetch" href="/begun-blog/assets/java-thread-pool-best-practices.html-Iy9MdmGw.js" as="script"><link rel="prefetch" href="/begun-blog/assets/java-thread-pool-summary.html-GJmfFJzA.js" as="script"><link rel="prefetch" href="/begun-blog/assets/reentrantlock.html-ykTDFQnR.js" as="script"><link rel="prefetch" href="/begun-blog/assets/threadlocal.html-0JxxqOQ5.js" as="script"><link rel="prefetch" href="/begun-blog/assets/JVMOptimize.html-gye3dDLd.js" as="script"><link rel="prefetch" href="/begun-blog/assets/class-file-structure.html-dBnDHrfd.js" as="script"><link rel="prefetch" href="/begun-blog/assets/class-loading-process.html-rNUl3ykP.js" as="script"><link rel="prefetch" href="/begun-blog/assets/classloader.html-sMIIZGzZ.js" as="script"><link rel="prefetch" href="/begun-blog/assets/java-jvm-questions-01.html-i79k8Rkc.js" as="script"><link rel="prefetch" href="/begun-blog/assets/jdk-monitoring-and-troubleshooting-tools.html-XlhSudnn.js" as="script"><link rel="prefetch" href="/begun-blog/assets/jvm-garbage-collection.html-bK-0qYjb.js" as="script"><link rel="prefetch" href="/begun-blog/assets/jvm-intro.html-uTOP1vq9.js" as="script"><link rel="prefetch" href="/begun-blog/assets/jvm-parameters-intro.html-HwgZaVDa.js" as="script"><link rel="prefetch" href="/begun-blog/assets/memory-area.html-fPdmDAyC.js" as="script"><link rel="prefetch" href="/begun-blog/assets/java10.html-x60jKZmu.js" as="script"><link rel="prefetch" href="/begun-blog/assets/java11.html-nO2jaJ51.js" as="script"><link rel="prefetch" href="/begun-blog/assets/java12-13.html-lxxd1QBL.js" as="script"><link rel="prefetch" href="/begun-blog/assets/java14-15.html-haC70N5n.js" as="script"><link rel="prefetch" href="/begun-blog/assets/java8-common-new-features.html-QLoKtXcQ.js" as="script"><link rel="prefetch" href="/begun-blog/assets/java8-tutorial-translate.html-QuebbqAI.js" as="script"><link rel="prefetch" href="/begun-blog/assets/java9.html-jB5dU8gM.js" as="script"><link rel="prefetch" href="/begun-blog/assets/10-classical-sorting-algorithms.html-1fWMO1I2.js" as="script"><link rel="prefetch" href="/begun-blog/assets/linkedlist-algorithm-problems.html-EcluCcwj.js" as="script"><link rel="prefetch" href="/begun-blog/assets/string-algorithm-problems.html-2hURMiH4.js" as="script"><link rel="prefetch" href="/begun-blog/assets/the-sword-refers-to-offer.html-HERFwKTS.js" as="script"><link rel="prefetch" href="/begun-blog/assets/bloom-filter.html-24vpfMgL.js" as="script"><link rel="prefetch" href="/begun-blog/assets/graph.html-OMONlG-6.js" as="script"><link rel="prefetch" href="/begun-blog/assets/heap.html-zoOGah3l.js" as="script"><link rel="prefetch" href="/begun-blog/assets/linear-data-structure.html-yVtqq73j.js" as="script"><link rel="prefetch" href="/begun-blog/assets/red-black-tree.html-xFZTt3ZJ.js" as="script"><link rel="prefetch" href="/begun-blog/assets/tree.html-zA-ufpmH.js" as="script"><link rel="prefetch" href="/begun-blog/assets/http_https.html-kiXdIz8J.js" as="script"><link rel="prefetch" href="/begun-blog/assets/http1.0_http1.1.html-lJuNQp5E.js" as="script"><link rel="prefetch" href="/begun-blog/assets/osi_tcp-ip-model.html-Aq3_O61Z.js" as="script"><link rel="prefetch" href="/begun-blog/assets/other-network-questions.html-MoNM7QXO.js" as="script"><link rel="prefetch" href="/begun-blog/assets/è°¢å¸Œä»è€å¸ˆçš„ã€Šè®¡ç®—æœºç½‘ç»œã€‹å†…å®¹æ€»ç»“.html-DY8OixeG.js" as="script"><link rel="prefetch" href="/begun-blog/assets/linux-intro.html-6jEvOGrA.js" as="script"><link rel="prefetch" href="/begun-blog/assets/operating-system-basic-questions-01.html-oItodKYX.js" as="script"><link rel="prefetch" href="/begun-blog/assets/shell-intro.html-6t3twG_j.js" as="script"><link rel="prefetch" href="/begun-blog/assets/a-thousand-lines-of-mysql-study-notes.html-refufI-v.js" as="script"><link rel="prefetch" href="/begun-blog/assets/how-sql-executed-in-mysql.html-z4ZACGnm.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index-invalidation-caused-by-implicit-conversion.html-tjd-WIa9.js" as="script"><link rel="prefetch" href="/begun-blog/assets/innodb-implementation-of-mvcc.html-4dLuIliw.js" as="script"><link rel="prefetch" href="/begun-blog/assets/mysql-basic.html-eBGNWods.js" as="script"><link rel="prefetch" href="/begun-blog/assets/mysql-high-performance-optimization-specification-recommendations.html-_4cEXnbv.js" as="script"><link rel="prefetch" href="/begun-blog/assets/mysql-index.html-WfwzwWfF.js" as="script"><link rel="prefetch" href="/begun-blog/assets/mysql-logs.html-o6XsoCS_.js" as="script"><link rel="prefetch" href="/begun-blog/assets/mysql-questions-01.html-ADHlKlZ9.js" as="script"><link rel="prefetch" href="/begun-blog/assets/some-thoughts-on-database-storage-time.html--AZsXT0s.js" as="script"><link rel="prefetch" href="/begun-blog/assets/transaction-isolation-level.html-Fli1K-Kw.js" as="script"><link rel="prefetch" href="/begun-blog/assets/3-commonly-used-cache-read-and-write-strategies.html-JVSXqc9D.js" as="script"><link rel="prefetch" href="/begun-blog/assets/redis-basic.html-51Th7D3d.js" as="script"><link rel="prefetch" href="/begun-blog/assets/redis-data.html-pnpzA378.js" as="script"><link rel="prefetch" href="/begun-blog/assets/redis-highAvailability-combat.html-Z7pqc5st.js" as="script"><link rel="prefetch" href="/begun-blog/assets/redis-highAvailability.html-2tQq38eA.js" as="script"><link rel="prefetch" href="/begun-blog/assets/redis-memory-fragmentation.html-RPhsGNZb.js" as="script"><link rel="prefetch" href="/begun-blog/assets/redis-questions-01.html-aY3gy_k_.js" as="script"><link rel="prefetch" href="/begun-blog/assets/cache-king-1.html-gpSsOCGY.js" as="script"><link rel="prefetch" href="/begun-blog/assets/cache-king-2.html-QQnpEgMB.js" as="script"><link rel="prefetch" href="/begun-blog/assets/dubbo.html-5xwzjg-1.js" as="script"><link rel="prefetch" href="/begun-blog/assets/why-use-rpc.html-0wlBHPvR.js" as="script"><link rel="prefetch" href="/begun-blog/assets/cap_base-theorem.html-VE-PgEsK.js" as="script"><link rel="prefetch" href="/begun-blog/assets/gossip.html-SkwDzs8q.js" as="script"><link rel="prefetch" href="/begun-blog/assets/paxos-algorithm.html-Uz563qix.js" as="script"><link rel="prefetch" href="/begun-blog/assets/raft-algorithm.html-oYBmbBpH.js" as="script"><link rel="prefetch" href="/begun-blog/assets/kafka-questions-01.html-H6nnSYX7.js" as="script"><link rel="prefetch" href="/begun-blog/assets/message-queue.html-ryCTVPZO.js" as="script"><link rel="prefetch" href="/begun-blog/assets/rabbitmq-intro.html-hXY4fOZo.js" as="script"><link rel="prefetch" href="/begun-blog/assets/rocketmq-intro.html-sLwWXCTx.js" as="script"><link rel="prefetch" href="/begun-blog/assets/rocketmq-questions.html-JQIa9mLz.js" as="script"><link rel="prefetch" href="/begun-blog/assets/seven-tips-for-becoming-an-advanced-programmer.html-WHTmaBAv.js" as="script"><link rel="prefetch" href="/begun-blog/assets/screen-candidates-for-packaging.html-gH0Oa7l1.js" as="script"><link rel="prefetch" href="/begun-blog/assets/technical-preliminary-preparation.html-jrp-d5V7.js" as="script"><link rel="prefetch" href="/begun-blog/assets/the-experience-and-thinking-of-an-interview-experienced-by-an-older-programmer.html-IiO78uI2.js" as="script"><link rel="prefetch" href="/begun-blog/assets/8-years-programmer-work-summary.html-7uR1YTv0.js" as="script"><link rel="prefetch" href="/begun-blog/assets/two-years-of-back-end-develop--experience-in-didi_toutiao.html-54dIPuI7.js" as="script"><link rel="prefetch" href="/begun-blog/assets/efficient-book-publishing-and-practice-guide.html-1moJNcF9.js" as="script"><link rel="prefetch" href="/begun-blog/assets/how-do-programmers-publish-a-technical-book.html-_TJhb-Xr.js" as="script"><link rel="prefetch" href="/begun-blog/assets/employee-performance.html-rEsUwZts.js" as="script"><link rel="prefetch" href="/begun-blog/assets/get-into-work-mode-quickly-when-you-join-a-company.html-RWLIy3Z2.js" as="script"><link rel="prefetch" href="/begun-blog/assets/RESTfulAPI.html-oCNlc2WN.js" as="script"><link rel="prefetch" href="/begun-blog/assets/naming.html-Jch8ok8H.js" as="script"><link rel="prefetch" href="/begun-blog/assets/refactoring.html-pGle1j3O.js" as="script"><link rel="prefetch" href="/begun-blog/assets/netty.html-Z-urf2B7.js" as="script"><link rel="prefetch" href="/begun-blog/assets/big-data-schedule.html-lpxaXAPP.js" as="script"><link rel="prefetch" href="/begun-blog/assets/schedule-change.html-F7eG1piQ.js" as="script"><link rel="prefetch" href="/begun-blog/assets/schedule-task.html-cG2GBAOS.js" as="script"><link rel="prefetch" href="/begun-blog/assets/advantages_disadvantages-of-jwt.html-m-94fKa0.js" as="script"><link rel="prefetch" href="/begun-blog/assets/basis-of-authority-certification.html-MDR_pqgc.js" as="script"><link rel="prefetch" href="/begun-blog/assets/data-desensitization.html-hqGEkScb.js" as="script"><link rel="prefetch" href="/begun-blog/assets/jwt-intro.html-JEkGl5NW.js" as="script"><link rel="prefetch" href="/begun-blog/assets/sentive-words-filter.html-Dyrg1MuX.js" as="script"><link rel="prefetch" href="/begun-blog/assets/sso-intro.html-BO8sB1Hq.js" as="script"><link rel="prefetch" href="/begun-blog/assets/docker-in-action.html-Vo1LiJcy.js" as="script"><link rel="prefetch" href="/begun-blog/assets/docker-intro.html-2NxZC5Sz.js" as="script"><link rel="prefetch" href="/begun-blog/assets/git-intro.html-hmH68v_6.js" as="script"><link rel="prefetch" href="/begun-blog/assets/github-tips.html-zzIVbrIG.js" as="script"><link rel="prefetch" href="/begun-blog/assets/zookeeper-in-action.html-3DWUFk2m.js" as="script"><link rel="prefetch" href="/begun-blog/assets/zookeeper-intro.html-GMN2uVRd.js" as="script"><link rel="prefetch" href="/begun-blog/assets/mybatis-interview.html--oesJHkz.js" as="script"><link rel="prefetch" href="/begun-blog/assets/spring-boot-auto-assembly-principles.html-_kuftJS4.js" as="script"><link rel="prefetch" href="/begun-blog/assets/spring-common-annotations.html-QTYcX8-b.js" as="script"><link rel="prefetch" href="/begun-blog/assets/spring-design-patterns-summary.html-k4DDXtGQ.js" as="script"><link rel="prefetch" href="/begun-blog/assets/spring-knowledge-and-questions-summary.html-bhtNrQXF.js" as="script"><link rel="prefetch" href="/begun-blog/assets/spring-transaction.html-m_5og9pb.js" as="script"><link rel="prefetch" href="/begun-blog/assets/springboot-knowledge-and-questions-summary.html-_hdUtsXy.js" as="script"><link rel="prefetch" href="/begun-blog/assets/springcloud-intro.html-cCP02ygW.js" as="script"><link rel="prefetch" href="/begun-blog/assets/404.html-HOo0lpmJ.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-TABht8ji.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-QFblM5gT.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-qoSpKskQ.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-DK-nV_qG.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-kEtG73Pk.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-mVzCRedH.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-0g3QS9mn.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-omIvOla0.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-Y1XV_VS8.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-SdRy3M5D.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-WTk6_HTc.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-z93NdhXa.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-kY7FBsdn.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-kSNy_xFl.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-YsQMtaV0.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-XvWTsVnJ.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-vVNWwu6U.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-CEE0ZEEf.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-ZtuXu2l9.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-5BnOE0tN.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-ft4KH-qu.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-7NIhNOZ_.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-E35qSQfQ.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-Oa2yGJiW.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-7Rk96fA9.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-D7l6YkeR.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-PPhZuyBi.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-HGlmJvmJ.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-B6CiaSvg.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-HDTC8Vlw.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-52a-vgVR.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html--qHkEf40.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-ljTkWjRF.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-BTeSd7s9.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-nSPLbSyh.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-mrrO22-G.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-H7XniyUc.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-H1mztSZz.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-p0uRKyX0.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-ZBMZGwdG.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-G1y2kaUH.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-Y-SaPGgR.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-NezLobWR.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-BnpkET9k.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-ZMi73pKT.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-Eh_QMg-4.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-19dP7MFA.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-cw__2GSV.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-aXdeNLXn.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-iThdZacc.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-o3iu_8_e.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-2N9iLfSV.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-KowrZGDn.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-iqoM9O6K.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-amrd0ZAC.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-lGIROVhD.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-YdB61wcR.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-fTqnOwI-.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-ufdJpVd7.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-AiF5JOYj.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-jF_r-LiH.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-4jwx7o0x.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-h2bjNLn0.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-73S8uMBj.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-OOjoP5Bu.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-0tB41mqL.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html--_pbkODR.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-IzJEgoaS.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-_6njHjv4.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-Y4DlozSL.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-24SR8WlD.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-PuTjITBR.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-v4aTpWIu.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-4EnATQSh.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html--6HeuyKz.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-NcXmmnhU.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-bbL6rcS0.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-oVjlmAWm.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-6asZAYyo.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-drJ5ESTK.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-yH89azny.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-L3L0IBzL.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-U1EOXVBU.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-f0pjvtn9.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-13LsKEht.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-pZ-X52NT.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-t1wa-AWx.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-uxbotmyQ.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-hldJMkrr.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-86DAvnOR.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-Fm2YTWOC.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-QVkQn3ly.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-S7vlEf1l.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-A8gbKkP6.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-J9GU9ls4.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-z4ox0xYd.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-5845bAuZ.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-zUfa-_iN.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-Ej0O9-Gn.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-iSzFsI5S.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-PxHV-HvF.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-wjezQEPV.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-oTRmp2Fs.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-op0mNh2o.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-BZ_rPOpM.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-fVwbaRNu.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-qla1hf-Q.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-r3F6rRIi.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-qtfaaLA0.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-oMm7G2hb.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-Lt_Zs8n6.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-mBlElLJm.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-jeJaL7Uv.js" as="script"><link rel="prefetch" href="/begun-blog/assets/APP.html-_AgDqwNR.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-OvjX3rPh.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-R8m30cwH.js" as="script"><link rel="prefetch" href="/begun-blog/assets/Collections-FAQ.html-IcJJ6mBZ.js" as="script"><link rel="prefetch" href="/begun-blog/assets/Design-Pattern-FAQ.html-ZrRrUtdO.js" as="script"><link rel="prefetch" href="/begun-blog/assets/Elasticsearch-FAQ.html-zDaYu0FQ.js" as="script"><link rel="prefetch" href="/begun-blog/assets/GC-FAQ.html-Inv_RSwR.js" as="script"><link rel="prefetch" href="/begun-blog/assets/JUC-FAQ.html-Ay-wBbNz.js" as="script"><link rel="prefetch" href="/begun-blog/assets/JVM-FAQ.html-SwU1NaHd.js" as="script"><link rel="prefetch" href="/begun-blog/assets/Java-Basics-FAQ.html-fm-LLq-7.js" as="script"><link rel="prefetch" href="/begun-blog/assets/Java-Develop-FAQ.html-cuWBmK93.js" as="script"><link rel="prefetch" href="/begun-blog/assets/Kafka-FAQ.html-170apqDm.js" as="script"><link rel="prefetch" href="/begun-blog/assets/MyBatis-FAQ.html-Lstuzh1u.js" as="script"><link rel="prefetch" href="/begun-blog/assets/MySQL-FAQ.html-y3n__kMh.js" as="script"><link rel="prefetch" href="/begun-blog/assets/Network-FAQ.html--lSF3iJ2.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-yAKDotY1.js" as="script"><link rel="prefetch" href="/begun-blog/assets/RPC-FAQ.html-X5_Gk_rD.js" as="script"><link rel="prefetch" href="/begun-blog/assets/Redis-FAQ.html-q3Vd9QNk.js" as="script"><link rel="prefetch" href="/begun-blog/assets/Spring-FAQ.html-LycvNUGl.js" as="script"><link rel="prefetch" href="/begun-blog/assets/SpringBoot-FAQ.html-V_7MUnRR.js" as="script"><link rel="prefetch" href="/begun-blog/assets/Tomcat-FAQ.html-tls2WEK3.js" as="script"><link rel="prefetch" href="/begun-blog/assets/ZooKeeper-FAQ.html-niFVJEPd.js" as="script"><link rel="prefetch" href="/begun-blog/assets/networks-interview.html-mGSM16AE.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-IcQsPhN2.js" as="script"><link rel="prefetch" href="/begun-blog/assets/WSL.html-jKXIKUY0.js" as="script"><link rel="prefetch" href="/begun-blog/assets/centos.html-E4g1Xg9P.js" as="script"><link rel="prefetch" href="/begun-blog/assets/ssh.html-GWOh0qKl.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-McNmzt3U.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-xQ6DhPeI.js" as="script"><link rel="prefetch" href="/begun-blog/assets/big-data.html-bGJzHAiI.js" as="script"><link rel="prefetch" href="/begun-blog/assets/machine-learning.html-YJvS1S8O.js" as="script"><link rel="prefetch" href="/begun-blog/assets/practical-project.html-5gE4QqyQ.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-Nl3PwbsA.js" as="script"><link rel="prefetch" href="/begun-blog/assets/system-design.html-AHxjcRA8.js" as="script"><link rel="prefetch" href="/begun-blog/assets/tool-library.html-AGZrjQ_L.js" as="script"><link rel="prefetch" href="/begun-blog/assets/tools.html-oIt3zEnr.js" as="script"><link rel="prefetch" href="/begun-blog/assets/tutorial.html-lQKMwiSy.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-T8JyrgcC.js" as="script"><link rel="prefetch" href="/begun-blog/assets/gestalt-principle.html-nvHQW5Au.js" as="script"><link rel="prefetch" href="/begun-blog/assets/infomation-flow.html-C_RVUjLa.js" as="script"><link rel="prefetch" href="/begun-blog/assets/left-or-right.html-3yHd86Y6.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-yZLTcdCE.js" as="script"><link rel="prefetch" href="/begun-blog/assets/apply.html--G5rKjXB.js" as="script"><link rel="prefetch" href="/begun-blog/assets/decorative.html-ZM7Ieh3g.js" as="script"><link rel="prefetch" href="/begun-blog/assets/draw.html-mZCdbaEg.js" as="script"><link rel="prefetch" href="/begun-blog/assets/flour.html-lAWUWU5h.js" as="script"><link rel="prefetch" href="/begun-blog/assets/guide.html-ePA9884-.js" as="script"><link rel="prefetch" href="/begun-blog/assets/intro.html-cTr2V8q_.js" as="script"><link rel="prefetch" href="/begun-blog/assets/line.html-RLgtxPfT.js" as="script"><link rel="prefetch" href="/begun-blog/assets/rule.html-ZIVJQmIH.js" as="script"><link rel="prefetch" href="/begun-blog/assets/skill.html-VLSHHSba.js" as="script"><link rel="prefetch" href="/begun-blog/assets/software.html-qI3jCYHV.js" as="script"><link rel="prefetch" href="/begun-blog/assets/start.html-ekcjEcbj.js" as="script"><link rel="prefetch" href="/begun-blog/assets/type.html-mkp7ZRQe.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-q6LwqoP2.js" as="script"><link rel="prefetch" href="/begun-blog/assets/search.html-3Qu8mlrg.js" as="script"><link rel="prefetch" href="/begun-blog/assets/text-field.html-4E7JAl-C.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-usHAdXrL.js" as="script"><link rel="prefetch" href="/begun-blog/assets/intro.html-QwuAXtNY.js" as="script"><link rel="prefetch" href="/begun-blog/assets/navbar-design.html--y8_eUgD.js" as="script"><link rel="prefetch" href="/begun-blog/assets/navbar.html-HGwJijzF.js" as="script"><link rel="prefetch" href="/begun-blog/assets/sidebar-navigate.html-JgYcCJ7c.js" as="script"><link rel="prefetch" href="/begun-blog/assets/tabbar-design.html-tNXGPOhK.js" as="script"><link rel="prefetch" href="/begun-blog/assets/tabbar.html-mQ8YO8Nv.js" as="script"><link rel="prefetch" href="/begun-blog/assets/OS.html-0wcmhhNa.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-ReiDvJcF.js" as="script"><link rel="prefetch" href="/begun-blog/assets/ci.html-qzpbmsev.js" as="script"><link rel="prefetch" href="/begun-blog/assets/computer.html-UCf97CTo.js" as="script"><link rel="prefetch" href="/begun-blog/assets/debug.html-Sam9Vk1T.js" as="script"><link rel="prefetch" href="/begun-blog/assets/encoding.html-_iCKoRBd.js" as="script"><link rel="prefetch" href="/begun-blog/assets/file-extension.html-svGlQ0by.js" as="script"><link rel="prefetch" href="/begun-blog/assets/glob.html-aXYgm_oV.js" as="script"><link rel="prefetch" href="/begun-blog/assets/license.html-WzlOKqw8.js" as="script"><link rel="prefetch" href="/begun-blog/assets/open-source-and-free.html-DRDRgz6g.js" as="script"><link rel="prefetch" href="/begun-blog/assets/path.html-bJhJHMCS.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-nulFPS-P.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-38bBTUeb.js" as="script"><link rel="prefetch" href="/begun-blog/assets/deploy.html-RNisBdyn.js" as="script"><link rel="prefetch" href="/begun-blog/assets/intro.html-qtK8HBFw.js" as="script"><link rel="prefetch" href="/begun-blog/assets/pages.html-ZkapKZWn.js" as="script"><link rel="prefetch" href="/begun-blog/assets/pr.html-JPQXZtAX.js" as="script"><link rel="prefetch" href="/begun-blog/assets/semantic.html-5I_8UfzP.js" as="script"><link rel="prefetch" href="/begun-blog/assets/speedup.html-qVGNpFGp.js" as="script"><link rel="prefetch" href="/begun-blog/assets/token.html-460cjC4r.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-BxLOCbsb.js" as="script"><link rel="prefetch" href="/begun-blog/assets/add-path.html-yAXod2M5.js" as="script"><link rel="prefetch" href="/begun-blog/assets/cmd.html-LjLT7fwM.js" as="script"><link rel="prefetch" href="/begun-blog/assets/hidden-file.html-TrPn8pyV.js" as="script"><link rel="prefetch" href="/begun-blog/assets/notepad.html-mxeD8emw.js" as="script"><link rel="prefetch" href="/begun-blog/assets/shortcut-key.html-xpciaP_i.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-w7WUGvYY.js" as="script"><link rel="prefetch" href="/begun-blog/assets/arithmetic.html-KST2OuK1.js" as="script"><link rel="prefetch" href="/begun-blog/assets/array.html-0956QJTo.js" as="script"><link rel="prefetch" href="/begun-blog/assets/condition.html-XzykOtxG.js" as="script"><link rel="prefetch" href="/begun-blog/assets/debug.html-TZHxhYw4.js" as="script"><link rel="prefetch" href="/begun-blog/assets/expansion.html-lQR0rvoI.js" as="script"><link rel="prefetch" href="/begun-blog/assets/function.html-7kjo_8dS.js" as="script"><link rel="prefetch" href="/begun-blog/assets/grammar.html-cWVFr1aA.js" as="script"><link rel="prefetch" href="/begun-blog/assets/intro.html-hZAejORR.js" as="script"><link rel="prefetch" href="/begun-blog/assets/loop.html-V4LBewgD.js" as="script"><link rel="prefetch" href="/begun-blog/assets/mktemp.html-cz3oM0Mi.js" as="script"><link rel="prefetch" href="/begun-blog/assets/prompt.html-INBBAKlc.js" as="script"><link rel="prefetch" href="/begun-blog/assets/quotation.html-CNZXgnO9.js" as="script"><link rel="prefetch" href="/begun-blog/assets/read.html-b3jcD67g.js" as="script"><link rel="prefetch" href="/begun-blog/assets/readline.html-rezWcyg9.js" as="script"><link rel="prefetch" href="/begun-blog/assets/script.html-o0052lk6.js" as="script"><link rel="prefetch" href="/begun-blog/assets/set.html-erGc3eBX.js" as="script"><link rel="prefetch" href="/begun-blog/assets/stack.html-bkpkBWfq.js" as="script"><link rel="prefetch" href="/begun-blog/assets/startup.html-FHtcGIqy.js" as="script"><link rel="prefetch" href="/begun-blog/assets/string.html-r95M-3oT.js" as="script"><link rel="prefetch" href="/begun-blog/assets/variable.html-4P8f1NRt.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-7SePmTcj.js" as="script"><link rel="prefetch" href="/begun-blog/assets/add.html-FbgdlHTn.js" as="script"><link rel="prefetch" href="/begun-blog/assets/command.html-0oN21gK3.js" as="script"><link rel="prefetch" href="/begun-blog/assets/dir.html-132g8alO.js" as="script"><link rel="prefetch" href="/begun-blog/assets/excu.html-gQA--cLq.js" as="script"><link rel="prefetch" href="/begun-blog/assets/file.html-LR7ck14_.js" as="script"><link rel="prefetch" href="/begun-blog/assets/ln.html-rO6E8Jhh.js" as="script"><link rel="prefetch" href="/begun-blog/assets/other.html-djoE1AQq.js" as="script"><link rel="prefetch" href="/begun-blog/assets/path.html-oq5-zQ8S.js" as="script"><link rel="prefetch" href="/begun-blog/assets/temp.html-Iv_aSX9I.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-nEWGr3lC.js" as="script"><link rel="prefetch" href="/begun-blog/assets/dir.html-dO_or4qq.js" as="script"><link rel="prefetch" href="/begun-blog/assets/file.html-wzB5UsKW.js" as="script"><link rel="prefetch" href="/begun-blog/assets/mount.html-S-2Z3fdl.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-lgMtwXag.js" as="script"><link rel="prefetch" href="/begun-blog/assets/advantage.html-ejEWcs6G.js" as="script"><link rel="prefetch" href="/begun-blog/assets/desktop.html-qX5IE63x.js" as="script"><link rel="prefetch" href="/begun-blog/assets/history.html-UPEFmwr0.js" as="script"><link rel="prefetch" href="/begun-blog/assets/intro.html-L5XZP0ke.js" as="script"><link rel="prefetch" href="/begun-blog/assets/language.html-0t52wZKA.js" as="script"><link rel="prefetch" href="/begun-blog/assets/startup.html-pq08o1Vj.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-KndiVq-D.js" as="script"><link rel="prefetch" href="/begun-blog/assets/debug.html-zwQEiSdZ.js" as="script"><link rel="prefetch" href="/begun-blog/assets/lang.html-2V85hRYM.js" as="script"><link rel="prefetch" href="/begun-blog/assets/manage.html-t1M5-zeQ.js" as="script"><link rel="prefetch" href="/begun-blog/assets/webserver.html-vGSKJMtF.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-CNj0kP18.js" as="script"><link rel="prefetch" href="/begun-blog/assets/debug.html-cOP4WjnU.js" as="script"><link rel="prefetch" href="/begun-blog/assets/1.html-I6z3g6Ze.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-PxCjCPHp.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-AQL8_6zI.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-8KSG26iT.js" as="script"><link rel="prefetch" href="/begun-blog/assets/hadoop-base.html-je-DSXto.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-i2CgSl9W.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-12tTAdSR.js" as="script"><link rel="prefetch" href="/begun-blog/assets/cache.html-eSGGSJSP.js" as="script"><link rel="prefetch" href="/begun-blog/assets/checkout.html-gVs_oOrY.js" as="script"><link rel="prefetch" href="/begun-blog/assets/config.html-6GdA79VL.js" as="script"><link rel="prefetch" href="/begun-blog/assets/gh-pages-deploy.html-vVaoLPrS.js" as="script"><link rel="prefetch" href="/begun-blog/assets/intro.html-P2mrKzT7.js" as="script"><link rel="prefetch" href="/begun-blog/assets/basic.html-olJeSeP5.js" as="script"><link rel="prefetch" href="/begun-blog/assets/character-set.html-Nj3Hzb88.js" as="script"><link rel="prefetch" href="/begun-blog/assets/api-gateway.html-uZ9QFCKq.js" as="script"><link rel="prefetch" href="/begun-blog/assets/distributed-id.html-X9BVmuF3.js" as="script"><link rel="prefetch" href="/begun-blog/assets/distributed-transaction.html-JPkABzDj.js" as="script"><link rel="prefetch" href="/begun-blog/assets/cluster.html-WK_u1QWH.js" as="script"><link rel="prefetch" href="/begun-blog/assets/disaster-recovery_remote-live.html-2MxqQbK9.js" as="script"><link rel="prefetch" href="/begun-blog/assets/fallback_circuit-breaker.html-5sl6bFvF.js" as="script"><link rel="prefetch" href="/begun-blog/assets/high-availability-system-design.html-Qog3OHOJ.js" as="script"><link rel="prefetch" href="/begun-blog/assets/limit-request.html-Jzs6v3pq.js" as="script"><link rel="prefetch" href="/begun-blog/assets/performance-test.html-Y9H8koS8.js" as="script"><link rel="prefetch" href="/begun-blog/assets/timeout-and-retry.html-5B7gZjaK.js" as="script"><link rel="prefetch" href="/begun-blog/assets/load-balancing.html-OWfqKT3K.js" as="script"><link rel="prefetch" href="/begun-blog/assets/read-and-write-separation-and-library-subtable.html-ud08M2Md.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-m78VdZDq.js" as="script"><link rel="prefetch" href="/begun-blog/assets/J2EEåŸºç¡€çŸ¥è¯†.html-UdVi63qZ.js" as="script"><link rel="prefetch" href="/begun-blog/assets/system-design-questions.html-2UQe2jeO.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-J89-FxBS.js" as="script"><link rel="prefetch" href="/begun-blog/assets/bigdecimal.html-J0ZGynS0.js" as="script"><link rel="prefetch" href="/begun-blog/assets/generics-and-wildcards.html-d6TNxTAC.js" as="script"><link rel="prefetch" href="/begun-blog/assets/io.html-qKRcC7Fe.js" as="script"><link rel="prefetch" href="/begun-blog/assets/java-basic-questions-01.html-xq69cfmU.js" as="script"><link rel="prefetch" href="/begun-blog/assets/java-basic-questions-02.html-_x0pHg-o.js" as="script"><link rel="prefetch" href="/begun-blog/assets/java-basic-questions-03.html-OpGpXTaR.js" as="script"><link rel="prefetch" href="/begun-blog/assets/java-keyword-summary.html-u4pSJvO0.js" as="script"><link rel="prefetch" href="/begun-blog/assets/proxy.html-2iR9Iu3k.js" as="script"><link rel="prefetch" href="/begun-blog/assets/reflection.html-8GIV9-WK.js" as="script"><link rel="prefetch" href="/begun-blog/assets/serialization.html-Ee2m2LDs.js" as="script"><link rel="prefetch" href="/begun-blog/assets/why-there-only-value-passing-in-java.html-rkCHHRMA.js" as="script"><link rel="prefetch" href="/begun-blog/assets/arraylist-source-code.html-didI8OMA.js" as="script"><link rel="prefetch" href="/begun-blog/assets/concurrent-hash-map-source-code.html-M00gZDDT.js" as="script"><link rel="prefetch" href="/begun-blog/assets/hashmap-source-code.html--r2M8UHq.js" as="script"><link rel="prefetch" href="/begun-blog/assets/java-collection-precautions-for-use.html-HBiGmoKm.js" as="script"><link rel="prefetch" href="/begun-blog/assets/java-collection-questions-01.html-eHOZeIC0.js" as="script"><link rel="prefetch" href="/begun-blog/assets/java-collection-questions-02.html-C2ginvP1.js" as="script"><link rel="prefetch" href="/begun-blog/assets/aqs.html-K0E_JPs3.js" as="script"><link rel="prefetch" href="/begun-blog/assets/atomic-classes.html-5IvR2Eya.js" as="script"><link rel="prefetch" href="/begun-blog/assets/completablefuture-intro.html-JxB7u8A0.js" as="script"><link rel="prefetch" href="/begun-blog/assets/java-concurrent-collections.html-Q2mU3G6y.js" as="script"><link rel="prefetch" href="/begun-blog/assets/java-concurrent-questions-01.html-heoJIpYU.js" as="script"><link rel="prefetch" href="/begun-blog/assets/java-concurrent-questions-02.html-wrLFK-oo.js" as="script"><link rel="prefetch" href="/begun-blog/assets/java-thread-pool-best-practices.html-o5RPU6d5.js" as="script"><link rel="prefetch" href="/begun-blog/assets/java-thread-pool-summary.html-hNbzBeAx.js" as="script"><link rel="prefetch" href="/begun-blog/assets/reentrantlock.html-S53atWHs.js" as="script"><link rel="prefetch" href="/begun-blog/assets/threadlocal.html-f6PA3Zk-.js" as="script"><link rel="prefetch" href="/begun-blog/assets/JVMOptimize.html-FkMf3GjI.js" as="script"><link rel="prefetch" href="/begun-blog/assets/class-file-structure.html-lJys9nYm.js" as="script"><link rel="prefetch" href="/begun-blog/assets/class-loading-process.html-L-Pdr4wv.js" as="script"><link rel="prefetch" href="/begun-blog/assets/classloader.html-ifTkPFB6.js" as="script"><link rel="prefetch" href="/begun-blog/assets/java-jvm-questions-01.html-j9lpKfxt.js" as="script"><link rel="prefetch" href="/begun-blog/assets/jdk-monitoring-and-troubleshooting-tools.html-UUT8dDeI.js" as="script"><link rel="prefetch" href="/begun-blog/assets/jvm-garbage-collection.html-9nCgpWWm.js" as="script"><link rel="prefetch" href="/begun-blog/assets/jvm-intro.html-MF6NIfWG.js" as="script"><link rel="prefetch" href="/begun-blog/assets/jvm-parameters-intro.html-D2KRi4H2.js" as="script"><link rel="prefetch" href="/begun-blog/assets/memory-area.html-Iw8tkx0y.js" as="script"><link rel="prefetch" href="/begun-blog/assets/java10.html-fM9gq25q.js" as="script"><link rel="prefetch" href="/begun-blog/assets/java11.html-aDFpwiQt.js" as="script"><link rel="prefetch" href="/begun-blog/assets/java12-13.html-CNouwWmD.js" as="script"><link rel="prefetch" href="/begun-blog/assets/java14-15.html-GajpJD2o.js" as="script"><link rel="prefetch" href="/begun-blog/assets/java8-common-new-features.html-8xvKXSxH.js" as="script"><link rel="prefetch" href="/begun-blog/assets/java8-tutorial-translate.html-Te4pUZuQ.js" as="script"><link rel="prefetch" href="/begun-blog/assets/java9.html-HRItX7-L.js" as="script"><link rel="prefetch" href="/begun-blog/assets/10-classical-sorting-algorithms.html-UfXl2LMa.js" as="script"><link rel="prefetch" href="/begun-blog/assets/linkedlist-algorithm-problems.html-iuCjgHRZ.js" as="script"><link rel="prefetch" href="/begun-blog/assets/string-algorithm-problems.html-JysawBkE.js" as="script"><link rel="prefetch" href="/begun-blog/assets/the-sword-refers-to-offer.html-BzYhr8Sk.js" as="script"><link rel="prefetch" href="/begun-blog/assets/bloom-filter.html--UZ1nkjA.js" as="script"><link rel="prefetch" href="/begun-blog/assets/graph.html-NeOaFZEv.js" as="script"><link rel="prefetch" href="/begun-blog/assets/heap.html-SLtZDrPE.js" as="script"><link rel="prefetch" href="/begun-blog/assets/linear-data-structure.html-v5AbdscC.js" as="script"><link rel="prefetch" href="/begun-blog/assets/red-black-tree.html-t45sODb1.js" as="script"><link rel="prefetch" href="/begun-blog/assets/tree.html-kpAdFp0x.js" as="script"><link rel="prefetch" href="/begun-blog/assets/http_https.html-1AZ7l8SU.js" as="script"><link rel="prefetch" href="/begun-blog/assets/http1.0_http1.1.html-ip0q37iu.js" as="script"><link rel="prefetch" href="/begun-blog/assets/osi_tcp-ip-model.html-zEfXnvx0.js" as="script"><link rel="prefetch" href="/begun-blog/assets/other-network-questions.html-ERVOaUq2.js" as="script"><link rel="prefetch" href="/begun-blog/assets/è°¢å¸Œä»è€å¸ˆçš„ã€Šè®¡ç®—æœºç½‘ç»œã€‹å†…å®¹æ€»ç»“.html-g_qoNcMS.js" as="script"><link rel="prefetch" href="/begun-blog/assets/linux-intro.html-6eKMmjj7.js" as="script"><link rel="prefetch" href="/begun-blog/assets/operating-system-basic-questions-01.html-CBh-ejyH.js" as="script"><link rel="prefetch" href="/begun-blog/assets/shell-intro.html-I3G_WISC.js" as="script"><link rel="prefetch" href="/begun-blog/assets/a-thousand-lines-of-mysql-study-notes.html-CcP4zV6Z.js" as="script"><link rel="prefetch" href="/begun-blog/assets/how-sql-executed-in-mysql.html-u_wX_jha.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index-invalidation-caused-by-implicit-conversion.html-0nt5II5W.js" as="script"><link rel="prefetch" href="/begun-blog/assets/innodb-implementation-of-mvcc.html-fF5F_oJQ.js" as="script"><link rel="prefetch" href="/begun-blog/assets/mysql-basic.html-0HfK_-d-.js" as="script"><link rel="prefetch" href="/begun-blog/assets/mysql-high-performance-optimization-specification-recommendations.html-0LSv-7g7.js" as="script"><link rel="prefetch" href="/begun-blog/assets/mysql-index.html-1xQELjuc.js" as="script"><link rel="prefetch" href="/begun-blog/assets/mysql-logs.html--6uSoGDk.js" as="script"><link rel="prefetch" href="/begun-blog/assets/mysql-questions-01.html-J7y7gXDQ.js" as="script"><link rel="prefetch" href="/begun-blog/assets/some-thoughts-on-database-storage-time.html-6m491lLU.js" as="script"><link rel="prefetch" href="/begun-blog/assets/transaction-isolation-level.html-LSXApbzz.js" as="script"><link rel="prefetch" href="/begun-blog/assets/3-commonly-used-cache-read-and-write-strategies.html-VTvHj1y3.js" as="script"><link rel="prefetch" href="/begun-blog/assets/redis-basic.html--xwTLUud.js" as="script"><link rel="prefetch" href="/begun-blog/assets/redis-data.html-_c5YGFpf.js" as="script"><link rel="prefetch" href="/begun-blog/assets/redis-highAvailability-combat.html-ecxhtx0q.js" as="script"><link rel="prefetch" href="/begun-blog/assets/redis-highAvailability.html-J0_BtXin.js" as="script"><link rel="prefetch" href="/begun-blog/assets/redis-memory-fragmentation.html-V0wgTJxJ.js" as="script"><link rel="prefetch" href="/begun-blog/assets/redis-questions-01.html-UTRfvtYW.js" as="script"><link rel="prefetch" href="/begun-blog/assets/cache-king-1.html-UjjmUl0l.js" as="script"><link rel="prefetch" href="/begun-blog/assets/cache-king-2.html-GfaNlWo4.js" as="script"><link rel="prefetch" href="/begun-blog/assets/dubbo.html-PhszIG0G.js" as="script"><link rel="prefetch" href="/begun-blog/assets/why-use-rpc.html-289Ir5CG.js" as="script"><link rel="prefetch" href="/begun-blog/assets/cap_base-theorem.html-33SpZl_w.js" as="script"><link rel="prefetch" href="/begun-blog/assets/gossip.html-BQLYMCkI.js" as="script"><link rel="prefetch" href="/begun-blog/assets/paxos-algorithm.html-_MP5XhnI.js" as="script"><link rel="prefetch" href="/begun-blog/assets/raft-algorithm.html-ioRkH6jZ.js" as="script"><link rel="prefetch" href="/begun-blog/assets/kafka-questions-01.html-__Y_2fca.js" as="script"><link rel="prefetch" href="/begun-blog/assets/message-queue.html-w_UIxD1c.js" as="script"><link rel="prefetch" href="/begun-blog/assets/rabbitmq-intro.html-gvpkH-rq.js" as="script"><link rel="prefetch" href="/begun-blog/assets/rocketmq-intro.html-qlfJFxYu.js" as="script"><link rel="prefetch" href="/begun-blog/assets/rocketmq-questions.html-afQ-w0kA.js" as="script"><link rel="prefetch" href="/begun-blog/assets/seven-tips-for-becoming-an-advanced-programmer.html-NHLOs7sx.js" as="script"><link rel="prefetch" href="/begun-blog/assets/screen-candidates-for-packaging.html-BgUVGaPv.js" as="script"><link rel="prefetch" href="/begun-blog/assets/technical-preliminary-preparation.html-YP2E-hGH.js" as="script"><link rel="prefetch" href="/begun-blog/assets/the-experience-and-thinking-of-an-interview-experienced-by-an-older-programmer.html-9hmILRuH.js" as="script"><link rel="prefetch" href="/begun-blog/assets/8-years-programmer-work-summary.html-Qb5_SsJk.js" as="script"><link rel="prefetch" href="/begun-blog/assets/two-years-of-back-end-develop--experience-in-didi_toutiao.html-iIbHnTwZ.js" as="script"><link rel="prefetch" href="/begun-blog/assets/efficient-book-publishing-and-practice-guide.html-IDy_uEtC.js" as="script"><link rel="prefetch" href="/begun-blog/assets/how-do-programmers-publish-a-technical-book.html-XG3Nyu0L.js" as="script"><link rel="prefetch" href="/begun-blog/assets/employee-performance.html-WGJSNAGf.js" as="script"><link rel="prefetch" href="/begun-blog/assets/get-into-work-mode-quickly-when-you-join-a-company.html-lDVGulDA.js" as="script"><link rel="prefetch" href="/begun-blog/assets/RESTfulAPI.html-SvdvDgIR.js" as="script"><link rel="prefetch" href="/begun-blog/assets/naming.html-eIxObT_9.js" as="script"><link rel="prefetch" href="/begun-blog/assets/refactoring.html-OorpqUdE.js" as="script"><link rel="prefetch" href="/begun-blog/assets/netty.html-CyaxBHkL.js" as="script"><link rel="prefetch" href="/begun-blog/assets/big-data-schedule.html--WJ590dI.js" as="script"><link rel="prefetch" href="/begun-blog/assets/schedule-change.html-DdjqE2kW.js" as="script"><link rel="prefetch" href="/begun-blog/assets/schedule-task.html-UgG-pBSH.js" as="script"><link rel="prefetch" href="/begun-blog/assets/advantages_disadvantages-of-jwt.html-lqfaQB-e.js" as="script"><link rel="prefetch" href="/begun-blog/assets/basis-of-authority-certification.html-SqQQl8ii.js" as="script"><link rel="prefetch" href="/begun-blog/assets/data-desensitization.html-FKv-6vpQ.js" as="script"><link rel="prefetch" href="/begun-blog/assets/jwt-intro.html-9YZZ-GRA.js" as="script"><link rel="prefetch" href="/begun-blog/assets/sentive-words-filter.html-qy7VVYF3.js" as="script"><link rel="prefetch" href="/begun-blog/assets/sso-intro.html-9pDiHV6H.js" as="script"><link rel="prefetch" href="/begun-blog/assets/docker-in-action.html-b8_q5K4v.js" as="script"><link rel="prefetch" href="/begun-blog/assets/docker-intro.html-9wfqTA8K.js" as="script"><link rel="prefetch" href="/begun-blog/assets/git-intro.html-8T9E1c0d.js" as="script"><link rel="prefetch" href="/begun-blog/assets/github-tips.html-A6wQ0ibt.js" as="script"><link rel="prefetch" href="/begun-blog/assets/zookeeper-in-action.html-WZz6P9Jv.js" as="script"><link rel="prefetch" href="/begun-blog/assets/zookeeper-intro.html-76HnrqGJ.js" as="script"><link rel="prefetch" href="/begun-blog/assets/mybatis-interview.html-t_9XYhAJ.js" as="script"><link rel="prefetch" href="/begun-blog/assets/spring-boot-auto-assembly-principles.html-wFAHFJQk.js" as="script"><link rel="prefetch" href="/begun-blog/assets/spring-common-annotations.html-qrxK7Df2.js" as="script"><link rel="prefetch" href="/begun-blog/assets/spring-design-patterns-summary.html-Q894TbOa.js" as="script"><link rel="prefetch" href="/begun-blog/assets/spring-knowledge-and-questions-summary.html-ZHEzRJmd.js" as="script"><link rel="prefetch" href="/begun-blog/assets/spring-transaction.html-4zQ4JHP-.js" as="script"><link rel="prefetch" href="/begun-blog/assets/springboot-knowledge-and-questions-summary.html-2oCnDtIM.js" as="script"><link rel="prefetch" href="/begun-blog/assets/springcloud-intro.html-mplqhVIM.js" as="script"><link rel="prefetch" href="/begun-blog/assets/404.html-IRlkKnLA.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-gw1UvWsX.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-SRCbuj-b.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-bMAhpPi2.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-LATcrmao.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-q-iZE10_.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-tNWVieNg.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-U_P2pWWs.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-5HShqLC1.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-GNJ3efuZ.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-m-lK4cLR.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-y6gsrI9q.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-6R9A9ftX.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-kEkqnNfx.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-tLCMBjAj.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-BDTc6ym9.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-YLMrOEuH.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-eid48egW.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-lXVA7J92.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-_95q7C5k.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-hcJXgh-I.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-14WFe22w.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-ej3n_1Z_.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-ukg2xPIR.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-qOUUe4kR.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-Oo_fD4Qk.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html--m4GiB03.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-znaESePh.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-fu9GGvc8.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-BZh0ar8k.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-bLrD6vfC.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-E5eJfPD5.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-h1hIUJ6O.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-wFjMSi0t.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-qvTOxszk.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-WP8RgPQe.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-4HD9To3z.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-d2iu81jM.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-HIS0FrdU.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-it6xuvyZ.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-AZ5HCIEz.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-zIZqU-1o.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-BOacM0_W.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-7cOEBeIT.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-j38qYibw.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-npsYeoHy.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-BMTXopOU.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-Nv0jCRFo.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-QtL-bPIg.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-tk5mX5Av.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-zpNTVUfe.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-ndsU3ZDS.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-3uEOIYSk.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-UGcejhQr.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-y8NWE-D3.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-UiTBGAs9.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-9LhxPpeC.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-n7g2MXr6.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-bCg7HGMq.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-3mZDBRzq.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-VwQ8yvXw.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-dGhf5tLj.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-7HjhCodP.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-vn87mRNi.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-HTxsMxpk.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-dAmU18lS.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-BbnOgz_A.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-rsfmkWm0.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-03E926pd.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-awFe7HdG.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-RhZgvvs3.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-IwWdJeTZ.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-Gyvpqyzs.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-zZj8SWNo.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-thwRsnFm.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-SPyiahi1.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-ip4GMK-R.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-2YbujoJY.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-l4kLPYBr.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-vrMLo-1o.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-Mns8rXpF.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-vI7fHhbw.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-rcfcUhPS.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-jj9kZr5C.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-5F0tPym1.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-r2JQiPq4.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-B-2m3vG1.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-IoBKeD-m.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-EdVXKR5T.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-fQWki9ND.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-qIhm4Rkq.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-Wb68CFD1.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-tM86ETvg.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-RJl4ownd.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-4GyqLfI4.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-hc_87JBx.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-5a4piXn7.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-fH-2vohl.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-C2CYtzqN.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-nJFoxiiO.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-5ZUPLOPn.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-wji0IF7C.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-b301yM--.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-5aoOYfk5.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-nK9QjdCq.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-Lwu9KvbJ.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-Xdwcj6l2.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-5S4l3OfF.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-YQJFc-x8.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html--cLdqIi1.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-PDZMVENH.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-idAAVd6d.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index.html-aeqtHOci.js" as="script"><link rel="prefetch" href="/begun-blog/assets/waline-meta-w40geAFS.js" as="script"><link rel="prefetch" href="/begun-blog/assets/component-bpw347CC.js" as="script"><link rel="prefetch" href="/begun-blog/assets/photoswipe.esm-i2ohwMnJ.js" as="script"><link rel="prefetch" href="/begun-blog/assets/pageview-ErMbk5Sk.js" as="script"><link rel="prefetch" href="/begun-blog/assets/style-w40geAFS.js" as="script"><link rel="prefetch" href="/begun-blog/assets/docsearch-w40geAFS.js" as="script"><link rel="prefetch" href="/begun-blog/assets/index-QOy62Fup.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><!--[--><div class="theme-container has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><!--[--><a class="vp-link vp-brand vp-brand" href="/begun-blog/"><img class="vp-nav-logo" src="/begun-blog/logo.svg" aria-hidden><!----><span class="vp-site-name hide-in-pad">å’–é£ž</span></a><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-center"><!--[--><!----><!--]--><!--[--><nav class="vp-nav-links"><div class="nav-item hide-in-mobile"><a aria-label="ä¸»é¡µ" class="vp-link nav-link nav-link" href="/begun-blog/"><span class="font-icon icon iconfont icon-home" style=""></span>ä¸»é¡µ<!----></a></div><div class="nav-item hide-in-mobile"><a aria-label="å’–é£žçš„éšç¬”" class="vp-link nav-link nav-link" href="/begun-blog/note/"><span class="font-icon icon iconfont icon-pen-to-square" style=""></span>å’–é£žçš„éšç¬”<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="ä»£ç ç¬”è®°"><span class="title"><span class="font-icon icon iconfont icon-code" style=""></span>ä»£ç ç¬”è®°</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a aria-label="ä»£ç ç¬”è®°" class="vp-link nav-link nav-link" href="/begun-blog/code/"><span class="font-icon icon iconfont icon-code" style=""></span>ä»£ç ç¬”è®°<!----></a></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>äº§å“è®¾è®¡</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a aria-label="UI è®¾è®¡" class="vp-link nav-link nav-link" href="/begun-blog/design/"><span class="font-icon icon iconfont icon-skin" style=""></span>UI è®¾è®¡<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>åŽç«¯è¿ç»´</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a aria-label="Linux" class="vp-link nav-link nav-link" href="/begun-blog/linux/"><span class="font-icon icon iconfont icon-linux" style=""></span>Linux<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>ç›´å‡»é¢è¯•</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a aria-label="çƒ¤é¢ç­‹" class="vp-link nav-link nav-link" href="/begun-blog/interview/"><span class="font-icon icon iconfont icon-result" style=""></span>çƒ¤é¢ç­‹<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="æ›´å¤šç³»åˆ—"><span class="title"><span class="font-icon icon iconfont icon-software" style=""></span>æ›´å¤šç³»åˆ—</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a aria-label="ä¸ªäººä»‹ç» Q&amp;A" class="vp-link nav-link nav-link" href="/begun-blog/about/author/"><span class="font-icon icon iconfont icon-note" style=""></span>ä¸ªäººä»‹ç» Q&amp;A<!----></a></li><li class="dropdown-item"><a aria-label="Java å¼€æºé¡¹ç›®ç²¾é€‰" class="vp-link nav-link nav-link" href="/begun-blog/about/openSourceProject/"><!---->Java å¼€æºé¡¹ç›®ç²¾é€‰<!----></a></li></ul></button></div></div></nav><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-end"><!--[--><!----><!--]--><!--[--><!----><div class="nav-item vp-repo"><a class="vp-repo-link" href="https://github.com/began-zhao/begun-blog" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button type="button" id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!--[--><div id="docsearch-container" style="display:none;"></div><div><button type="button" class="DocSearch DocSearch-Button" aria-label="æœç´¢"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">æœç´¢</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"><svg width="15" height="15" class="DocSearch-Control-Key-Icon"><path d="M4.505 4.496h2M5.505 5.496v5M8.216 4.496l.055 5.993M10 7.5c.333.333.5.667.5 1v2M12.326 4.5v5.996M8.384 4.496c1.674 0 2.116 0 2.116 1.5s-.442 1.5-2.116 1.5M3.205 9.303c-.09.448-.277 1.21-1.241 1.203C1 10.5.5 9.513.5 8V7c0-1.57.5-2.5 1.464-2.494.964.006 1.134.598 1.24 1.342M12.553 10.5h1.953" stroke-width="1.2" stroke="currentColor" fill="none" stroke-linecap="square"></path></svg></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--><!--]--><!--[--><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!--[--><!----><!--]--><ul class="vp-sidebar-links"><li><!--[--><a aria-label="ä»£ç ç¬”è®°" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/begun-blog/code/"><span class="font-icon icon iconfont icon-code" style=""></span>ä»£ç ç¬”è®°<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-heading"><span class="font-icon icon iconfont icon-module" style=""></span><span class="vp-sidebar-title">åŸºç¡€ä»‹ç»</span><!----></p><ul class="vp-sidebar-links"><li><!--[--><a aria-label="åŸºç¡€ä»‹ç»" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/begun-blog/code/basic/"><span class="font-icon icon iconfont icon-module" style=""></span>åŸºç¡€ä»‹ç»<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="åŸºç¡€çŸ¥è¯†" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/begun-blog/code/windows/"><span class="font-icon icon iconfont icon-windows" style=""></span>åŸºç¡€çŸ¥è¯†<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="GitHub" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/begun-blog/code/github/"><span class="font-icon icon iconfont icon-github" style=""></span>GitHub<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-java" style=""></span><span class="vp-sidebar-title">Java</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-java" style=""></span><span class="vp-sidebar-title">å¤§æ•°æ®</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-computer" style=""></span><span class="vp-sidebar-title">è®¡ç®—æœºåŸºç¡€</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-table" style=""></span><span class="vp-sidebar-title">æ•°æ®åº“</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-tool" style=""></span><span class="vp-sidebar-title">å¼€å‘å·¥å…·</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-frame" style=""></span><span class="vp-sidebar-title">å¸¸ç”¨æ¡†æž¶</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-software" style=""></span><span class="vp-sidebar-title">ç³»ç»Ÿè®¾è®¡</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable active" type="button"><span class="font-icon icon iconfont icon-change" style=""></span><span class="vp-sidebar-title">åˆ†å¸ƒå¼</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><!----><span class="vp-sidebar-title">ç†è®º&amp;ç®—æ³•&amp;åè®®</span><span class="vp-arrow end"></span></button><!----></section></li><li><!--[--><a aria-label="ç½‘å…³" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/begun-blog/code/java/distributed-system/api-gateway.html"><!---->ç½‘å…³<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="åˆ†å¸ƒå¼ ID" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/begun-blog/code/java/distributed-system/distributed-id.html"><!---->åˆ†å¸ƒå¼ ID<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><!----><span class="vp-sidebar-title">RPC</span><span class="vp-arrow end"></span></button><!----></section></li><li><!--[--><a aria-label="åˆ†å¸ƒå¼äº‹åŠ¡" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/begun-blog/code/java/distributed-system/distributed-transaction.html"><!---->åˆ†å¸ƒå¼äº‹åŠ¡<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable active" type="button"><!----><span class="vp-sidebar-title">åˆ†å¸ƒå¼åè°ƒ</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><!--[--><a aria-label="ZooKeeper å®žæˆ˜" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/begun-blog/code/java/distributed-system/distributed-process-coordination/zookeeper/zookeeper-intro.html"><span class="font-icon icon iconfont icon-ZooKeeper" style=""></span>ZooKeeper å®žæˆ˜<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="ZooKeeper å®žæˆ˜" class="vp-link nav-link active vp-sidebar-link vp-sidebar-page active nav-link active vp-sidebar-link vp-sidebar-page active" href="/begun-blog/code/java/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html"><span class="font-icon icon iconfont icon-ZooKeeper" style=""></span>ZooKeeper å®žæˆ˜<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="1. å¥½ä¹…ä¸è§" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/begun-blog/code/java/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html#_1-å¥½ä¹…ä¸è§"><!---->1. å¥½ä¹…ä¸è§<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="2. ä»€ä¹ˆæ˜¯ZooKeeper" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/begun-blog/code/java/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html#_2-ä»€ä¹ˆæ˜¯zookeeper"><!---->2. ä»€ä¹ˆæ˜¯ZooKeeper<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="3. ä¸€è‡´æ€§é—®é¢˜" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/begun-blog/code/java/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html#_3-ä¸€è‡´æ€§é—®é¢˜"><!---->3. ä¸€è‡´æ€§é—®é¢˜<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="4. ä¸€è‡´æ€§åè®®å’Œç®—æ³•" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/begun-blog/code/java/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html#_4-ä¸€è‡´æ€§åè®®å’Œç®—æ³•"><!---->4. ä¸€è‡´æ€§åè®®å’Œç®—æ³•<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="4.1. 2PCï¼ˆä¸¤é˜¶æ®µæäº¤ï¼‰" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/begun-blog/code/java/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html#_4-1-2pc-ä¸¤é˜¶æ®µæäº¤"><!---->4.1. 2PCï¼ˆä¸¤é˜¶æ®µæäº¤ï¼‰<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="4.2. 3PCï¼ˆä¸‰é˜¶æ®µæäº¤ï¼‰" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/begun-blog/code/java/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html#_4-2-3pc-ä¸‰é˜¶æ®µæäº¤"><!---->4.2. 3PCï¼ˆä¸‰é˜¶æ®µæäº¤ï¼‰<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="4.3. Paxos ç®—æ³•" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/begun-blog/code/java/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html#_4-3-paxos-ç®—æ³•"><!---->4.3. Paxos ç®—æ³•<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="5. å¼•å‡º ZAB" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/begun-blog/code/java/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html#_5-å¼•å‡º-zab"><!---->5. å¼•å‡º ZAB<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="5.1. Zookeeper æž¶æž„" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/begun-blog/code/java/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html#_5-1-zookeeper-æž¶æž„"><!---->5.1. Zookeeper æž¶æž„<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="5.2. ZAB ä¸­çš„ä¸‰ä¸ªè§’è‰²" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/begun-blog/code/java/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html#_5-2-zab-ä¸­çš„ä¸‰ä¸ªè§’è‰²"><!---->5.2. ZAB ä¸­çš„ä¸‰ä¸ªè§’è‰²<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="5.3. æ¶ˆæ¯å¹¿æ’­æ¨¡å¼" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/begun-blog/code/java/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html#_5-3-æ¶ˆæ¯å¹¿æ’­æ¨¡å¼"><!---->5.3. æ¶ˆæ¯å¹¿æ’­æ¨¡å¼<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="5.4. å´©æºƒæ¢å¤æ¨¡å¼" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/begun-blog/code/java/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html#_5-4-å´©æºƒæ¢å¤æ¨¡å¼"><!---->5.4. å´©æºƒæ¢å¤æ¨¡å¼<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="6. Zookeeperçš„å‡ ä¸ªç†è®ºçŸ¥è¯†" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/begun-blog/code/java/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html#_6-zookeeperçš„å‡ ä¸ªç†è®ºçŸ¥è¯†"><!---->6. Zookeeperçš„å‡ ä¸ªç†è®ºçŸ¥è¯†<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="6.1. æ•°æ®æ¨¡åž‹" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/begun-blog/code/java/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html#_6-1-æ•°æ®æ¨¡åž‹"><!---->6.1. æ•°æ®æ¨¡åž‹<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="6.2. ä¼šè¯" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/begun-blog/code/java/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html#_6-2-ä¼šè¯"><!---->6.2. ä¼šè¯<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="6.3. ACL" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/begun-blog/code/java/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html#_6-3-acl"><!---->6.3. ACL<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="6.4. Watcheræœºåˆ¶" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/begun-blog/code/java/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html#_6-4-watcheræœºåˆ¶"><!---->6.4. Watcheræœºåˆ¶<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="7. Zookeeperçš„å‡ ä¸ªå…¸åž‹åº”ç”¨åœºæ™¯" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/begun-blog/code/java/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html#_7-zookeeperçš„å‡ ä¸ªå…¸åž‹åº”ç”¨åœºæ™¯"><!---->7. Zookeeperçš„å‡ ä¸ªå…¸åž‹åº”ç”¨åœºæ™¯<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="7.1. é€‰ä¸»" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/begun-blog/code/java/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html#_7-1-é€‰ä¸»"><!---->7.1. é€‰ä¸»<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="7.2. åˆ†å¸ƒå¼é”" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/begun-blog/code/java/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html#_7-2-åˆ†å¸ƒå¼é”"><!---->7.2. åˆ†å¸ƒå¼é”<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="7.3. å‘½åæœåŠ¡" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/begun-blog/code/java/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html#_7-3-å‘½åæœåŠ¡"><!---->7.3. å‘½åæœåŠ¡<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="7.4. é›†ç¾¤ç®¡ç†å’Œæ³¨å†Œä¸­å¿ƒ" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/begun-blog/code/java/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html#_7-4-é›†ç¾¤ç®¡ç†å’Œæ³¨å†Œä¸­å¿ƒ"><!---->7.4. é›†ç¾¤ç®¡ç†å’Œæ³¨å†Œä¸­å¿ƒ<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="8. æ€»ç»“" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/begun-blog/code/java/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html#_8-æ€»ç»“"><!---->8. æ€»ç»“<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul><!--]--></li><li><!--[--><a aria-label="ZooKeeper å®žæˆ˜" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/begun-blog/code/java/distributed-system/distributed-process-coordination/zookeeper/zookeeper-in-action.html"><span class="font-icon icon iconfont icon-ZooKeeper" style=""></span>ZooKeeper å®žæˆ˜<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><!----><span class="vp-sidebar-title">åˆ†å¸ƒå¼ç¼“å­˜</span><span class="vp-arrow end"></span></button><!----></section></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-template" style=""></span><span class="vp-sidebar-title">é«˜æ€§èƒ½</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-guide" style=""></span><span class="vp-sidebar-title">é«˜å¯ç”¨</span><span class="vp-arrow end"></span></button><!----></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!--[--><!----><!--]--><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><span class="font-icon icon iconfont icon-ZooKeeper" style=""></span>ZooKeeper å®žæˆ˜</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ðŸ–Š" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://began-zhao.github.io/" target="_blank" rel="noopener noreferrer">å’–é£ž</a></span><span property="author" content="å’–é£ž"></span></span><!----><span class="page-date-info" aria-label="å†™ä½œæ—¥æœŸðŸ“…" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2020-11-28T00:00:00.000Z"></span><span class="page-pageview-info" aria-label="è®¿é—®é‡ðŸ”¢" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon eye-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="eye icon"><path d="M992 512.096c0-5.76-.992-10.592-1.28-11.136-.192-2.88-1.152-8.064-2.08-10.816-.256-.672-.544-1.376-.832-2.08-.48-1.568-1.024-3.104-1.6-4.32C897.664 290.112 707.104 160 512 160c-195.072 0-385.632 130.016-473.76 322.592-1.056 2.112-1.792 4.096-2.272 5.856a55.512 55.512 0 00-.64 1.6c-1.76 5.088-1.792 8.64-1.632 7.744-.832 3.744-1.568 11.168-1.568 11.168-.224 2.272-.224 4.032.032 6.304 0 0 .736 6.464 1.088 7.808.128 1.824.576 4.512 1.12 6.976h-.032c.448 2.08 1.12 4.096 1.984 6.08.48 1.536.992 2.976 1.472 4.032C126.432 733.856 316.992 864 512 864c195.136 0 385.696-130.048 473.216-321.696 1.376-2.496 2.24-4.832 2.848-6.912.256-.608.48-1.184.672-1.728 1.536-4.48 1.856-8.32 1.728-8.32l-.032.032c.608-3.104 1.568-7.744 1.568-13.28zM512 672c-88.224 0-160-71.776-160-160s71.776-160 160-160 160 71.776 160 160-71.776 160-160 160z"></path></svg><span id="ArtalkPV" class="waline-pageview-count" data-path="/code/java/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.html">...</span></span><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 34 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT34M"></span><!----><!----></div><hr></div><div class="toc-place-holder"><aside id="toc"><!--[--><!----><!--]--><div class="toc-header">æ­¤é¡µå†…å®¹<button type="button" class="print-button" title="æ‰“å°"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#_1-å¥½ä¹…ä¸è§">1. å¥½ä¹…ä¸è§</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#_2-ä»€ä¹ˆæ˜¯zookeeper">2. ä»€ä¹ˆæ˜¯ZooKeeper</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#_3-ä¸€è‡´æ€§é—®é¢˜">3. ä¸€è‡´æ€§é—®é¢˜</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#_4-ä¸€è‡´æ€§åè®®å’Œç®—æ³•">4. ä¸€è‡´æ€§åè®®å’Œç®—æ³•</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_4-1-2pc-ä¸¤é˜¶æ®µæäº¤">4.1. 2PCï¼ˆä¸¤é˜¶æ®µæäº¤ï¼‰</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_4-2-3pc-ä¸‰é˜¶æ®µæäº¤">4.2. 3PCï¼ˆä¸‰é˜¶æ®µæäº¤ï¼‰</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_4-3-paxos-ç®—æ³•">4.3. Paxos ç®—æ³•</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#_5-å¼•å‡º-zab">5. å¼•å‡º ZAB</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_5-1-zookeeper-æž¶æž„">5.1. Zookeeper æž¶æž„</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_5-2-zab-ä¸­çš„ä¸‰ä¸ªè§’è‰²">5.2. ZAB ä¸­çš„ä¸‰ä¸ªè§’è‰²</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_5-3-æ¶ˆæ¯å¹¿æ’­æ¨¡å¼">5.3. æ¶ˆæ¯å¹¿æ’­æ¨¡å¼</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_5-4-å´©æºƒæ¢å¤æ¨¡å¼">5.4. å´©æºƒæ¢å¤æ¨¡å¼</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#_6-zookeeperçš„å‡ ä¸ªç†è®ºçŸ¥è¯†">6. Zookeeperçš„å‡ ä¸ªç†è®ºçŸ¥è¯†</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_6-1-æ•°æ®æ¨¡åž‹">6.1. æ•°æ®æ¨¡åž‹</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_6-2-ä¼šè¯">6.2. ä¼šè¯</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_6-3-acl">6.3. ACL</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_6-4-watcheræœºåˆ¶">6.4. Watcheræœºåˆ¶</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#_7-zookeeperçš„å‡ ä¸ªå…¸åž‹åº”ç”¨åœºæ™¯">7. Zookeeperçš„å‡ ä¸ªå…¸åž‹åº”ç”¨åœºæ™¯</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_7-1-é€‰ä¸»">7.1. é€‰ä¸»</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_7-2-åˆ†å¸ƒå¼é”">7.2. åˆ†å¸ƒå¼é”</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_7-3-å‘½åæœåŠ¡">7.3. å‘½åæœåŠ¡</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_7-4-é›†ç¾¤ç®¡ç†å’Œæ³¨å†Œä¸­å¿ƒ">7.4. é›†ç¾¤ç®¡ç†å’Œæ³¨å†Œä¸­å¿ƒ</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#_8-æ€»ç»“">8. æ€»ç»“</a></li><!----><!--]--></ul><div class="toc-marker" style="top:-1.7rem;"></div></div><!--[--><!----><!--]--></aside></div><!--[--><!----><!--]--><div class="theme-hope-content"><h1 id="zookeeper-ç›¸å…³æ¦‚å¿µæ€»ç»“-è¿›é˜¶" tabindex="-1"><a class="header-anchor" href="#zookeeper-ç›¸å…³æ¦‚å¿µæ€»ç»“-è¿›é˜¶" aria-hidden="true">#</a> ZooKeeper ç›¸å…³æ¦‚å¿µæ€»ç»“(è¿›é˜¶)</h1><blockquote><p><a href="https://juejin.im/user/5c33853851882525ea106810" target="_blank" rel="noopener noreferrer">FrancisQ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> æŠ•ç¨¿ã€‚</p></blockquote><h2 id="_1-å¥½ä¹…ä¸è§" tabindex="-1"><a class="header-anchor" href="#_1-å¥½ä¹…ä¸è§" aria-hidden="true">#</a> 1. å¥½ä¹…ä¸è§</h2><p>ç¦»ä¸Šä¸€ç¯‡æ–‡ç« çš„å‘å¸ƒä¹Ÿå¿«ä¸€ä¸ªæœˆäº†ï¼Œæƒ³æƒ³å·²ç»å¿«ä¸€ä¸ªæœˆæ²¡å†™ä¸œè¥¿äº†ï¼Œå…¶ä¸­å¯èƒ½æœ‰æœŸæœ«è€ƒè¯•ã€è¯¾ç¨‹è®¾è®¡å’Œé©¾ç…§è€ƒè¯•ï¼Œä½†è¿™éƒ½ä¸æ˜¯å€Ÿå£ï¼</p><p>ä¸€åˆ°å†¬å¤©å°±æ‡’çš„ä¸è¡Œï¼Œæœ›å¹¿å¤§æŽ˜å‹ç£ä¿ƒæˆ‘ðŸ™„ðŸ™„âœï¸âœï¸ã€‚</p><blockquote><p>æ–‡ç« å¾ˆé•¿ï¼Œå…ˆèµžåŽçœ‹ï¼Œå…»æˆä¹ æƒ¯ã€‚â¤ï¸ ðŸ§¡ ðŸ’› ðŸ’š ðŸ’™ ðŸ’œ</p></blockquote><h2 id="_2-ä»€ä¹ˆæ˜¯zookeeper" tabindex="-1"><a class="header-anchor" href="#_2-ä»€ä¹ˆæ˜¯zookeeper" aria-hidden="true">#</a> 2. ä»€ä¹ˆæ˜¯ZooKeeper</h2><p><code>ZooKeeper</code> ç”± <code>Yahoo</code> å¼€å‘ï¼ŒåŽæ¥æèµ ç»™äº† <code>Apache</code> ï¼ŒçŽ°å·²æˆä¸º <code>Apache</code> é¡¶çº§é¡¹ç›®ã€‚<code>ZooKeeper</code> æ˜¯ä¸€ä¸ªå¼€æºçš„åˆ†å¸ƒå¼åº”ç”¨ç¨‹åºåè°ƒæœåŠ¡å™¨ï¼Œå…¶ä¸ºåˆ†å¸ƒå¼ç³»ç»Ÿæä¾›ä¸€è‡´æ€§æœåŠ¡ã€‚å…¶ä¸€è‡´æ€§æ˜¯é€šè¿‡åŸºäºŽ <code>Paxos</code> ç®—æ³•çš„ <code>ZAB</code> åè®®å®Œæˆçš„ã€‚å…¶ä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼šé…ç½®ç»´æŠ¤ã€åˆ†å¸ƒå¼åŒæ­¥ã€é›†ç¾¤ç®¡ç†ã€åˆ†å¸ƒå¼äº‹åŠ¡ç­‰ã€‚</p><figure><img src="https://img-blog.csdnimg.cn/img_convert/7c349891b773671514a68f057b2e14f8.png" alt="zookeeper" tabindex="0" loading="lazy"><figcaption>zookeeper</figcaption></figure><p>ç®€å•æ¥è¯´ï¼Œ <code>ZooKeeper</code> æ˜¯ä¸€ä¸ª <strong>åˆ†å¸ƒå¼åè°ƒæœåŠ¡æ¡†æž¶</strong> ã€‚åˆ†å¸ƒå¼ï¼Ÿåè°ƒæœåŠ¡ï¼Ÿè¿™å•¥çŽ©æ„ï¼ŸðŸ¤”ðŸ¤”</p><p>å…¶å®žè§£é‡Šåˆ°åˆ†å¸ƒå¼è¿™ä¸ªæ¦‚å¿µçš„æ—¶å€™ï¼Œæˆ‘å‘çŽ°æœ‰äº›åŒå­¦å¹¶ä¸æ˜¯èƒ½æŠŠ **åˆ†å¸ƒå¼å’Œé›†ç¾¤ **è¿™ä¸¤ä¸ªæ¦‚å¿µå¾ˆå¥½çš„ç†è§£é€ã€‚å‰æ®µæ—¶é—´æœ‰åŒå­¦å’Œæˆ‘æŽ¢è®¨èµ·åˆ†å¸ƒå¼çš„ä¸œè¥¿ï¼Œä»–è¯´åˆ†å¸ƒå¼ä¸å°±æ˜¯åŠ æœºå™¨å—ï¼Ÿä¸€å°æœºå™¨ä¸å¤Ÿç”¨å†åŠ ä¸€å°æŠ—åŽ‹å‘—ã€‚å½“ç„¶åŠ æœºå™¨è¿™ç§è¯´æ³•ä¹Ÿæ— å¯åŽšéžï¼Œä½ ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿå¿…å®šæ¶‰åŠåˆ°å¤šä¸ªæœºå™¨ï¼Œä½†æ˜¯ä½ åˆ«å¿˜äº†ï¼Œè®¡ç®—æœºå­¦ç§‘ä¸­è¿˜æœ‰ä¸€ä¸ªç›¸ä¼¼çš„æ¦‚å¿µâ€”â€” <code>Cluster</code> ï¼Œé›†ç¾¤ä¸ä¹Ÿæ˜¯åŠ æœºå™¨å—ï¼Ÿä½†æ˜¯ é›†ç¾¤ å’Œ åˆ†å¸ƒå¼ å…¶å®žå°±æ˜¯ä¸¤ä¸ªå®Œå…¨ä¸åŒçš„æ¦‚å¿µã€‚</p><p>æ¯”å¦‚ï¼Œæˆ‘çŽ°åœ¨æœ‰ä¸€ä¸ªç§’æ€æœåŠ¡ï¼Œå¹¶å‘é‡å¤ªå¤§å•æœºç³»ç»Ÿæ‰¿å—ä¸ä½ï¼Œé‚£æˆ‘åŠ å‡ å°æœåŠ¡å™¨ä¹Ÿ <strong>ä¸€æ ·</strong> æä¾›ç§’æ€æœåŠ¡ï¼Œè¿™ä¸ªæ—¶å€™å°±æ˜¯ <strong><code>Cluster</code> é›†ç¾¤</strong> ã€‚</p><figure><img src="https://img-blog.csdnimg.cn/img_convert/ffcb080eb66f242ffcd8d2047a7f46aa.png" alt="cluster" tabindex="0" loading="lazy"><figcaption>cluster</figcaption></figure><p>ä½†æ˜¯ï¼Œæˆ‘çŽ°åœ¨æ¢ä¸€ç§æ–¹å¼ï¼Œæˆ‘å°†ä¸€ä¸ªç§’æ€æœåŠ¡ <strong>æ‹†åˆ†æˆå¤šä¸ªå­æœåŠ¡</strong> ï¼Œæ¯”å¦‚åˆ›å»ºè®¢å•æœåŠ¡ï¼Œå¢žåŠ ç§¯åˆ†æœåŠ¡ï¼Œæ‰£ä¼˜æƒ åˆ¸æœåŠ¡ç­‰ç­‰ï¼Œ<strong>ç„¶åŽæˆ‘å°†è¿™äº›å­æœåŠ¡éƒ½éƒ¨ç½²åœ¨ä¸åŒçš„æœåŠ¡å™¨ä¸Š</strong> ï¼Œè¿™ä¸ªæ—¶å€™å°±æ˜¯ <strong><code>Distributed</code> åˆ†å¸ƒå¼</strong> ã€‚</p><figure><img src="https://img-blog.csdnimg.cn/img_convert/07191f38aa947b0075e5c0a6a019a11d.png" alt="distributed" tabindex="0" loading="lazy"><figcaption>distributed</figcaption></figure><p>è€Œæˆ‘ä¸ºä»€ä¹ˆåé©³åŒå­¦æ‰€è¯´çš„åˆ†å¸ƒå¼å°±æ˜¯åŠ æœºå™¨å‘¢ï¼Ÿå› ä¸ºæˆ‘è®¤ä¸ºåŠ æœºå™¨æ›´åŠ é€‚ç”¨äºŽæž„å»ºé›†ç¾¤ï¼Œå› ä¸ºå®ƒçœŸæ˜¯åªæœ‰åŠ æœºå™¨ã€‚è€Œå¯¹äºŽåˆ†å¸ƒå¼æ¥è¯´ï¼Œä½ é¦–å…ˆéœ€è¦å°†ä¸šåŠ¡è¿›è¡Œæ‹†åˆ†ï¼Œç„¶åŽå†åŠ æœºå™¨ï¼ˆä¸ä»…ä»…æ˜¯åŠ æœºå™¨é‚£ä¹ˆç®€å•ï¼‰ï¼ŒåŒæ—¶ä½ è¿˜è¦åŽ»è§£å†³åˆ†å¸ƒå¼å¸¦æ¥çš„ä¸€ç³»åˆ—é—®é¢˜ã€‚</p><figure><img src="https://img-blog.csdnimg.cn/img_convert/2b2fbc21abfb3f6547a2121f28c6d00f.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>æ¯”å¦‚å„ä¸ªåˆ†å¸ƒå¼ç»„ä»¶å¦‚ä½•åè°ƒèµ·æ¥ï¼Œå¦‚ä½•å‡å°‘å„ä¸ªç³»ç»Ÿä¹‹é—´çš„è€¦åˆåº¦ï¼Œåˆ†å¸ƒå¼äº‹åŠ¡çš„å¤„ç†ï¼Œå¦‚ä½•åŽ»é…ç½®æ•´ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿç­‰ç­‰ã€‚<code>ZooKeeper</code> ä¸»è¦å°±æ˜¯è§£å†³è¿™äº›é—®é¢˜çš„ã€‚</p><h2 id="_3-ä¸€è‡´æ€§é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#_3-ä¸€è‡´æ€§é—®é¢˜" aria-hidden="true">#</a> 3. ä¸€è‡´æ€§é—®é¢˜</h2><p>è®¾è®¡ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿå¿…å®šä¼šé‡åˆ°ä¸€ä¸ªé—®é¢˜â€”â€” <strong>å› ä¸ºåˆ†åŒºå®¹å¿æ€§ï¼ˆpartition toleranceï¼‰çš„å­˜åœ¨ï¼Œå°±å¿…å®šè¦æ±‚æˆ‘ä»¬éœ€è¦åœ¨ç³»ç»Ÿå¯ç”¨æ€§ï¼ˆavailabilityï¼‰å’Œæ•°æ®ä¸€è‡´æ€§ï¼ˆconsistencyï¼‰ä¸­åšå‡ºæƒè¡¡</strong> ã€‚è¿™å°±æ˜¯è‘—åçš„ <code>CAP</code> å®šç†ã€‚</p><p>ç†è§£èµ·æ¥å…¶å®žå¾ˆç®€å•ï¼Œæ¯”å¦‚è¯´æŠŠä¸€ä¸ªç­çº§ä½œä¸ºæ•´ä¸ªç³»ç»Ÿï¼Œè€Œå­¦ç”Ÿæ˜¯ç³»ç»Ÿä¸­çš„ä¸€ä¸ªä¸ªç‹¬ç«‹çš„å­ç³»ç»Ÿã€‚è¿™ä¸ªæ—¶å€™ç­é‡Œçš„å°çº¢å°æ˜Žå·å·è°ˆæ‹çˆ±è¢«ç­é‡Œçš„å¤§å˜´å·´å°èŠ±å‘çŽ°äº†ï¼Œå°èŠ±æ¬£å–œè‹¥ç‹‚å‘Šè¯‰äº†å‘¨å›´çš„äººï¼Œç„¶åŽå°çº¢å°æ˜Žè°ˆæ‹çˆ±çš„æ¶ˆæ¯åœ¨ç­çº§é‡Œä¼ æ’­èµ·æ¥äº†ã€‚å½“åœ¨æ¶ˆæ¯çš„ä¼ æ’­ï¼ˆæ•£å¸ƒï¼‰è¿‡ç¨‹ä¸­ï¼Œä½ æŠ“åˆ°ä¸€ä¸ªåŒå­¦é—®ä»–ä»¬çš„æƒ…å†µï¼Œå¦‚æžœå›žç­”ä½ ä¸çŸ¥é“ï¼Œé‚£ä¹ˆè¯´æ˜Žæ•´ä¸ªç­çº§ç³»ç»Ÿå‡ºçŽ°äº†æ•°æ®ä¸ä¸€è‡´çš„é—®é¢˜ï¼ˆå› ä¸ºå°èŠ±å·²ç»çŸ¥é“è¿™ä¸ªæ¶ˆæ¯äº†ï¼‰ã€‚è€Œå¦‚æžœä»–ç›´æŽ¥ä¸å›žç­”ä½ ï¼Œå› ä¸ºæ•´ä¸ªç­çº§æœ‰æ¶ˆæ¯åœ¨è¿›è¡Œä¼ æ’­ï¼ˆä¸ºäº†ä¿è¯ä¸€è‡´æ€§ï¼Œéœ€è¦æ‰€æœ‰äººéƒ½çŸ¥é“æ‰å¯æä¾›æœåŠ¡ï¼‰ï¼Œè¿™ä¸ªæ—¶å€™å°±å‡ºçŽ°äº†ç³»ç»Ÿçš„å¯ç”¨æ€§é—®é¢˜ã€‚</p><figure><img src="https://img-blog.csdnimg.cn/img_convert/34ffff41f6ca4f221ca9d9ad6f0b5470.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>è€Œä¸Šè¿°å‰è€…å°±æ˜¯ <code>Eureka</code> çš„å¤„ç†æ–¹å¼ï¼Œå®ƒä¿è¯äº†APï¼ˆå¯ç”¨æ€§ï¼‰ï¼ŒåŽè€…å°±æ˜¯æˆ‘ä»¬ä»Šå¤©æ‰€è¦è®²çš„ <code>ZooKeeper</code> çš„å¤„ç†æ–¹å¼ï¼Œå®ƒä¿è¯äº†CPï¼ˆæ•°æ®ä¸€è‡´æ€§ï¼‰ã€‚</p><h2 id="_4-ä¸€è‡´æ€§åè®®å’Œç®—æ³•" tabindex="-1"><a class="header-anchor" href="#_4-ä¸€è‡´æ€§åè®®å’Œç®—æ³•" aria-hidden="true">#</a> 4. ä¸€è‡´æ€§åè®®å’Œç®—æ³•</h2><p>è€Œä¸ºäº†è§£å†³æ•°æ®ä¸€è‡´æ€§é—®é¢˜ï¼Œåœ¨ç§‘å­¦å®¶å’Œç¨‹åºå‘˜çš„ä¸æ–­æŽ¢ç´¢ä¸­ï¼Œå°±å‡ºçŽ°äº†å¾ˆå¤šçš„ä¸€è‡´æ€§åè®®å’Œç®—æ³•ã€‚æ¯”å¦‚ 2PCï¼ˆä¸¤é˜¶æ®µæäº¤ï¼‰ï¼Œ3PCï¼ˆä¸‰é˜¶æ®µæäº¤ï¼‰ï¼ŒPaxosç®—æ³•ç­‰ç­‰ã€‚</p><p>è¿™æ—¶å€™è¯·ä½ æ€è€ƒä¸€ä¸ªé—®é¢˜ï¼ŒåŒå­¦ä¹‹é—´å¦‚æžœé‡‡ç”¨ä¼ çº¸æ¡çš„æ–¹å¼åŽ»ä¼ æ’­æ¶ˆæ¯ï¼Œé‚£ä¹ˆå°±ä¼šå‡ºçŽ°ä¸€ä¸ªé—®é¢˜â€”â€”æˆ‘å’‹çŸ¥é“æˆ‘çš„å°çº¸æ¡æœ‰æ²¡æœ‰ä¼ åˆ°æˆ‘æƒ³è¦ä¼ é€’çš„é‚£ä¸ªäººæ‰‹ä¸­å‘¢ï¼Ÿä¸‡ä¸€è¢«å“ªä¸ªå°å®¶ä¼™ç»™åŠ«æŒç¯¡æ”¹äº†å‘¢ï¼Œå¯¹å§ï¼Ÿ</p><figure><img src="https://img-blog.csdnimg.cn/img_convert/b0e01fe3213dcc1535c31298ba9bdfbc.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>è¿™ä¸ªæ—¶å€™å°±å¼•ç”³å‡ºä¸€ä¸ªæ¦‚å¿µâ€”â€” <strong>æ‹œå åº­å°†å†›é—®é¢˜</strong> ã€‚å®ƒæ„æŒ‡ <strong>åœ¨ä¸å¯é ä¿¡é“ä¸Šè¯•å›¾é€šè¿‡æ¶ˆæ¯ä¼ é€’çš„æ–¹å¼è¾¾åˆ°ä¸€è‡´æ€§æ˜¯ä¸å¯èƒ½çš„</strong>ï¼Œ æ‰€ä»¥æ‰€æœ‰çš„ä¸€è‡´æ€§ç®—æ³•çš„ <strong>å¿…è¦å‰æ</strong> å°±æ˜¯å®‰å…¨å¯é çš„æ¶ˆæ¯é€šé“ã€‚</p><p>è€Œä¸ºä»€ä¹ˆè¦åŽ»è§£å†³æ•°æ®ä¸€è‡´æ€§çš„é—®é¢˜ï¼Ÿä½ æƒ³æƒ³ï¼Œå¦‚æžœä¸€ä¸ªç§’æ€ç³»ç»Ÿå°†æœåŠ¡æ‹†åˆ†æˆäº†ä¸‹è®¢å•å’ŒåŠ ç§¯åˆ†æœåŠ¡ï¼Œè¿™ä¸¤ä¸ªæœåŠ¡éƒ¨ç½²åœ¨ä¸åŒçš„æœºå™¨ä¸Šäº†ï¼Œä¸‡ä¸€åœ¨æ¶ˆæ¯çš„ä¼ æ’­è¿‡ç¨‹ä¸­ç§¯åˆ†ç³»ç»Ÿå®•æœºäº†ï¼Œæ€»ä¸èƒ½ä½ è¿™è¾¹ä¸‹äº†è®¢å•å´æ²¡åŠ ç§¯åˆ†å§ï¼Ÿä½ æ€»å¾—ä¿è¯ä¸¤è¾¹çš„æ•°æ®éœ€è¦ä¸€è‡´å§ï¼Ÿ</p><h3 id="_4-1-2pc-ä¸¤é˜¶æ®µæäº¤" tabindex="-1"><a class="header-anchor" href="#_4-1-2pc-ä¸¤é˜¶æ®µæäº¤" aria-hidden="true">#</a> 4.1. 2PCï¼ˆä¸¤é˜¶æ®µæäº¤ï¼‰</h3><p>ä¸¤é˜¶æ®µæäº¤æ˜¯ä¸€ç§ä¿è¯åˆ†å¸ƒå¼ç³»ç»Ÿæ•°æ®ä¸€è‡´æ€§çš„åè®®ï¼ŒçŽ°åœ¨å¾ˆå¤šæ•°æ®åº“éƒ½æ˜¯é‡‡ç”¨çš„ä¸¤é˜¶æ®µæäº¤åè®®æ¥å®Œæˆ <strong>åˆ†å¸ƒå¼äº‹åŠ¡</strong> çš„å¤„ç†ã€‚</p><p>åœ¨ä»‹ç»2PCä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥æƒ³æƒ³åˆ†å¸ƒå¼äº‹åŠ¡åˆ°åº•æœ‰ä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿ</p><p>è¿˜æ‹¿ç§’æ€ç³»ç»Ÿçš„ä¸‹è®¢å•å’ŒåŠ ç§¯åˆ†ä¸¤ä¸ªç³»ç»Ÿæ¥ä¸¾ä¾‹å§ï¼ˆæˆ‘æƒ³ä½ ä»¬å¯èƒ½éƒ½åäº†ðŸ¤®ðŸ¤®ðŸ¤®ï¼‰ï¼Œæˆ‘ä»¬æ­¤æ—¶ä¸‹å®Œè®¢å•ä¼šå‘ä¸ªæ¶ˆæ¯ç»™ç§¯åˆ†ç³»ç»Ÿå‘Šè¯‰å®ƒä¸‹é¢è¯¥å¢žåŠ ç§¯åˆ†äº†ã€‚å¦‚æžœæˆ‘ä»¬ä»…ä»…æ˜¯å‘é€ä¸€ä¸ªæ¶ˆæ¯ä¹Ÿä¸æ”¶å›žå¤ï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„è®¢å•ç³»ç»Ÿæ€Žä¹ˆèƒ½çŸ¥é“ç§¯åˆ†ç³»ç»Ÿçš„æ”¶åˆ°æ¶ˆæ¯çš„æƒ…å†µå‘¢ï¼Ÿå¦‚æžœæˆ‘ä»¬å¢žåŠ ä¸€ä¸ªæ”¶å›žå¤çš„è¿‡ç¨‹ï¼Œé‚£ä¹ˆå½“ç§¯åˆ†ç³»ç»Ÿæ”¶åˆ°æ¶ˆæ¯åŽè¿”å›žç»™è®¢å•ç³»ç»Ÿä¸€ä¸ª <code>Response</code> ï¼Œä½†åœ¨ä¸­é—´å‡ºçŽ°äº†ç½‘ç»œæ³¢åŠ¨ï¼Œé‚£ä¸ªå›žå¤æ¶ˆæ¯æ²¡æœ‰å‘é€æˆåŠŸï¼Œè®¢å•ç³»ç»Ÿæ˜¯ä¸æ˜¯ä»¥ä¸ºç§¯åˆ†ç³»ç»Ÿæ¶ˆæ¯æŽ¥æ”¶å¤±è´¥äº†ï¼Ÿå®ƒæ˜¯ä¸æ˜¯ä¼šå›žæ»šäº‹åŠ¡ï¼Ÿä½†æ­¤æ—¶ç§¯åˆ†ç³»ç»Ÿæ˜¯æˆåŠŸæ”¶åˆ°æ¶ˆæ¯çš„ï¼Œå®ƒå°±ä¼šåŽ»å¤„ç†æ¶ˆæ¯ç„¶åŽç»™ç”¨æˆ·å¢žåŠ ç§¯åˆ†ï¼Œè¿™ä¸ªæ—¶å€™å°±ä¼šå‡ºçŽ°ç§¯åˆ†åŠ äº†ä½†æ˜¯è®¢å•æ²¡ä¸‹æˆåŠŸã€‚</p><p>æ‰€ä»¥æˆ‘ä»¬æ‰€éœ€è¦è§£å†³çš„æ˜¯åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œæ•´ä¸ªè°ƒç”¨é“¾ä¸­ï¼Œæˆ‘ä»¬æ‰€æœ‰æœåŠ¡çš„æ•°æ®å¤„ç†è¦ä¹ˆéƒ½æˆåŠŸè¦ä¹ˆéƒ½å¤±è´¥ï¼Œå³æ‰€æœ‰æœåŠ¡çš„ <strong>åŽŸå­æ€§é—®é¢˜</strong> ã€‚</p><p>åœ¨ä¸¤é˜¶æ®µæäº¤ä¸­ï¼Œä¸»è¦æ¶‰åŠåˆ°ä¸¤ä¸ªè§’è‰²ï¼Œåˆ†åˆ«æ˜¯åè°ƒè€…å’Œå‚ä¸Žè€…ã€‚</p><p>ç¬¬ä¸€é˜¶æ®µï¼šå½“è¦æ‰§è¡Œä¸€ä¸ªåˆ†å¸ƒå¼äº‹åŠ¡çš„æ—¶å€™ï¼Œäº‹åŠ¡å‘èµ·è€…é¦–å…ˆå‘åè°ƒè€…å‘èµ·äº‹åŠ¡è¯·æ±‚ï¼Œç„¶åŽåè°ƒè€…ä¼šç»™æ‰€æœ‰å‚ä¸Žè€…å‘é€ <code>prepare</code> è¯·æ±‚ï¼ˆå…¶ä¸­åŒ…æ‹¬äº‹åŠ¡å†…å®¹ï¼‰å‘Šè¯‰å‚ä¸Žè€…ä½ ä»¬éœ€è¦æ‰§è¡Œäº‹åŠ¡äº†ï¼Œå¦‚æžœèƒ½æ‰§è¡Œæˆ‘å‘çš„äº‹åŠ¡å†…å®¹é‚£ä¹ˆå°±å…ˆæ‰§è¡Œä½†ä¸æäº¤ï¼Œæ‰§è¡ŒåŽè¯·ç»™æˆ‘å›žå¤ã€‚ç„¶åŽå‚ä¸Žè€…æ”¶åˆ° <code>prepare</code> æ¶ˆæ¯åŽï¼Œä»–ä»¬ä¼šå¼€å§‹æ‰§è¡Œäº‹åŠ¡ï¼ˆä½†ä¸æäº¤ï¼‰ï¼Œå¹¶å°† <code>Undo</code> å’Œ <code>Redo</code> ä¿¡æ¯è®°å…¥äº‹åŠ¡æ—¥å¿—ä¸­ï¼Œä¹‹åŽå‚ä¸Žè€…å°±å‘åè°ƒè€…åé¦ˆæ˜¯å¦å‡†å¤‡å¥½äº†ã€‚</p><p>ç¬¬äºŒé˜¶æ®µï¼šç¬¬äºŒé˜¶æ®µä¸»è¦æ˜¯åè°ƒè€…æ ¹æ®å‚ä¸Žè€…åé¦ˆçš„æƒ…å†µæ¥å†³å®šæŽ¥ä¸‹æ¥æ˜¯å¦å¯ä»¥è¿›è¡Œäº‹åŠ¡çš„æäº¤æ“ä½œï¼Œå³æäº¤äº‹åŠ¡æˆ–è€…å›žæ»šäº‹åŠ¡ã€‚</p><p>æ¯”å¦‚è¿™ä¸ªæ—¶å€™ <strong>æ‰€æœ‰çš„å‚ä¸Žè€…</strong> éƒ½è¿”å›žäº†å‡†å¤‡å¥½äº†çš„æ¶ˆæ¯ï¼Œè¿™ä¸ªæ—¶å€™å°±è¿›è¡Œäº‹åŠ¡çš„æäº¤ï¼Œåè°ƒè€…æ­¤æ—¶ä¼šç»™æ‰€æœ‰çš„å‚ä¸Žè€…å‘é€ <strong><code>Commit</code> è¯·æ±‚</strong> ï¼Œå½“å‚ä¸Žè€…æ”¶åˆ° <code>Commit</code> è¯·æ±‚çš„æ—¶å€™ä¼šæ‰§è¡Œå‰é¢æ‰§è¡Œçš„äº‹åŠ¡çš„ <strong>æäº¤æ“ä½œ</strong> ï¼Œæäº¤å®Œæ¯•ä¹‹åŽå°†ç»™åè°ƒè€…å‘é€æäº¤æˆåŠŸçš„å“åº”ã€‚</p><p>è€Œå¦‚æžœåœ¨ç¬¬ä¸€é˜¶æ®µå¹¶ä¸æ˜¯æ‰€æœ‰å‚ä¸Žè€…éƒ½è¿”å›žäº†å‡†å¤‡å¥½äº†çš„æ¶ˆæ¯ï¼Œé‚£ä¹ˆæ­¤æ—¶åè°ƒè€…å°†ä¼šç»™æ‰€æœ‰å‚ä¸Žè€…å‘é€ <strong>å›žæ»šäº‹åŠ¡çš„ <code>rollback</code> è¯·æ±‚</strong>ï¼Œå‚ä¸Žè€…æ”¶åˆ°ä¹‹åŽå°†ä¼š <strong>å›žæ»šå®ƒåœ¨ç¬¬ä¸€é˜¶æ®µæ‰€åšçš„äº‹åŠ¡å¤„ç†</strong> ï¼Œç„¶åŽå†å°†å¤„ç†æƒ…å†µè¿”å›žç»™åè°ƒè€…ï¼Œæœ€ç»ˆåè°ƒè€…æ”¶åˆ°å“åº”åŽä¾¿ç»™äº‹åŠ¡å‘èµ·è€…è¿”å›žå¤„ç†å¤±è´¥çš„ç»“æžœã€‚</p><figure><img src="https://img-blog.csdnimg.cn/img_convert/7ce4e40b68d625676bb42c29efce046a.png" alt="2PCæµç¨‹" tabindex="0" loading="lazy"><figcaption>2PCæµç¨‹</figcaption></figure><p>ä¸ªäººè§‰å¾— 2PC å®žçŽ°å¾—è¿˜æ˜¯æ¯”è¾ƒé¸¡è‚‹çš„ï¼Œå› ä¸ºäº‹å®žä¸Šå®ƒåªè§£å†³äº†å„ä¸ªäº‹åŠ¡çš„åŽŸå­æ€§é—®é¢˜ï¼Œéšä¹‹ä¹Ÿå¸¦æ¥äº†å¾ˆå¤šçš„é—®é¢˜ã€‚</p><figure><img src="https://img-blog.csdnimg.cn/img_convert/9af1ad68517561a8e9f5d3455a32132d.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><ul><li><strong>å•ç‚¹æ•…éšœé—®é¢˜</strong>ï¼Œå¦‚æžœåè°ƒè€…æŒ‚äº†é‚£ä¹ˆæ•´ä¸ªç³»ç»Ÿéƒ½å¤„äºŽä¸å¯ç”¨çš„çŠ¶æ€äº†ã€‚</li><li><strong>é˜»å¡žé—®é¢˜</strong>ï¼Œå³å½“åè°ƒè€…å‘é€ <code>prepare</code> è¯·æ±‚ï¼Œå‚ä¸Žè€…æ”¶åˆ°ä¹‹åŽå¦‚æžœèƒ½å¤„ç†é‚£ä¹ˆå®ƒå°†ä¼šè¿›è¡Œäº‹åŠ¡çš„å¤„ç†ä½†å¹¶ä¸æäº¤ï¼Œè¿™ä¸ªæ—¶å€™ä¼šä¸€ç›´å ç”¨ç€èµ„æºä¸é‡Šæ”¾ï¼Œå¦‚æžœæ­¤æ—¶åè°ƒè€…æŒ‚äº†ï¼Œé‚£ä¹ˆè¿™äº›èµ„æºéƒ½ä¸ä¼šå†é‡Šæ”¾äº†ï¼Œè¿™ä¼šæžå¤§å½±å“æ€§èƒ½ã€‚</li><li><strong>æ•°æ®ä¸ä¸€è‡´é—®é¢˜</strong>ï¼Œæ¯”å¦‚å½“ç¬¬äºŒé˜¶æ®µï¼Œåè°ƒè€…åªå‘é€äº†ä¸€éƒ¨åˆ†çš„ <code>commit</code> è¯·æ±‚å°±æŒ‚äº†ï¼Œé‚£ä¹ˆä¹Ÿå°±æ„å‘³ç€ï¼Œæ”¶åˆ°æ¶ˆæ¯çš„å‚ä¸Žè€…ä¼šè¿›è¡Œäº‹åŠ¡çš„æäº¤ï¼Œè€ŒåŽé¢æ²¡æ”¶åˆ°çš„åˆ™ä¸ä¼šè¿›è¡Œäº‹åŠ¡æäº¤ï¼Œé‚£ä¹ˆè¿™æ—¶å€™å°±ä¼šäº§ç”Ÿæ•°æ®ä¸ä¸€è‡´æ€§é—®é¢˜ã€‚</li></ul><h3 id="_4-2-3pc-ä¸‰é˜¶æ®µæäº¤" tabindex="-1"><a class="header-anchor" href="#_4-2-3pc-ä¸‰é˜¶æ®µæäº¤" aria-hidden="true">#</a> 4.2. 3PCï¼ˆä¸‰é˜¶æ®µæäº¤ï¼‰</h3><p>å› ä¸º2PCå­˜åœ¨çš„ä¸€ç³»åˆ—é—®é¢˜ï¼Œæ¯”å¦‚å•ç‚¹ï¼Œå®¹é”™æœºåˆ¶ç¼ºé™·ç­‰ç­‰ï¼Œä»Žè€Œäº§ç”Ÿäº† <strong>3PCï¼ˆä¸‰é˜¶æ®µæäº¤ï¼‰</strong> ã€‚é‚£ä¹ˆè¿™ä¸‰é˜¶æ®µåˆåˆ†åˆ«æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p><blockquote><p>åƒä¸‡ä¸è¦å§PCç†è§£æˆä¸ªäººç”µè„‘äº†ï¼Œå…¶å®žä»–ä»¬æ˜¯ phase-commit çš„ç¼©å†™ï¼Œå³é˜¶æ®µæäº¤ã€‚</p></blockquote><ol><li><strong>CanCommité˜¶æ®µ</strong>ï¼šåè°ƒè€…å‘æ‰€æœ‰å‚ä¸Žè€…å‘é€ <code>CanCommit</code> è¯·æ±‚ï¼Œå‚ä¸Žè€…æ”¶åˆ°è¯·æ±‚åŽä¼šæ ¹æ®è‡ªèº«æƒ…å†µæŸ¥çœ‹æ˜¯å¦èƒ½æ‰§è¡Œäº‹åŠ¡ï¼Œå¦‚æžœå¯ä»¥åˆ™è¿”å›ž YES å“åº”å¹¶è¿›å…¥é¢„å¤‡çŠ¶æ€ï¼Œå¦åˆ™è¿”å›ž NO ã€‚</li><li><strong>PreCommité˜¶æ®µ</strong>ï¼šåè°ƒè€…æ ¹æ®å‚ä¸Žè€…è¿”å›žçš„å“åº”æ¥å†³å®šæ˜¯å¦å¯ä»¥è¿›è¡Œä¸‹é¢çš„ <code>PreCommit</code> æ“ä½œã€‚å¦‚æžœä¸Šé¢å‚ä¸Žè€…è¿”å›žçš„éƒ½æ˜¯ YESï¼Œé‚£ä¹ˆåè°ƒè€…å°†å‘æ‰€æœ‰å‚ä¸Žè€…å‘é€ <code>PreCommit</code> é¢„æäº¤è¯·æ±‚ï¼Œ<strong>å‚ä¸Žè€…æ”¶åˆ°é¢„æäº¤è¯·æ±‚åŽï¼Œä¼šè¿›è¡Œäº‹åŠ¡çš„æ‰§è¡Œæ“ä½œï¼Œå¹¶å°† <code>Undo</code> å’Œ <code>Redo</code> ä¿¡æ¯å†™å…¥äº‹åŠ¡æ—¥å¿—ä¸­</strong> ï¼Œæœ€åŽå¦‚æžœå‚ä¸Žè€…é¡ºåˆ©æ‰§è¡Œäº†äº‹åŠ¡åˆ™ç»™åè°ƒè€…è¿”å›žæˆåŠŸçš„å“åº”ã€‚å¦‚æžœåœ¨ç¬¬ä¸€é˜¶æ®µåè°ƒè€…æ”¶åˆ°äº† <strong>ä»»ä½•ä¸€ä¸ª NO</strong> çš„ä¿¡æ¯ï¼Œæˆ–è€… <strong>åœ¨ä¸€å®šæ—¶é—´å†…</strong> å¹¶æ²¡æœ‰æ”¶åˆ°å…¨éƒ¨çš„å‚ä¸Žè€…çš„å“åº”ï¼Œé‚£ä¹ˆå°±ä¼šä¸­æ–­äº‹åŠ¡ï¼Œå®ƒä¼šå‘æ‰€æœ‰å‚ä¸Žè€…å‘é€ä¸­æ–­è¯·æ±‚ï¼ˆabortï¼‰ï¼Œå‚ä¸Žè€…æ”¶åˆ°ä¸­æ–­è¯·æ±‚ä¹‹åŽä¼šç«‹å³ä¸­æ–­äº‹åŠ¡ï¼Œæˆ–è€…åœ¨ä¸€å®šæ—¶é—´å†…æ²¡æœ‰æ”¶åˆ°åè°ƒè€…çš„è¯·æ±‚ï¼Œå®ƒä¹Ÿä¼šä¸­æ–­äº‹åŠ¡ã€‚</li><li><strong>DoCommité˜¶æ®µ</strong>ï¼šè¿™ä¸ªé˜¶æ®µå…¶å®žå’Œ <code>2PC</code> çš„ç¬¬äºŒé˜¶æ®µå·®ä¸å¤šï¼Œå¦‚æžœåè°ƒè€…æ”¶åˆ°äº†æ‰€æœ‰å‚ä¸Žè€…åœ¨ <code>PreCommit</code> é˜¶æ®µçš„ YES å“åº”ï¼Œé‚£ä¹ˆåè°ƒè€…å°†ä¼šç»™æ‰€æœ‰å‚ä¸Žè€…å‘é€ <code>DoCommit</code> è¯·æ±‚ï¼Œ<strong>å‚ä¸Žè€…æ”¶åˆ° <code>DoCommit</code> è¯·æ±‚åŽåˆ™ä¼šè¿›è¡Œäº‹åŠ¡çš„æäº¤å·¥ä½œ</strong>ï¼Œå®ŒæˆåŽåˆ™ä¼šç»™åè°ƒè€…è¿”å›žå“åº”ï¼Œåè°ƒè€…æ”¶åˆ°æ‰€æœ‰å‚ä¸Žè€…è¿”å›žçš„äº‹åŠ¡æäº¤æˆåŠŸçš„å“åº”ä¹‹åŽåˆ™å®Œæˆäº‹åŠ¡ã€‚è‹¥åè°ƒè€…åœ¨ <code>PreCommit</code> é˜¶æ®µ <strong>æ”¶åˆ°äº†ä»»ä½•ä¸€ä¸ª NO æˆ–è€…åœ¨ä¸€å®šæ—¶é—´å†…æ²¡æœ‰æ”¶åˆ°æ‰€æœ‰å‚ä¸Žè€…çš„å“åº”</strong> ï¼Œé‚£ä¹ˆå°±ä¼šè¿›è¡Œä¸­æ–­è¯·æ±‚çš„å‘é€ï¼Œå‚ä¸Žè€…æ”¶åˆ°ä¸­æ–­è¯·æ±‚åŽåˆ™ä¼š <strong>é€šè¿‡ä¸Šé¢è®°å½•çš„å›žæ»šæ—¥å¿—</strong> æ¥è¿›è¡Œäº‹åŠ¡çš„å›žæ»šæ“ä½œï¼Œå¹¶å‘åè°ƒè€…åé¦ˆå›žæ»šçŠ¶å†µï¼Œåè°ƒè€…æ”¶åˆ°å‚ä¸Žè€…è¿”å›žçš„æ¶ˆæ¯åŽï¼Œä¸­æ–­äº‹åŠ¡ã€‚</li></ol><figure><img src="https://img-blog.csdnimg.cn/img_convert/d0b44361c746593f70a6e42c298b413a.png" alt="3PCæµç¨‹" tabindex="0" loading="lazy"><figcaption>3PCæµç¨‹</figcaption></figure><blockquote><p>è¿™é‡Œæ˜¯ <code>3PC</code> åœ¨æˆåŠŸçš„çŽ¯å¢ƒä¸‹çš„æµç¨‹å›¾ï¼Œä½ å¯ä»¥çœ‹åˆ° <code>3PC</code> åœ¨å¾ˆå¤šåœ°æ–¹è¿›è¡Œäº†è¶…æ—¶ä¸­æ–­çš„å¤„ç†ï¼Œæ¯”å¦‚åè°ƒè€…åœ¨æŒ‡å®šæ—¶é—´å†…ä¸ºæ”¶åˆ°å…¨éƒ¨çš„ç¡®è®¤æ¶ˆæ¯åˆ™è¿›è¡Œäº‹åŠ¡ä¸­æ–­çš„å¤„ç†ï¼Œè¿™æ ·èƒ½ <strong>å‡å°‘åŒæ­¥é˜»å¡žçš„æ—¶é—´</strong> ã€‚è¿˜æœ‰éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<strong><code>3PC</code> åœ¨ <code>DoCommit</code> é˜¶æ®µå‚ä¸Žè€…å¦‚æœªæ”¶åˆ°åè°ƒè€…å‘é€çš„æäº¤äº‹åŠ¡çš„è¯·æ±‚ï¼Œå®ƒä¼šåœ¨ä¸€å®šæ—¶é—´å†…è¿›è¡Œäº‹åŠ¡çš„æäº¤</strong>ã€‚ä¸ºä»€ä¹ˆè¿™ä¹ˆåšå‘¢ï¼Ÿæ˜¯å› ä¸ºè¿™ä¸ªæ—¶å€™æˆ‘ä»¬è‚¯å®š<strong>ä¿è¯äº†åœ¨ç¬¬ä¸€é˜¶æ®µæ‰€æœ‰çš„åè°ƒè€…å…¨éƒ¨è¿”å›žäº†å¯ä»¥æ‰§è¡Œäº‹åŠ¡çš„å“åº”</strong>ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬æœ‰ç†ç”±<strong>ç›¸ä¿¡å…¶ä»–ç³»ç»Ÿéƒ½èƒ½è¿›è¡Œäº‹åŠ¡çš„æ‰§è¡Œå’Œæäº¤</strong>ï¼Œæ‰€ä»¥<strong>ä¸ç®¡</strong>åè°ƒè€…æœ‰æ²¡æœ‰å‘æ¶ˆæ¯ç»™å‚ä¸Žè€…ï¼Œè¿›å…¥ç¬¬ä¸‰é˜¶æ®µå‚ä¸Žè€…éƒ½ä¼šè¿›è¡Œäº‹åŠ¡çš„æäº¤æ“ä½œã€‚</p></blockquote><p>æ€»ä¹‹ï¼Œ<code>3PC</code> é€šè¿‡ä¸€ç³»åˆ—çš„è¶…æ—¶æœºåˆ¶å¾ˆå¥½çš„ç¼“è§£äº†é˜»å¡žé—®é¢˜ï¼Œä½†æ˜¯æœ€é‡è¦çš„ä¸€è‡´æ€§å¹¶æ²¡æœ‰å¾—åˆ°æ ¹æœ¬çš„è§£å†³ï¼Œæ¯”å¦‚åœ¨ <code>PreCommit</code> é˜¶æ®µï¼Œå½“ä¸€ä¸ªå‚ä¸Žè€…æ”¶åˆ°äº†è¯·æ±‚ä¹‹åŽå…¶ä»–å‚ä¸Žè€…å’Œåè°ƒè€…æŒ‚äº†æˆ–è€…å‡ºçŽ°äº†ç½‘ç»œåˆ†åŒºï¼Œè¿™ä¸ªæ—¶å€™æ”¶åˆ°æ¶ˆæ¯çš„å‚ä¸Žè€…éƒ½ä¼šè¿›è¡Œäº‹åŠ¡æäº¤ï¼Œè¿™å°±ä¼šå‡ºçŽ°æ•°æ®ä¸ä¸€è‡´æ€§é—®é¢˜ã€‚</p><p>æ‰€ä»¥ï¼Œè¦è§£å†³ä¸€è‡´æ€§é—®é¢˜è¿˜éœ€è¦é  <code>Paxos</code> ç®—æ³•â­ï¸ â­ï¸ â­ï¸ ã€‚</p><h3 id="_4-3-paxos-ç®—æ³•" tabindex="-1"><a class="header-anchor" href="#_4-3-paxos-ç®—æ³•" aria-hidden="true">#</a> 4.3. <code>Paxos</code> ç®—æ³•</h3><p><code>Paxos</code> ç®—æ³•æ˜¯åŸºäºŽ<strong>æ¶ˆæ¯ä¼ é€’ä¸”å…·æœ‰é«˜åº¦å®¹é”™ç‰¹æ€§çš„ä¸€è‡´æ€§ç®—æ³•</strong>ï¼Œæ˜¯ç›®å‰å…¬è®¤çš„è§£å†³åˆ†å¸ƒå¼ä¸€è‡´æ€§é—®é¢˜æœ€æœ‰æ•ˆçš„ç®—æ³•ä¹‹ä¸€ï¼Œ<strong>å…¶è§£å†³çš„é—®é¢˜å°±æ˜¯åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å¦‚ä½•å°±æŸä¸ªå€¼ï¼ˆå†³è®®ï¼‰è¾¾æˆä¸€è‡´</strong> ã€‚</p><p>åœ¨ <code>Paxos</code> ä¸­ä¸»è¦æœ‰ä¸‰ä¸ªè§’è‰²ï¼Œåˆ†åˆ«ä¸º <code>Proposerææ¡ˆè€…</code>ã€<code>Acceptorè¡¨å†³è€…</code>ã€<code>Learnerå­¦ä¹ è€…</code>ã€‚<code>Paxos</code> ç®—æ³•å’Œ <code>2PC</code> ä¸€æ ·ï¼Œä¹Ÿæœ‰ä¸¤ä¸ªé˜¶æ®µï¼Œåˆ†åˆ«ä¸º <code>Prepare</code> å’Œ <code>accept</code> é˜¶æ®µã€‚</p><h4 id="_4-3-1-prepare-é˜¶æ®µ" tabindex="-1"><a class="header-anchor" href="#_4-3-1-prepare-é˜¶æ®µ" aria-hidden="true">#</a> 4.3.1. prepare é˜¶æ®µ</h4><ul><li><code>Proposerææ¡ˆè€…</code>ï¼šè´Ÿè´£æå‡º <code>proposal</code>ï¼Œæ¯ä¸ªææ¡ˆè€…åœ¨æå‡ºææ¡ˆæ—¶éƒ½ä¼šé¦–å…ˆèŽ·å–åˆ°ä¸€ä¸ª <strong>å…·æœ‰å…¨å±€å”¯ä¸€æ€§çš„ã€é€’å¢žçš„ææ¡ˆç¼–å·N</strong>ï¼Œå³åœ¨æ•´ä¸ªé›†ç¾¤ä¸­æ˜¯å”¯ä¸€çš„ç¼–å· Nï¼Œç„¶åŽå°†è¯¥ç¼–å·èµ‹äºˆå…¶è¦æå‡ºçš„ææ¡ˆï¼Œåœ¨<strong>ç¬¬ä¸€é˜¶æ®µæ˜¯åªå°†ææ¡ˆç¼–å·å‘é€ç»™æ‰€æœ‰çš„è¡¨å†³è€…</strong>ã€‚</li><li><code>Acceptorè¡¨å†³è€…</code>ï¼šæ¯ä¸ªè¡¨å†³è€…åœ¨ <code>accept</code> æŸææ¡ˆåŽï¼Œä¼šå°†è¯¥ææ¡ˆç¼–å·Nè®°å½•åœ¨æœ¬åœ°ï¼Œè¿™æ ·æ¯ä¸ªè¡¨å†³è€…ä¸­ä¿å­˜çš„å·²ç»è¢« accept çš„ææ¡ˆä¸­ä¼šå­˜åœ¨ä¸€ä¸ª<strong>ç¼–å·æœ€å¤§çš„ææ¡ˆ</strong>ï¼Œå…¶ç¼–å·å‡è®¾ä¸º <code>maxN</code>ã€‚æ¯ä¸ªè¡¨å†³è€…ä»…ä¼š <code>accept</code> ç¼–å·å¤§äºŽè‡ªå·±æœ¬åœ° <code>maxN</code> çš„ææ¡ˆï¼Œåœ¨æ‰¹å‡†ææ¡ˆæ—¶è¡¨å†³è€…ä¼šå°†ä»¥å‰æŽ¥å—è¿‡çš„æœ€å¤§ç¼–å·çš„ææ¡ˆä½œä¸ºå“åº”åé¦ˆç»™ <code>Proposer</code> ã€‚</li></ul><blockquote><p>ä¸‹é¢æ˜¯ <code>prepare</code> é˜¶æ®µçš„æµç¨‹å›¾ï¼Œä½ å¯ä»¥å¯¹ç…§ç€å‚è€ƒä¸€ä¸‹ã€‚</p></blockquote><figure><img src="https://img-blog.csdnimg.cn/img_convert/22e8d512d954676bdf0cc92d200af8ef.png" alt="paxosç¬¬ä¸€é˜¶æ®µ" tabindex="0" loading="lazy"><figcaption>paxosç¬¬ä¸€é˜¶æ®µ</figcaption></figure><h4 id="_4-3-2-accept-é˜¶æ®µ" tabindex="-1"><a class="header-anchor" href="#_4-3-2-accept-é˜¶æ®µ" aria-hidden="true">#</a> 4.3.2. accept é˜¶æ®µ</h4><p>å½“ä¸€ä¸ªææ¡ˆè¢« <code>Proposer</code> æå‡ºåŽï¼Œå¦‚æžœ <code>Proposer</code> æ”¶åˆ°äº†è¶…è¿‡åŠæ•°çš„ <code>Acceptor</code> çš„æ‰¹å‡†ï¼ˆ<code>Proposer</code> æœ¬èº«åŒæ„ï¼‰ï¼Œé‚£ä¹ˆæ­¤æ—¶ <code>Proposer</code> ä¼šç»™æ‰€æœ‰çš„ <code>Acceptor</code> å‘é€çœŸæ­£çš„ææ¡ˆï¼ˆä½ å¯ä»¥ç†è§£ä¸ºç¬¬ä¸€é˜¶æ®µä¸ºè¯•æŽ¢ï¼‰ï¼Œè¿™ä¸ªæ—¶å€™ <code>Proposer</code> å°±ä¼šå‘é€ææ¡ˆçš„å†…å®¹å’Œææ¡ˆç¼–å·ã€‚</p><p>è¡¨å†³è€…æ”¶åˆ°ææ¡ˆè¯·æ±‚åŽä¼šå†æ¬¡æ¯”è¾ƒæœ¬èº«å·²ç»æ‰¹å‡†è¿‡çš„æœ€å¤§ææ¡ˆç¼–å·å’Œè¯¥ææ¡ˆç¼–å·ï¼Œå¦‚æžœè¯¥ææ¡ˆç¼–å· <strong>å¤§äºŽç­‰äºŽ</strong> å·²ç»æ‰¹å‡†è¿‡çš„æœ€å¤§ææ¡ˆç¼–å·ï¼Œé‚£ä¹ˆå°± <code>accept</code> è¯¥ææ¡ˆï¼ˆæ­¤æ—¶æ‰§è¡Œææ¡ˆå†…å®¹ä½†ä¸æäº¤ï¼‰ï¼ŒéšåŽå°†æƒ…å†µè¿”å›žç»™ <code>Proposer</code> ã€‚å¦‚æžœä¸æ»¡è¶³åˆ™ä¸å›žåº”æˆ–è€…è¿”å›ž NO ã€‚</p><figure><img src="https://img-blog.csdnimg.cn/img_convert/b82536f956f70a584c6a20c10113f225.png" alt="paxosç¬¬äºŒé˜¶æ®µ1" tabindex="0" loading="lazy"><figcaption>paxosç¬¬äºŒé˜¶æ®µ1</figcaption></figure><p>å½“ <code>Proposer</code> æ”¶åˆ°è¶…è¿‡åŠæ•°çš„ <code>accept</code> ï¼Œé‚£ä¹ˆå®ƒè¿™ä¸ªæ—¶å€™ä¼šå‘æ‰€æœ‰çš„ <code>acceptor</code> å‘é€ææ¡ˆçš„æäº¤è¯·æ±‚ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå› ä¸ºä¸Šè¿°ä»…ä»…æ˜¯è¶…è¿‡åŠæ•°çš„ <code>acceptor</code> æ‰¹å‡†æ‰§è¡Œäº†è¯¥ææ¡ˆå†…å®¹ï¼Œå…¶ä»–æ²¡æœ‰æ‰¹å‡†çš„å¹¶æ²¡æœ‰æ‰§è¡Œè¯¥ææ¡ˆå†…å®¹ï¼Œæ‰€ä»¥è¿™ä¸ªæ—¶å€™éœ€è¦<strong>å‘æœªæ‰¹å‡†çš„ <code>acceptor</code> å‘é€ææ¡ˆå†…å®¹å’Œææ¡ˆç¼–å·å¹¶è®©å®ƒæ— æ¡ä»¶æ‰§è¡Œå’Œæäº¤</strong>ï¼Œè€Œå¯¹äºŽå‰é¢å·²ç»æ‰¹å‡†è¿‡è¯¥ææ¡ˆçš„ <code>acceptor</code> æ¥è¯´ <strong>ä»…ä»…éœ€è¦å‘é€è¯¥ææ¡ˆçš„ç¼–å·</strong> ï¼Œè®© <code>acceptor</code> æ‰§è¡Œæäº¤å°±è¡Œäº†ã€‚</p><figure><img src="https://img-blog.csdnimg.cn/img_convert/743889b97485fdfe2094e5ef0af6b141.png" alt="paxosç¬¬äºŒé˜¶æ®µ2" tabindex="0" loading="lazy"><figcaption>paxosç¬¬äºŒé˜¶æ®µ2</figcaption></figure><p>è€Œå¦‚æžœ <code>Proposer</code> å¦‚æžœæ²¡æœ‰æ”¶åˆ°è¶…è¿‡åŠæ•°çš„ <code>accept</code> é‚£ä¹ˆå®ƒå°†ä¼šå°† <strong>é€’å¢ž</strong> è¯¥ <code>Proposal</code> çš„ç¼–å·ï¼Œç„¶åŽ <strong>é‡æ–°è¿›å…¥ <code>Prepare</code> é˜¶æ®µ</strong> ã€‚</p><blockquote><p>å¯¹äºŽ <code>Learner</code> æ¥è¯´å¦‚ä½•åŽ»å­¦ä¹  <code>Acceptor</code> æ‰¹å‡†çš„ææ¡ˆå†…å®¹ï¼Œè¿™æœ‰å¾ˆå¤šæ–¹å¼ï¼Œè¯»è€…å¯ä»¥è‡ªå·±åŽ»äº†è§£ä¸€ä¸‹ï¼Œè¿™é‡Œä¸åšè¿‡å¤šè§£é‡Šã€‚</p></blockquote><h4 id="_4-3-3-paxos-ç®—æ³•çš„æ­»å¾ªçŽ¯é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#_4-3-3-paxos-ç®—æ³•çš„æ­»å¾ªçŽ¯é—®é¢˜" aria-hidden="true">#</a> 4.3.3. <code>paxos</code> ç®—æ³•çš„æ­»å¾ªçŽ¯é—®é¢˜</h4><p>å…¶å®žå°±æœ‰ç‚¹ç±»ä¼¼äºŽä¸¤ä¸ªäººåµæž¶ï¼Œå°æ˜Žè¯´æˆ‘æ˜¯å¯¹çš„ï¼Œå°çº¢è¯´æˆ‘æ‰æ˜¯å¯¹çš„ï¼Œä¸¤ä¸ªäººæ®ç†åŠ›äº‰çš„è°ä¹Ÿä¸è®©è°ðŸ¤¬ðŸ¤¬ã€‚</p><p>æ¯”å¦‚è¯´ï¼Œæ­¤æ—¶ææ¡ˆè€… P1 æå‡ºä¸€ä¸ªæ–¹æ¡ˆ M1ï¼Œå®Œæˆäº† <code>Prepare</code> é˜¶æ®µçš„å·¥ä½œï¼Œè¿™ä¸ªæ—¶å€™ <code>acceptor</code> åˆ™æ‰¹å‡†äº† M1ï¼Œä½†æ˜¯æ­¤æ—¶ææ¡ˆè€… P2 åŒæ—¶ä¹Ÿæå‡ºäº†ä¸€ä¸ªæ–¹æ¡ˆ M2ï¼Œå®ƒä¹Ÿå®Œæˆäº† <code>Prepare</code> é˜¶æ®µçš„å·¥ä½œã€‚ç„¶åŽ P1 çš„æ–¹æ¡ˆå·²ç»ä¸èƒ½åœ¨ç¬¬äºŒé˜¶æ®µè¢«æ‰¹å‡†äº†ï¼ˆå› ä¸º <code>acceptor</code> å·²ç»æ‰¹å‡†äº†æ¯” M1 æ›´å¤§çš„ M2ï¼‰ï¼Œæ‰€ä»¥ P1 è‡ªå¢žæ–¹æ¡ˆå˜ä¸º M3 é‡æ–°è¿›å…¥ <code>Prepare</code> é˜¶æ®µï¼Œç„¶åŽ <code>acceptor</code> ï¼Œåˆæ‰¹å‡†äº†æ–°çš„ M3 æ–¹æ¡ˆï¼Œå®ƒåˆä¸èƒ½æ‰¹å‡† M2 äº†ï¼Œè¿™ä¸ªæ—¶å€™ M2 åˆè‡ªå¢žè¿›å…¥ <code>Prepare</code> é˜¶æ®µã€‚ã€‚ã€‚</p><p>å°±è¿™æ ·æ— ä¼‘æ— æ­¢çš„æ°¸è¿œææ¡ˆä¸‹åŽ»ï¼Œè¿™å°±æ˜¯ <code>paxos</code> ç®—æ³•çš„æ­»å¾ªçŽ¯é—®é¢˜ã€‚</p><figure><img src="https://img-blog.csdnimg.cn/img_convert/72ccf65cdc107346ff2a1a881d296a2b.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>é‚£ä¹ˆå¦‚ä½•è§£å†³å‘¢ï¼Ÿå¾ˆç®€å•ï¼Œäººå¤šäº†å®¹æ˜“åµæž¶ï¼Œæˆ‘çŽ°åœ¨ <strong>å°±å…è®¸ä¸€ä¸ªèƒ½ææ¡ˆ</strong> å°±è¡Œäº†ã€‚</p><h2 id="_5-å¼•å‡º-zab" tabindex="-1"><a class="header-anchor" href="#_5-å¼•å‡º-zab" aria-hidden="true">#</a> 5. å¼•å‡º <code>ZAB</code></h2><h3 id="_5-1-zookeeper-æž¶æž„" tabindex="-1"><a class="header-anchor" href="#_5-1-zookeeper-æž¶æž„" aria-hidden="true">#</a> 5.1. <code>Zookeeper</code> æž¶æž„</h3><p>ä½œä¸ºä¸€ä¸ªä¼˜ç§€é«˜æ•ˆä¸”å¯é çš„åˆ†å¸ƒå¼åè°ƒæ¡†æž¶ï¼Œ<code>ZooKeeper</code> åœ¨è§£å†³åˆ†å¸ƒå¼æ•°æ®ä¸€è‡´æ€§é—®é¢˜æ—¶å¹¶æ²¡æœ‰ç›´æŽ¥ä½¿ç”¨ <code>Paxos</code> ï¼Œè€Œæ˜¯ä¸“é—¨å®šåˆ¶äº†ä¸€è‡´æ€§åè®®å«åš <code>ZAB(ZooKeeper Atomic Broadcast)</code> åŽŸå­å¹¿æ’­åè®®ï¼Œè¯¥åè®®èƒ½å¤Ÿå¾ˆå¥½åœ°æ”¯æŒ <strong>å´©æºƒæ¢å¤</strong> ã€‚</p><figure><img src="https://img-blog.csdnimg.cn/img_convert/0c38d08ea026e25bf3849cc7654a4e79.png" alt="Zookeeperæž¶æž„" tabindex="0" loading="lazy"><figcaption>Zookeeperæž¶æž„</figcaption></figure><h3 id="_5-2-zab-ä¸­çš„ä¸‰ä¸ªè§’è‰²" tabindex="-1"><a class="header-anchor" href="#_5-2-zab-ä¸­çš„ä¸‰ä¸ªè§’è‰²" aria-hidden="true">#</a> 5.2. <code>ZAB</code> ä¸­çš„ä¸‰ä¸ªè§’è‰²</h3><p>å’Œä»‹ç» <code>Paxos</code> ä¸€æ ·ï¼Œåœ¨ä»‹ç» <code>ZAB</code> åè®®ä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆæ¥äº†è§£ä¸€ä¸‹åœ¨ <code>ZAB</code> ä¸­ä¸‰ä¸ªä¸»è¦çš„è§’è‰²ï¼Œ<code>Leader é¢†å¯¼è€…</code>ã€<code>Followerè·Ÿéšè€…</code>ã€<code>Observerè§‚å¯Ÿè€…</code> ã€‚</p><ul><li><code>Leader</code> ï¼šé›†ç¾¤ä¸­ <strong>å”¯ä¸€çš„å†™è¯·æ±‚å¤„ç†è€…</strong> ï¼Œèƒ½å¤Ÿå‘èµ·æŠ•ç¥¨ï¼ˆæŠ•ç¥¨ä¹Ÿæ˜¯ä¸ºäº†è¿›è¡Œå†™è¯·æ±‚ï¼‰ã€‚</li><li><code>Follower</code>ï¼šèƒ½å¤ŸæŽ¥æ”¶å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œå¦‚æžœæ˜¯è¯»è¯·æ±‚åˆ™å¯ä»¥è‡ªå·±å¤„ç†ï¼Œ<strong>å¦‚æžœæ˜¯å†™è¯·æ±‚åˆ™è¦è½¬å‘ç»™ <code>Leader</code></strong> ã€‚åœ¨é€‰ä¸¾è¿‡ç¨‹ä¸­ä¼šå‚ä¸ŽæŠ•ç¥¨ï¼Œ<strong>æœ‰é€‰ä¸¾æƒå’Œè¢«é€‰ä¸¾æƒ</strong> ã€‚</li><li><code>Observer</code> ï¼šå°±æ˜¯æ²¡æœ‰é€‰ä¸¾æƒå’Œè¢«é€‰ä¸¾æƒçš„ <code>Follower</code> ã€‚</li></ul><p>åœ¨ <code>ZAB</code> åè®®ä¸­å¯¹ <code>zkServer</code>(å³ä¸Šé¢æˆ‘ä»¬è¯´çš„ä¸‰ä¸ªè§’è‰²çš„æ€»ç§°) è¿˜æœ‰ä¸¤ç§æ¨¡å¼çš„å®šä¹‰ï¼Œåˆ†åˆ«æ˜¯ <strong>æ¶ˆæ¯å¹¿æ’­</strong> å’Œ <strong>å´©æºƒæ¢å¤</strong> ã€‚</p><h3 id="_5-3-æ¶ˆæ¯å¹¿æ’­æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#_5-3-æ¶ˆæ¯å¹¿æ’­æ¨¡å¼" aria-hidden="true">#</a> 5.3. æ¶ˆæ¯å¹¿æ’­æ¨¡å¼</h3><p>è¯´ç™½äº†å°±æ˜¯ <code>ZAB</code> åè®®æ˜¯å¦‚ä½•å¤„ç†å†™è¯·æ±‚çš„ï¼Œä¸Šé¢æˆ‘ä»¬ä¸æ˜¯è¯´åªæœ‰ <code>Leader</code> èƒ½å¤„ç†å†™è¯·æ±‚å˜›ï¼Ÿé‚£ä¹ˆæˆ‘ä»¬çš„ <code>Follower</code> å’Œ <code>Observer</code> æ˜¯ä¸æ˜¯ä¹Ÿéœ€è¦ <strong>åŒæ­¥æ›´æ–°æ•°æ®</strong> å‘¢ï¼Ÿæ€»ä¸èƒ½æ•°æ®åªåœ¨ <code>Leader</code> ä¸­æ›´æ–°äº†ï¼Œå…¶ä»–è§’è‰²éƒ½æ²¡æœ‰å¾—åˆ°æ›´æ–°å§ï¼Ÿ</p><p>ä¸å°±æ˜¯ <strong>åœ¨æ•´ä¸ªé›†ç¾¤ä¸­ä¿æŒæ•°æ®çš„ä¸€è‡´æ€§</strong> å˜›ï¼Ÿå¦‚æžœæ˜¯ä½ ï¼Œä½ ä¼šæ€Žä¹ˆåšå‘¢ï¼Ÿ</p><figure><img src="https://img-blog.csdnimg.cn/img_convert/e6064aea729dcc2d927d5d81c4797e74.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>åºŸè¯ï¼Œç¬¬ä¸€æ­¥è‚¯å®šéœ€è¦ <code>Leader</code> å°†å†™è¯·æ±‚ <strong>å¹¿æ’­</strong> å‡ºåŽ»å‘€ï¼Œè®© <code>Leader</code> é—®é—® <code>Followers</code> æ˜¯å¦åŒæ„æ›´æ–°ï¼Œå¦‚æžœè¶…è¿‡åŠæ•°ä»¥ä¸Šçš„åŒæ„é‚£ä¹ˆå°±è¿›è¡Œ <code>Follower</code> å’Œ <code>Observer</code> çš„æ›´æ–°ï¼ˆå’Œ <code>Paxos</code> ä¸€æ ·ï¼‰ã€‚å½“ç„¶è¿™ä¹ˆè¯´æœ‰ç‚¹è™šï¼Œç”»å¼ å›¾ç†è§£ä¸€ä¸‹ã€‚</p><figure><img src="https://img-blog.csdnimg.cn/img_convert/08ccce48190fe4edcbcbb223d6231876.png" alt="æ¶ˆæ¯å¹¿æ’­" tabindex="0" loading="lazy"><figcaption>æ¶ˆæ¯å¹¿æ’­</figcaption></figure><p>å—¯ã€‚ã€‚ã€‚çœ‹èµ·æ¥å¾ˆç®€å•ï¼Œè²Œä¼¼æ‡‚äº†ðŸ¤¥ðŸ¤¥ðŸ¤¥ã€‚è¿™ä¸¤ä¸ª <code>Queue</code> å“ªå†’å‡ºæ¥çš„ï¼Ÿç­”æ¡ˆæ˜¯ <strong><code>ZAB</code> éœ€è¦è®© <code>Follower</code> å’Œ <code>Observer</code> ä¿è¯é¡ºåºæ€§</strong> ã€‚ä½•ä¸ºé¡ºåºæ€§ï¼Œæ¯”å¦‚æˆ‘çŽ°åœ¨æœ‰ä¸€ä¸ªå†™è¯·æ±‚Aï¼Œæ­¤æ—¶ <code>Leader</code> å°†è¯·æ±‚Aå¹¿æ’­å‡ºåŽ»ï¼Œå› ä¸ºåªéœ€è¦åŠæ•°åŒæ„å°±è¡Œï¼Œæ‰€ä»¥å¯èƒ½è¿™ä¸ªæ—¶å€™æœ‰ä¸€ä¸ª <code>Follower</code> F1å› ä¸ºç½‘ç»œåŽŸå› æ²¡æœ‰æ”¶åˆ°ï¼Œè€Œ <code>Leader</code> åˆå¹¿æ’­äº†ä¸€ä¸ªè¯·æ±‚Bï¼Œå› ä¸ºç½‘ç»œåŽŸå› ï¼ŒF1ç«Ÿç„¶å…ˆæ”¶åˆ°äº†è¯·æ±‚Bç„¶åŽæ‰æ”¶åˆ°äº†è¯·æ±‚Aï¼Œè¿™ä¸ªæ—¶å€™è¯·æ±‚å¤„ç†çš„é¡ºåºä¸åŒå°±ä¼šå¯¼è‡´æ•°æ®çš„ä¸åŒï¼Œä»Žè€Œ <strong>äº§ç”Ÿæ•°æ®ä¸ä¸€è‡´é—®é¢˜</strong> ã€‚</p><p>æ‰€ä»¥åœ¨ <code>Leader</code> è¿™ç«¯ï¼Œå®ƒä¸ºæ¯ä¸ªå…¶ä»–çš„ <code>zkServer</code> å‡†å¤‡äº†ä¸€ä¸ª <strong>é˜Ÿåˆ—</strong> ï¼Œé‡‡ç”¨å…ˆè¿›å…ˆå‡ºçš„æ–¹å¼å‘é€æ¶ˆæ¯ã€‚ç”±äºŽåè®®æ˜¯ **é€šè¿‡ <code>TCP</code> **æ¥è¿›è¡Œç½‘ç»œé€šä¿¡çš„ï¼Œä¿è¯äº†æ¶ˆæ¯çš„å‘é€é¡ºåºæ€§ï¼ŒæŽ¥å—é¡ºåºæ€§ä¹Ÿå¾—åˆ°äº†ä¿è¯ã€‚</p><p>é™¤æ­¤ä¹‹å¤–ï¼Œåœ¨ <code>ZAB</code> ä¸­è¿˜å®šä¹‰äº†ä¸€ä¸ª <strong>å…¨å±€å•è°ƒé€’å¢žçš„äº‹åŠ¡ID <code>ZXID</code></strong> ï¼Œå®ƒæ˜¯ä¸€ä¸ª64ä½longåž‹ï¼Œå…¶ä¸­é«˜32ä½è¡¨ç¤º <code>epoch</code> å¹´ä»£ï¼Œä½Ž32ä½è¡¨ç¤ºäº‹åŠ¡idã€‚<code>epoch</code> æ˜¯ä¼šæ ¹æ® <code>Leader</code> çš„å˜åŒ–è€Œå˜åŒ–çš„ï¼Œå½“ä¸€ä¸ª <code>Leader</code> æŒ‚äº†ï¼Œæ–°çš„ <code>Leader</code> ä¸Šä½çš„æ—¶å€™ï¼Œå¹´ä»£ï¼ˆ<code>epoch</code>ï¼‰å°±å˜äº†ã€‚è€Œä½Ž32ä½å¯ä»¥ç®€å•ç†è§£ä¸ºé€’å¢žçš„äº‹åŠ¡idã€‚</p><p>å®šä¹‰è¿™ä¸ªçš„åŽŸå› ä¹Ÿæ˜¯ä¸ºäº†é¡ºåºæ€§ï¼Œæ¯ä¸ª <code>proposal</code> åœ¨ <code>Leader</code> ä¸­ç”ŸæˆåŽéœ€è¦ <strong>é€šè¿‡å…¶ <code>ZXID</code> æ¥è¿›è¡ŒæŽ’åº</strong> ï¼Œæ‰èƒ½å¾—åˆ°å¤„ç†ã€‚</p><h3 id="_5-4-å´©æºƒæ¢å¤æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#_5-4-å´©æºƒæ¢å¤æ¨¡å¼" aria-hidden="true">#</a> 5.4. å´©æºƒæ¢å¤æ¨¡å¼</h3><p>è¯´åˆ°å´©æºƒæ¢å¤æˆ‘ä»¬é¦–å…ˆè¦æåˆ° <code>ZAB</code> ä¸­çš„ <code>Leader</code> é€‰ä¸¾ç®—æ³•ï¼Œå½“ç³»ç»Ÿå‡ºçŽ°å´©æºƒå½±å“æœ€å¤§åº”è¯¥æ˜¯ <code>Leader</code> çš„å´©æºƒï¼Œå› ä¸ºæˆ‘ä»¬åªæœ‰ä¸€ä¸ª <code>Leader</code> ï¼Œæ‰€ä»¥å½“ <code>Leader</code> å‡ºçŽ°é—®é¢˜çš„æ—¶å€™æˆ‘ä»¬åŠ¿å¿…éœ€è¦é‡æ–°é€‰ä¸¾ <code>Leader</code> ã€‚</p><p><code>Leader</code> é€‰ä¸¾å¯ä»¥åˆ†ä¸ºä¸¤ä¸ªä¸åŒçš„é˜¶æ®µï¼Œç¬¬ä¸€ä¸ªæ˜¯æˆ‘ä»¬æåˆ°çš„ <code>Leader</code> å®•æœºéœ€è¦é‡æ–°é€‰ä¸¾ï¼Œç¬¬äºŒåˆ™æ˜¯å½“ <code>Zookeeper</code> å¯åŠ¨æ—¶éœ€è¦è¿›è¡Œç³»ç»Ÿçš„ <code>Leader</code> åˆå§‹åŒ–é€‰ä¸¾ã€‚ä¸‹é¢æˆ‘å…ˆæ¥ä»‹ç»ä¸€ä¸‹ <code>ZAB</code> æ˜¯å¦‚ä½•è¿›è¡Œåˆå§‹åŒ–é€‰ä¸¾çš„ã€‚</p><p>å‡è®¾æˆ‘ä»¬é›†ç¾¤ä¸­æœ‰3å°æœºå™¨ï¼Œé‚£ä¹Ÿå°±æ„å‘³ç€æˆ‘ä»¬éœ€è¦ä¸¤å°ä»¥ä¸ŠåŒæ„ï¼ˆè¶…è¿‡åŠæ•°ï¼‰ã€‚æ¯”å¦‚è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯åŠ¨äº† <code>server1</code> ï¼Œå®ƒä¼šé¦–å…ˆ <strong>æŠ•ç¥¨ç»™è‡ªå·±</strong> ï¼ŒæŠ•ç¥¨å†…å®¹ä¸ºæœåŠ¡å™¨çš„ <code>myid</code> å’Œ <code>ZXID</code> ï¼Œå› ä¸ºåˆå§‹åŒ–æ‰€ä»¥ <code>ZXID</code> éƒ½ä¸º0ï¼Œæ­¤æ—¶ <code>server1</code> å‘å‡ºçš„æŠ•ç¥¨ä¸º (1,0)ã€‚ä½†æ­¤æ—¶ <code>server1</code> çš„æŠ•ç¥¨ä»…ä¸º1ï¼Œæ‰€ä»¥ä¸èƒ½ä½œä¸º <code>Leader</code> ï¼Œæ­¤æ—¶è¿˜åœ¨é€‰ä¸¾é˜¶æ®µæ‰€ä»¥æ•´ä¸ªé›†ç¾¤å¤„äºŽ <strong><code>Looking</code> çŠ¶æ€</strong>ã€‚</p><p>æŽ¥ç€ <code>server2</code> å¯åŠ¨äº†ï¼Œå®ƒé¦–å…ˆä¹Ÿä¼šå°†æŠ•ç¥¨é€‰ç»™è‡ªå·±(2,0)ï¼Œå¹¶å°†æŠ•ç¥¨ä¿¡æ¯å¹¿æ’­å‡ºåŽ»ï¼ˆ<code>server1</code>ä¹Ÿä¼šï¼Œåªæ˜¯å®ƒé‚£æ—¶æ²¡æœ‰å…¶ä»–çš„æœåŠ¡å™¨äº†ï¼‰ï¼Œ<code>server1</code> åœ¨æ”¶åˆ° <code>server2</code> çš„æŠ•ç¥¨ä¿¡æ¯åŽä¼šå°†æŠ•ç¥¨ä¿¡æ¯ä¸Žè‡ªå·±çš„ä½œæ¯”è¾ƒã€‚<strong>é¦–å…ˆå®ƒä¼šæ¯”è¾ƒ <code>ZXID</code> ï¼Œ<code>ZXID</code> å¤§çš„ä¼˜å…ˆä¸º <code>Leader</code>ï¼Œå¦‚æžœç›¸åŒåˆ™æ¯”è¾ƒ <code>myid</code>ï¼Œ<code>myid</code> å¤§çš„ä¼˜å…ˆä½œä¸º <code>Leader</code></strong>ã€‚æ‰€ä»¥æ­¤æ—¶<code>server1</code> å‘çŽ° <code>server2</code> æ›´é€‚åˆåš <code>Leader</code>ï¼Œå®ƒå°±ä¼šå°†è‡ªå·±çš„æŠ•ç¥¨ä¿¡æ¯æ›´æ”¹ä¸º(2,0)ç„¶åŽå†å¹¿æ’­å‡ºåŽ»ï¼Œä¹‹åŽ<code>server2</code> æ”¶åˆ°ä¹‹åŽå‘çŽ°å’Œè‡ªå·±çš„ä¸€æ ·æ— éœ€åšæ›´æ”¹ï¼Œå¹¶ä¸”è‡ªå·±çš„ <strong>æŠ•ç¥¨å·²ç»è¶…è¿‡åŠæ•°</strong> ï¼Œåˆ™ <strong>ç¡®å®š <code>server2</code> ä¸º <code>Leader</code></strong>ï¼Œ<code>server1</code> ä¹Ÿä¼šå°†è‡ªå·±æœåŠ¡å™¨è®¾ç½®ä¸º <code>Following</code> å˜ä¸º <code>Follower</code>ã€‚æ•´ä¸ªæœåŠ¡å™¨å°±ä»Ž <code>Looking</code> å˜ä¸ºäº†æ­£å¸¸çŠ¶æ€ã€‚</p><p>å½“ <code>server3</code> å¯åŠ¨å‘çŽ°é›†ç¾¤æ²¡æœ‰å¤„äºŽ <code>Looking</code> çŠ¶æ€æ—¶ï¼Œå®ƒä¼šç›´æŽ¥ä»¥ <code>Follower</code> çš„èº«ä»½åŠ å…¥é›†ç¾¤ã€‚</p><p>è¿˜æ˜¯å‰é¢ä¸‰ä¸ª <code>server</code> çš„ä¾‹å­ï¼Œå¦‚æžœåœ¨æ•´ä¸ªé›†ç¾¤è¿è¡Œçš„è¿‡ç¨‹ä¸­ <code>server2</code> æŒ‚äº†ï¼Œé‚£ä¹ˆæ•´ä¸ªé›†ç¾¤ä¼šå¦‚ä½•é‡æ–°é€‰ä¸¾ <code>Leader</code> å‘¢ï¼Ÿå…¶å®žå’Œåˆå§‹åŒ–é€‰ä¸¾å·®ä¸å¤šã€‚</p><p>é¦–å…ˆæ¯«æ— ç–‘é—®çš„æ˜¯å‰©ä¸‹çš„ä¸¤ä¸ª <code>Follower</code> ä¼šå°†è‡ªå·±çš„çŠ¶æ€ <strong>ä»Ž <code>Following</code> å˜ä¸º <code>Looking</code> çŠ¶æ€</strong> ï¼Œç„¶åŽæ¯ä¸ª <code>server</code> ä¼šå‘åˆå§‹åŒ–æŠ•ç¥¨ä¸€æ ·é¦–å…ˆç»™è‡ªå·±æŠ•ç¥¨ï¼ˆè¿™ä¸è¿‡è¿™é‡Œçš„ <code>zxid</code> å¯èƒ½ä¸æ˜¯0äº†ï¼Œè¿™é‡Œä¸ºäº†æ–¹ä¾¿éšä¾¿å–ä¸ªæ•°å­—ï¼‰ã€‚</p><p>å‡è®¾ <code>server1</code> ç»™è‡ªå·±æŠ•ç¥¨ä¸º(1,99)ï¼Œç„¶åŽå¹¿æ’­ç»™å…¶ä»– <code>server</code>ï¼Œ<code>server3</code> é¦–å…ˆä¹Ÿä¼šç»™è‡ªå·±æŠ•ç¥¨(3,95)ï¼Œç„¶åŽä¹Ÿå¹¿æ’­ç»™å…¶ä»– <code>server</code>ã€‚<code>server1</code> å’Œ <code>server3</code> æ­¤æ—¶ä¼šæ”¶åˆ°å½¼æ­¤çš„æŠ•ç¥¨ä¿¡æ¯ï¼Œå’Œä¸€å¼€å§‹é€‰ä¸¾ä¸€æ ·ï¼Œä»–ä»¬ä¹Ÿä¼šæ¯”è¾ƒè‡ªå·±çš„æŠ•ç¥¨å’Œæ”¶åˆ°çš„æŠ•ç¥¨ï¼ˆ<code>zxid</code> å¤§çš„ä¼˜å…ˆï¼Œå¦‚æžœç›¸åŒé‚£ä¹ˆå°± <code>myid</code> å¤§çš„ä¼˜å…ˆï¼‰ã€‚è¿™ä¸ªæ—¶å€™ <code>server1</code> æ”¶åˆ°äº† <code>server3</code> çš„æŠ•ç¥¨å‘çŽ°æ²¡è‡ªå·±çš„åˆé€‚æ•…ä¸å˜ï¼Œ<code>server3</code> æ”¶åˆ° <code>server1</code> çš„æŠ•ç¥¨ç»“æžœåŽå‘çŽ°æ¯”è‡ªå·±çš„åˆé€‚äºŽæ˜¯æ›´æ”¹æŠ•ç¥¨ä¸º(1,99)ç„¶åŽå¹¿æ’­å‡ºåŽ»ï¼Œæœ€åŽ <code>server1</code> æ”¶åˆ°äº†å‘çŽ°è‡ªå·±çš„æŠ•ç¥¨å·²ç»è¶…è¿‡åŠæ•°å°±æŠŠè‡ªå·±è®¾ä¸º <code>Leader</code>ï¼Œ<code>server3</code> ä¹Ÿéšä¹‹å˜ä¸º <code>Follower</code>ã€‚</p><blockquote><p>è¯·æ³¨æ„ <code>ZooKeeper</code> ä¸ºä»€ä¹ˆè¦è®¾ç½®å¥‡æ•°ä¸ªç»“ç‚¹ï¼Ÿæ¯”å¦‚è¿™é‡Œæˆ‘ä»¬æ˜¯ä¸‰ä¸ªï¼ŒæŒ‚äº†ä¸€ä¸ªæˆ‘ä»¬è¿˜èƒ½æ­£å¸¸å·¥ä½œï¼ŒæŒ‚äº†ä¸¤ä¸ªæˆ‘ä»¬å°±ä¸èƒ½æ­£å¸¸å·¥ä½œäº†ï¼ˆå·²ç»æ²¡æœ‰è¶…è¿‡åŠæ•°çš„èŠ‚ç‚¹æ•°äº†ï¼Œæ‰€ä»¥æ— æ³•è¿›è¡ŒæŠ•ç¥¨ç­‰æ“ä½œäº†ï¼‰ã€‚è€Œå‡è®¾æˆ‘ä»¬çŽ°åœ¨æœ‰å››ä¸ªï¼ŒæŒ‚äº†ä¸€ä¸ªä¹Ÿèƒ½å·¥ä½œï¼Œ<strong>ä½†æ˜¯æŒ‚äº†ä¸¤ä¸ªä¹Ÿä¸èƒ½æ­£å¸¸å·¥ä½œäº†</strong>ï¼Œè¿™æ˜¯å’Œä¸‰ä¸ªä¸€æ ·çš„ï¼Œè€Œä¸‰ä¸ªæ¯”å››ä¸ªè¿˜å°‘ä¸€ä¸ªï¼Œå¸¦æ¥çš„æ•ˆç›Šæ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥ <code>Zookeeper</code> æŽ¨èå¥‡æ•°ä¸ª <code>server</code> ã€‚</p></blockquote><p>é‚£ä¹ˆè¯´å®Œäº† <code>ZAB</code> ä¸­çš„ <code>Leader</code> é€‰ä¸¾æ–¹å¼ä¹‹åŽæˆ‘ä»¬å†æ¥äº†è§£ä¸€ä¸‹ <strong>å´©æºƒæ¢å¤</strong> æ˜¯ä»€ä¹ˆçŽ©æ„ï¼Ÿ</p><p>å…¶å®žä¸»è¦å°±æ˜¯ <strong>å½“é›†ç¾¤ä¸­æœ‰æœºå™¨æŒ‚äº†ï¼Œæˆ‘ä»¬æ•´ä¸ªé›†ç¾¤å¦‚ä½•ä¿è¯æ•°æ®ä¸€è‡´æ€§ï¼Ÿ</strong></p><p>å¦‚æžœåªæ˜¯ <code>Follower</code> æŒ‚äº†ï¼Œè€Œä¸”æŒ‚çš„æ²¡è¶…è¿‡åŠæ•°çš„æ—¶å€™ï¼Œå› ä¸ºæˆ‘ä»¬ä¸€å¼€å§‹è®²äº†åœ¨ <code>Leader</code> ä¸­ä¼šç»´æŠ¤é˜Ÿåˆ—ï¼Œæ‰€ä»¥ä¸ç”¨æ‹…å¿ƒåŽé¢çš„æ•°æ®æ²¡æŽ¥æ”¶åˆ°å¯¼è‡´æ•°æ®ä¸ä¸€è‡´æ€§ã€‚</p><p>å¦‚æžœ <code>Leader</code> æŒ‚äº†é‚£å°±éº»çƒ¦äº†ï¼Œæˆ‘ä»¬è‚¯å®šéœ€è¦å…ˆæš‚åœæœåŠ¡å˜ä¸º <code>Looking</code> çŠ¶æ€ç„¶åŽè¿›è¡Œ <code>Leader</code> çš„é‡æ–°é€‰ä¸¾ï¼ˆä¸Šé¢æˆ‘è®²è¿‡äº†ï¼‰ï¼Œä½†è¿™ä¸ªå°±è¦åˆ†ä¸ºä¸¤ç§æƒ…å†µäº†ï¼Œåˆ†åˆ«æ˜¯ <strong>ç¡®ä¿å·²ç»è¢«Leaderæäº¤çš„ææ¡ˆæœ€ç»ˆèƒ½å¤Ÿè¢«æ‰€æœ‰çš„Followeræäº¤</strong> å’Œ <strong>è·³è¿‡é‚£äº›å·²ç»è¢«ä¸¢å¼ƒçš„ææ¡ˆ</strong> ã€‚</p><p>ç¡®ä¿å·²ç»è¢«Leaderæäº¤çš„ææ¡ˆæœ€ç»ˆèƒ½å¤Ÿè¢«æ‰€æœ‰çš„Followeræäº¤æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿ</p><p>å‡è®¾ <code>Leader (server2)</code> å‘é€ <code>commit</code> è¯·æ±‚ï¼ˆå¿˜äº†è¯·çœ‹ä¸Šé¢çš„æ¶ˆæ¯å¹¿æ’­æ¨¡å¼ï¼‰ï¼Œä»–å‘é€ç»™äº† <code>server3</code>ï¼Œç„¶åŽè¦å‘ç»™ <code>server1</code> çš„æ—¶å€™çªç„¶æŒ‚äº†ã€‚è¿™ä¸ªæ—¶å€™é‡æ–°é€‰ä¸¾çš„æ—¶å€™æˆ‘ä»¬å¦‚æžœæŠŠ <code>server1</code> ä½œä¸º <code>Leader</code> çš„è¯ï¼Œé‚£ä¹ˆè‚¯å®šä¼šäº§ç”Ÿæ•°æ®ä¸ä¸€è‡´æ€§ï¼Œå› ä¸º <code>server3</code> è‚¯å®šä¼šæäº¤åˆšåˆš <code>server2</code> å‘é€çš„ <code>commit</code> è¯·æ±‚çš„ææ¡ˆï¼Œè€Œ <code>server1</code> æ ¹æœ¬æ²¡æ”¶åˆ°æ‰€ä»¥ä¼šä¸¢å¼ƒã€‚</p><figure><img src="https://img-blog.csdnimg.cn/img_convert/ffcb12c6fb2bad76ac7105696655e85c.png" alt="å´©æºƒæ¢å¤" tabindex="0" loading="lazy"><figcaption>å´©æºƒæ¢å¤</figcaption></figure><p>é‚£æ€Žä¹ˆè§£å†³å‘¢ï¼Ÿ</p><p>èªæ˜Žçš„åŒå­¦è‚¯å®šä¼šè´¨ç–‘ï¼Œ<strong>è¿™ä¸ªæ—¶å€™ <code>server1</code> å·²ç»ä¸å¯èƒ½æˆä¸º <code>Leader</code> äº†ï¼Œå› ä¸º <code>server1</code> å’Œ <code>server3</code> è¿›è¡ŒæŠ•ç¥¨é€‰ä¸¾çš„æ—¶å€™ä¼šæ¯”è¾ƒ <code>ZXID</code> ï¼Œè€Œæ­¤æ—¶ <code>server3</code> çš„ <code>ZXID</code> è‚¯å®šæ¯” <code>server1</code> çš„å¤§äº†</strong>ã€‚(ä¸ç†è§£å¯ä»¥çœ‹å‰é¢çš„é€‰ä¸¾ç®—æ³•)</p><p>é‚£ä¹ˆè·³è¿‡é‚£äº›å·²ç»è¢«ä¸¢å¼ƒçš„ææ¡ˆåˆæ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿ</p><p>å‡è®¾ <code>Leader (server2)</code> æ­¤æ—¶åŒæ„äº†ææ¡ˆN1ï¼Œè‡ªèº«æäº¤äº†è¿™ä¸ªäº‹åŠ¡å¹¶ä¸”è¦å‘é€ç»™æ‰€æœ‰ <code>Follower</code> è¦ <code>commit</code> çš„è¯·æ±‚ï¼Œå´åœ¨è¿™ä¸ªæ—¶å€™æŒ‚äº†ï¼Œæ­¤æ—¶è‚¯å®šè¦é‡æ–°è¿›è¡Œ <code>Leader</code> çš„é€‰ä¸¾ï¼Œæ¯”å¦‚è¯´æ­¤æ—¶é€‰ <code>server1</code> ä¸º <code>Leader</code> ï¼ˆè¿™æ— æ‰€è°“ï¼‰ã€‚ä½†æ˜¯è¿‡äº†ä¸€ä¼šï¼Œè¿™ä¸ª <strong>æŒ‚æŽ‰çš„ <code>Leader</code> åˆé‡æ–°æ¢å¤äº†</strong> ï¼Œæ­¤æ—¶å®ƒè‚¯å®šä¼šä½œä¸º <code>Follower</code> çš„èº«ä»½è¿›å…¥é›†ç¾¤ä¸­ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯åˆšåˆš <code>server2</code> å·²ç»åŒæ„æäº¤äº†ææ¡ˆN1ï¼Œä½†å…¶ä»– <code>server</code> å¹¶æ²¡æœ‰æ”¶åˆ°å®ƒçš„ <code>commit</code> ä¿¡æ¯ï¼Œæ‰€ä»¥å…¶ä»– <code>server</code> ä¸å¯èƒ½å†æäº¤è¿™ä¸ªææ¡ˆN1äº†ï¼Œè¿™æ ·å°±ä¼šå‡ºçŽ°æ•°æ®ä¸ä¸€è‡´æ€§é—®é¢˜äº†ï¼Œæ‰€ä»¥ <strong>è¯¥ææ¡ˆN1æœ€ç»ˆéœ€è¦è¢«æŠ›å¼ƒæŽ‰</strong> ã€‚</p><figure><img src="https://img-blog.csdnimg.cn/img_convert/abb6efc7d4df9c82b162cbecb129a6e3.png" alt="å´©æºƒæ¢å¤" tabindex="0" loading="lazy"><figcaption>å´©æºƒæ¢å¤</figcaption></figure><h2 id="_6-zookeeperçš„å‡ ä¸ªç†è®ºçŸ¥è¯†" tabindex="-1"><a class="header-anchor" href="#_6-zookeeperçš„å‡ ä¸ªç†è®ºçŸ¥è¯†" aria-hidden="true">#</a> 6. Zookeeperçš„å‡ ä¸ªç†è®ºçŸ¥è¯†</h2><p>äº†è§£äº† <code>ZAB</code> åè®®è¿˜ä¸å¤Ÿï¼Œå®ƒä»…ä»…æ˜¯ <code>Zookeeper</code> å†…éƒ¨å®žçŽ°çš„ä¸€ç§æ–¹å¼ï¼Œè€Œæˆ‘ä»¬å¦‚ä½•é€šè¿‡ <code>Zookeeper</code> åŽ»åšä¸€äº›å…¸åž‹çš„åº”ç”¨åœºæ™¯å‘¢ï¼Ÿæ¯”å¦‚è¯´é›†ç¾¤ç®¡ç†ï¼Œåˆ†å¸ƒå¼é”ï¼Œ<code>Master</code> é€‰ä¸¾ç­‰ç­‰ã€‚</p><p>è¿™å°±æ¶‰åŠåˆ°å¦‚ä½•ä½¿ç”¨ <code>Zookeeper</code> äº†ï¼Œä½†åœ¨ä½¿ç”¨ä¹‹å‰æˆ‘ä»¬è¿˜éœ€è¦æŽŒæ¡å‡ ä¸ªæ¦‚å¿µã€‚æ¯”å¦‚ <code>Zookeeper</code> çš„ <strong>æ•°æ®æ¨¡åž‹</strong> ã€<strong>ä¼šè¯æœºåˆ¶</strong>ã€<strong>ACL</strong>ã€<strong>Watcheræœºåˆ¶</strong> ç­‰ç­‰ã€‚</p><h3 id="_6-1-æ•°æ®æ¨¡åž‹" tabindex="-1"><a class="header-anchor" href="#_6-1-æ•°æ®æ¨¡åž‹" aria-hidden="true">#</a> 6.1. æ•°æ®æ¨¡åž‹</h3><p><code>zookeeper</code> æ•°æ®å­˜å‚¨ç»“æž„ä¸Žæ ‡å‡†çš„ <code>Unix</code> æ–‡ä»¶ç³»ç»Ÿéžå¸¸ç›¸ä¼¼ï¼Œéƒ½æ˜¯åœ¨æ ¹èŠ‚ç‚¹ä¸‹æŒ‚å¾ˆå¤šå­èŠ‚ç‚¹(æ ‘åž‹)ã€‚ä½†æ˜¯ <code>zookeeper</code> ä¸­æ²¡æœ‰æ–‡ä»¶ç³»ç»Ÿä¸­ç›®å½•ä¸Žæ–‡ä»¶çš„æ¦‚å¿µï¼Œè€Œæ˜¯ <strong>ä½¿ç”¨äº† <code>znode</code> ä½œä¸ºæ•°æ®èŠ‚ç‚¹</strong> ã€‚<code>znode</code> æ˜¯ <code>zookeeper</code> ä¸­çš„æœ€å°æ•°æ®å•å…ƒï¼Œæ¯ä¸ª <code>znode</code> ä¸Šéƒ½å¯ä»¥ä¿å­˜æ•°æ®ï¼ŒåŒæ—¶è¿˜å¯ä»¥æŒ‚è½½å­èŠ‚ç‚¹ï¼Œå½¢æˆä¸€ä¸ªæ ‘å½¢åŒ–å‘½åç©ºé—´ã€‚</p><figure><img src="https://img-blog.csdnimg.cn/img_convert/8f35dba8c44c4a10d81e3395df971ce7.png" alt="zkæ•°æ®æ¨¡åž‹" tabindex="0" loading="lazy"><figcaption>zkæ•°æ®æ¨¡åž‹</figcaption></figure><p>æ¯ä¸ª <code>znode</code> éƒ½æœ‰è‡ªå·±æ‰€å±žçš„ <strong>èŠ‚ç‚¹ç±»åž‹</strong> å’Œ <strong>èŠ‚ç‚¹çŠ¶æ€</strong>ã€‚</p><p>å…¶ä¸­èŠ‚ç‚¹ç±»åž‹å¯ä»¥åˆ†ä¸º <strong>æŒä¹…èŠ‚ç‚¹</strong>ã€<strong>æŒä¹…é¡ºåºèŠ‚ç‚¹</strong>ã€<strong>ä¸´æ—¶èŠ‚ç‚¹</strong> å’Œ <strong>ä¸´æ—¶é¡ºåºèŠ‚ç‚¹</strong>ã€‚</p><ul><li>æŒä¹…èŠ‚ç‚¹ï¼šä¸€æ—¦åˆ›å»ºå°±ä¸€ç›´å­˜åœ¨ï¼Œç›´åˆ°å°†å…¶åˆ é™¤ã€‚</li><li>æŒä¹…é¡ºåºèŠ‚ç‚¹ï¼šä¸€ä¸ªçˆ¶èŠ‚ç‚¹å¯ä»¥ä¸ºå…¶å­èŠ‚ç‚¹ <strong>ç»´æŠ¤ä¸€ä¸ªåˆ›å»ºçš„å…ˆåŽé¡ºåº</strong> ï¼Œè¿™ä¸ªé¡ºåºä½“çŽ°åœ¨ <strong>èŠ‚ç‚¹åç§°</strong> ä¸Šï¼Œæ˜¯èŠ‚ç‚¹åç§°åŽè‡ªåŠ¨æ·»åŠ ä¸€ä¸ªç”± 10 ä½æ•°å­—ç»„æˆçš„æ•°å­—ä¸²ï¼Œä»Ž 0 å¼€å§‹è®¡æ•°ã€‚</li><li>ä¸´æ—¶èŠ‚ç‚¹ï¼šä¸´æ—¶èŠ‚ç‚¹çš„ç”Ÿå‘½å‘¨æœŸæ˜¯ä¸Ž <strong>å®¢æˆ·ç«¯ä¼šè¯</strong> ç»‘å®šçš„ï¼Œ<strong>ä¼šè¯æ¶ˆå¤±åˆ™èŠ‚ç‚¹æ¶ˆå¤±</strong> ã€‚ä¸´æ—¶èŠ‚ç‚¹ <strong>åªèƒ½åšå¶å­èŠ‚ç‚¹</strong> ï¼Œä¸èƒ½åˆ›å»ºå­èŠ‚ç‚¹ã€‚</li><li>ä¸´æ—¶é¡ºåºèŠ‚ç‚¹ï¼šçˆ¶èŠ‚ç‚¹å¯ä»¥åˆ›å»ºä¸€ä¸ªç»´æŒäº†é¡ºåºçš„ä¸´æ—¶èŠ‚ç‚¹(å’Œå‰é¢çš„æŒä¹…é¡ºåºæ€§èŠ‚ç‚¹ä¸€æ ·)ã€‚</li></ul><p>èŠ‚ç‚¹çŠ¶æ€ä¸­åŒ…å«äº†å¾ˆå¤šèŠ‚ç‚¹çš„å±žæ€§æ¯”å¦‚ <code>czxid</code> ã€<code>mzxid</code> ç­‰ç­‰ï¼Œåœ¨ <code>zookeeper</code> ä¸­æ˜¯ä½¿ç”¨ <code>Stat</code> è¿™ä¸ªç±»æ¥ç»´æŠ¤çš„ã€‚ä¸‹é¢æˆ‘åˆ—ä¸¾ä¸€äº›å±žæ€§è§£é‡Šã€‚</p><ul><li><code>czxid</code>ï¼š<code>Created ZXID</code>ï¼Œè¯¥æ•°æ®èŠ‚ç‚¹è¢« <strong>åˆ›å»º</strong> æ—¶çš„äº‹åŠ¡IDã€‚</li><li><code>mzxid</code>ï¼š<code>Modified ZXID</code>ï¼ŒèŠ‚ç‚¹ <strong>æœ€åŽä¸€æ¬¡è¢«æ›´æ–°æ—¶</strong> çš„äº‹åŠ¡IDã€‚</li><li><code>ctime</code>ï¼š<code>Created Time</code>ï¼Œè¯¥èŠ‚ç‚¹è¢«åˆ›å»ºçš„æ—¶é—´ã€‚</li><li><code>mtime</code>ï¼š <code>Modified Time</code>ï¼Œè¯¥èŠ‚ç‚¹æœ€åŽä¸€æ¬¡è¢«ä¿®æ”¹çš„æ—¶é—´ã€‚</li><li><code>version</code>ï¼šèŠ‚ç‚¹çš„ç‰ˆæœ¬å·ã€‚</li><li><code>cversion</code>ï¼š<strong>å­èŠ‚ç‚¹</strong> çš„ç‰ˆæœ¬å·ã€‚</li><li><code>aversion</code>ï¼šèŠ‚ç‚¹çš„ <code>ACL</code> ç‰ˆæœ¬å·ã€‚</li><li><code>ephemeralOwner</code>ï¼šåˆ›å»ºè¯¥èŠ‚ç‚¹çš„ä¼šè¯çš„ <code>sessionID</code> ï¼Œå¦‚æžœè¯¥èŠ‚ç‚¹ä¸ºæŒä¹…èŠ‚ç‚¹ï¼Œè¯¥å€¼ä¸º0ã€‚</li><li><code>dataLength</code>ï¼šèŠ‚ç‚¹æ•°æ®å†…å®¹çš„é•¿åº¦ã€‚</li><li><code>numChildre</code>ï¼šè¯¥èŠ‚ç‚¹çš„å­èŠ‚ç‚¹ä¸ªæ•°ï¼Œå¦‚æžœä¸ºä¸´æ—¶èŠ‚ç‚¹ä¸º0ã€‚</li><li><code>pzxid</code>ï¼šè¯¥èŠ‚ç‚¹å­èŠ‚ç‚¹åˆ—è¡¨æœ€åŽä¸€æ¬¡è¢«ä¿®æ”¹æ—¶çš„äº‹åŠ¡IDï¼Œæ³¨æ„æ˜¯å­èŠ‚ç‚¹çš„ <strong>åˆ—è¡¨</strong> ï¼Œä¸æ˜¯å†…å®¹ã€‚</li></ul><h3 id="_6-2-ä¼šè¯" tabindex="-1"><a class="header-anchor" href="#_6-2-ä¼šè¯" aria-hidden="true">#</a> 6.2. ä¼šè¯</h3><p>æˆ‘æƒ³è¿™ä¸ªå¯¹äºŽåŽç«¯å¼€å‘çš„æœ‹å‹è‚¯å®šä¸é™Œç”Ÿï¼Œä¸å°±æ˜¯ <code>session</code> å—ï¼Ÿåªä¸è¿‡ <code>zk</code> å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯æ˜¯é€šè¿‡ <strong><code>TCP</code> é•¿è¿žæŽ¥</strong> ç»´æŒçš„ä¼šè¯æœºåˆ¶ï¼Œå…¶å®žå¯¹äºŽä¼šè¯æ¥è¯´ä½ å¯ä»¥ç†è§£ä¸º <strong>ä¿æŒè¿žæŽ¥çŠ¶æ€</strong> ã€‚</p><p>åœ¨ <code>zookeeper</code> ä¸­ï¼Œä¼šè¯è¿˜æœ‰å¯¹åº”çš„äº‹ä»¶ï¼Œæ¯”å¦‚ <code>CONNECTION_LOSS è¿žæŽ¥ä¸¢å¤±äº‹ä»¶</code> ã€<code>SESSION_MOVED ä¼šè¯è½¬ç§»äº‹ä»¶</code> ã€<code>SESSION_EXPIRED ä¼šè¯è¶…æ—¶å¤±æ•ˆäº‹ä»¶</code> ã€‚</p><h3 id="_6-3-acl" tabindex="-1"><a class="header-anchor" href="#_6-3-acl" aria-hidden="true">#</a> 6.3. ACL</h3><p><code>ACL</code> ä¸º <code>Access Control Lists</code> ï¼Œå®ƒæ˜¯ä¸€ç§æƒé™æŽ§åˆ¶ã€‚åœ¨ <code>zookeeper</code> ä¸­å®šä¹‰äº†5ç§æƒé™ï¼Œå®ƒä»¬åˆ†åˆ«ä¸ºï¼š</p><ul><li><code>CREATE</code> ï¼šåˆ›å»ºå­èŠ‚ç‚¹çš„æƒé™ã€‚</li><li><code>READ</code>ï¼šèŽ·å–èŠ‚ç‚¹æ•°æ®å’Œå­èŠ‚ç‚¹åˆ—è¡¨çš„æƒé™ã€‚</li><li><code>WRITE</code>ï¼šæ›´æ–°èŠ‚ç‚¹æ•°æ®çš„æƒé™ã€‚</li><li><code>DELETE</code>ï¼šåˆ é™¤å­èŠ‚ç‚¹çš„æƒé™ã€‚</li><li><code>ADMIN</code>ï¼šè®¾ç½®èŠ‚ç‚¹ ACL çš„æƒé™ã€‚</li></ul><h3 id="_6-4-watcheræœºåˆ¶" tabindex="-1"><a class="header-anchor" href="#_6-4-watcheræœºåˆ¶" aria-hidden="true">#</a> 6.4. Watcheræœºåˆ¶</h3><p><code>Watcher</code> ä¸ºäº‹ä»¶ç›‘å¬å™¨ï¼Œæ˜¯ <code>zk</code> éžå¸¸é‡è¦çš„ä¸€ä¸ªç‰¹æ€§ï¼Œå¾ˆå¤šåŠŸèƒ½éƒ½ä¾èµ–äºŽå®ƒï¼Œå®ƒæœ‰ç‚¹ç±»ä¼¼äºŽè®¢é˜…çš„æ–¹å¼ï¼Œå³å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯ <strong>æ³¨å†Œ</strong> æŒ‡å®šçš„ <code>watcher</code> ï¼Œå½“æœåŠ¡ç«¯ç¬¦åˆäº† <code>watcher</code> çš„æŸäº›äº‹ä»¶æˆ–è¦æ±‚åˆ™ä¼š <strong>å‘å®¢æˆ·ç«¯å‘é€äº‹ä»¶é€šçŸ¥</strong> ï¼Œå®¢æˆ·ç«¯æ”¶åˆ°é€šçŸ¥åŽæ‰¾åˆ°è‡ªå·±å®šä¹‰çš„ <code>Watcher</code> ç„¶åŽ <strong>æ‰§è¡Œç›¸åº”çš„å›žè°ƒæ–¹æ³•</strong> ã€‚</p><figure><img src="https://img-blog.csdnimg.cn/img_convert/241ab8cc37571034fa984322b753c7ba.png" alt="watcheræœºåˆ¶" tabindex="0" loading="lazy"><figcaption>watcheræœºåˆ¶</figcaption></figure><h2 id="_7-zookeeperçš„å‡ ä¸ªå…¸åž‹åº”ç”¨åœºæ™¯" tabindex="-1"><a class="header-anchor" href="#_7-zookeeperçš„å‡ ä¸ªå…¸åž‹åº”ç”¨åœºæ™¯" aria-hidden="true">#</a> 7. Zookeeperçš„å‡ ä¸ªå…¸åž‹åº”ç”¨åœºæ™¯</h2><p>å‰é¢è¯´äº†è¿™ä¹ˆå¤šçš„ç†è®ºçŸ¥è¯†ï¼Œä½ å¯èƒ½å¬å¾—ä¸€å¤´é›¾æ°´ï¼Œè¿™äº›çŽ©æ„æœ‰å•¥ç”¨ï¼Ÿèƒ½å¹²å•¥äº‹ï¼Ÿåˆ«æ€¥ï¼Œå¬æˆ‘æ…¢æ…¢é“æ¥ã€‚</p><figure><img src="https://img-blog.csdnimg.cn/img_convert/9c9bd2a892e23e0b7582370c50117d8c.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="_7-1-é€‰ä¸»" tabindex="-1"><a class="header-anchor" href="#_7-1-é€‰ä¸»" aria-hidden="true">#</a> 7.1. é€‰ä¸»</h3><p>è¿˜è®°å¾—ä¸Šé¢æˆ‘ä»¬çš„æ‰€è¯´çš„ä¸´æ—¶èŠ‚ç‚¹å—ï¼Ÿå› ä¸º <code>Zookeeper</code> çš„å¼ºä¸€è‡´æ€§ï¼Œèƒ½å¤Ÿå¾ˆå¥½åœ°åœ¨ä¿è¯ <strong>åœ¨é«˜å¹¶å‘çš„æƒ…å†µä¸‹ä¿è¯èŠ‚ç‚¹åˆ›å»ºçš„å…¨å±€å”¯ä¸€æ€§</strong> (å³æ— æ³•é‡å¤åˆ›å»ºåŒæ ·çš„èŠ‚ç‚¹)ã€‚</p><p>åˆ©ç”¨è¿™ä¸ªç‰¹æ€§ï¼Œæˆ‘ä»¬å¯ä»¥ <strong>è®©å¤šä¸ªå®¢æˆ·ç«¯åˆ›å»ºä¸€ä¸ªæŒ‡å®šçš„èŠ‚ç‚¹</strong> ï¼Œåˆ›å»ºæˆåŠŸçš„å°±æ˜¯ <code>master</code>ã€‚</p><p>ä½†æ˜¯ï¼Œå¦‚æžœè¿™ä¸ª <code>master</code> æŒ‚äº†æ€Žä¹ˆåŠžï¼Ÿï¼Ÿï¼Ÿ</p><p>ä½ æƒ³æƒ³ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦åˆ›å»ºä¸´æ—¶èŠ‚ç‚¹ï¼Ÿè¿˜è®°å¾—ä¸´æ—¶èŠ‚ç‚¹çš„ç”Ÿå‘½å‘¨æœŸå—ï¼Ÿ<code>master</code> æŒ‚äº†æ˜¯ä¸æ˜¯ä»£è¡¨ä¼šè¯æ–­äº†ï¼Ÿä¼šè¯æ–­äº†æ˜¯ä¸æ˜¯æ„å‘³ç€è¿™ä¸ªèŠ‚ç‚¹æ²¡äº†ï¼Ÿè¿˜è®°å¾— <code>watcher</code> å—ï¼Ÿæˆ‘ä»¬æ˜¯ä¸æ˜¯å¯ä»¥ <strong>è®©å…¶ä»–ä¸æ˜¯ <code>master</code> çš„èŠ‚ç‚¹ç›‘å¬èŠ‚ç‚¹çš„çŠ¶æ€</strong> ï¼Œæ¯”å¦‚è¯´æˆ‘ä»¬ç›‘å¬è¿™ä¸ªä¸´æ—¶èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ï¼Œå¦‚æžœå­èŠ‚ç‚¹ä¸ªæ•°å˜äº†å°±ä»£è¡¨ <code>master</code> æŒ‚äº†ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬ <strong>è§¦å‘å›žè°ƒå‡½æ•°è¿›è¡Œé‡æ–°é€‰ä¸¾</strong> ï¼Œæˆ–è€…æˆ‘ä»¬ç›´æŽ¥ç›‘å¬èŠ‚ç‚¹çš„çŠ¶æ€ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡èŠ‚ç‚¹æ˜¯å¦å·²ç»å¤±åŽ»è¿žæŽ¥æ¥åˆ¤æ–­ <code>master</code> æ˜¯å¦æŒ‚äº†ç­‰ç­‰ã€‚</p><figure><img src="https://img-blog.csdnimg.cn/img_convert/a94707028c5581c815f72fba0f50f43a.png" alt="é€‰ä¸»" tabindex="0" loading="lazy"><figcaption>é€‰ä¸»</figcaption></figure><p>æ€»çš„æ¥è¯´ï¼Œæˆ‘ä»¬å¯ä»¥å®Œå…¨ <strong>åˆ©ç”¨ ä¸´æ—¶èŠ‚ç‚¹ã€èŠ‚ç‚¹çŠ¶æ€ å’Œ <code>watcher</code> æ¥å®žçŽ°é€‰ä¸»çš„åŠŸèƒ½</strong>ï¼Œä¸´æ—¶èŠ‚ç‚¹ä¸»è¦ç”¨æ¥é€‰ä¸¾ï¼ŒèŠ‚ç‚¹çŠ¶æ€å’Œ<code>watcher</code> å¯ä»¥ç”¨æ¥åˆ¤æ–­ <code>master</code> çš„æ´»æ€§å’Œè¿›è¡Œé‡æ–°é€‰ä¸¾ã€‚</p><h3 id="_7-2-åˆ†å¸ƒå¼é”" tabindex="-1"><a class="header-anchor" href="#_7-2-åˆ†å¸ƒå¼é”" aria-hidden="true">#</a> 7.2. åˆ†å¸ƒå¼é”</h3><p>åˆ†å¸ƒå¼é”çš„å®žçŽ°æ–¹å¼æœ‰å¾ˆå¤šç§ï¼Œæ¯”å¦‚ <code>Redis</code> ã€æ•°æ®åº“ ã€<code>zookeeper</code> ç­‰ã€‚ä¸ªäººè®¤ä¸º <code>zookeeper</code> åœ¨å®žçŽ°åˆ†å¸ƒå¼é”è¿™æ–¹é¢æ˜¯éžå¸¸éžå¸¸ç®€å•çš„ã€‚</p><p>ä¸Šé¢æˆ‘ä»¬å·²ç»æåˆ°è¿‡äº† <strong>zkåœ¨é«˜å¹¶å‘çš„æƒ…å†µä¸‹ä¿è¯èŠ‚ç‚¹åˆ›å»ºçš„å…¨å±€å”¯ä¸€æ€§</strong>ï¼Œè¿™çŽ©æ„ä¸€çœ‹å°±çŸ¥é“èƒ½å¹²å•¥äº†ã€‚å®žçŽ°äº’æ–¥é”å‘—ï¼Œåˆå› ä¸ºèƒ½åœ¨åˆ†å¸ƒå¼çš„æƒ…å†µä¸‹ï¼Œæ‰€ä»¥èƒ½å®žçŽ°åˆ†å¸ƒå¼é”å‘—ã€‚</p><p>å¦‚ä½•å®žçŽ°å‘¢ï¼Ÿè¿™çŽ©æ„å…¶å®žè·Ÿé€‰ä¸»åŸºæœ¬ä¸€æ ·ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åˆ©ç”¨ä¸´æ—¶èŠ‚ç‚¹çš„åˆ›å»ºæ¥å®žçŽ°ã€‚</p><p>é¦–å…ˆè‚¯å®šæ˜¯å¦‚ä½•èŽ·å–é”ï¼Œå› ä¸ºåˆ›å»ºèŠ‚ç‚¹çš„å”¯ä¸€æ€§ï¼Œæˆ‘ä»¬å¯ä»¥è®©å¤šä¸ªå®¢æˆ·ç«¯åŒæ—¶åˆ›å»ºä¸€ä¸ªä¸´æ—¶èŠ‚ç‚¹ï¼Œ<strong>åˆ›å»ºæˆåŠŸçš„å°±è¯´æ˜ŽèŽ·å–åˆ°äº†é”</strong> ã€‚ç„¶åŽæ²¡æœ‰èŽ·å–åˆ°é”çš„å®¢æˆ·ç«¯ä¹Ÿåƒä¸Šé¢é€‰ä¸»çš„éžä¸»èŠ‚ç‚¹åˆ›å»ºä¸€ä¸ª <code>watcher</code> è¿›è¡ŒèŠ‚ç‚¹çŠ¶æ€çš„ç›‘å¬ï¼Œå¦‚æžœè¿™ä¸ªäº’æ–¥é”è¢«é‡Šæ”¾äº†ï¼ˆå¯èƒ½èŽ·å–é”çš„å®¢æˆ·ç«¯å®•æœºäº†ï¼Œæˆ–è€…é‚£ä¸ªå®¢æˆ·ç«¯ä¸»åŠ¨é‡Šæ”¾äº†é”ï¼‰å¯ä»¥è°ƒç”¨å›žè°ƒå‡½æ•°é‡æ–°èŽ·å¾—é”ã€‚</p><blockquote><p><code>zk</code> ä¸­ä¸éœ€è¦å‘ <code>redis</code> é‚£æ ·è€ƒè™‘é”å¾—ä¸åˆ°é‡Šæ”¾çš„é—®é¢˜äº†ï¼Œå› ä¸ºå½“å®¢æˆ·ç«¯æŒ‚äº†ï¼ŒèŠ‚ç‚¹ä¹ŸæŒ‚äº†ï¼Œé”ä¹Ÿé‡Šæ”¾äº†ã€‚æ˜¯ä¸æ˜¯å¾ˆç®€å•ï¼Ÿ</p></blockquote><p>é‚£èƒ½ä¸èƒ½ä½¿ç”¨ <code>zookeeper</code> åŒæ—¶å®žçŽ° <strong>å…±äº«é”å’Œç‹¬å é”</strong> å‘¢ï¼Ÿç­”æ¡ˆæ˜¯å¯ä»¥çš„ï¼Œä¸è¿‡ç¨å¾®æœ‰ç‚¹å¤æ‚è€Œå·²ã€‚</p><p>è¿˜è®°å¾— <strong>æœ‰åºçš„èŠ‚ç‚¹</strong> å—ï¼Ÿ</p><p>è¿™ä¸ªæ—¶å€™æˆ‘è§„å®šæ‰€æœ‰åˆ›å»ºèŠ‚ç‚¹å¿…é¡»æœ‰åºï¼Œå½“ä½ æ˜¯è¯»è¯·æ±‚ï¼ˆè¦èŽ·å–å…±äº«é”ï¼‰çš„è¯ï¼Œå¦‚æžœ <strong>æ²¡æœ‰æ¯”è‡ªå·±æ›´å°çš„èŠ‚ç‚¹ï¼Œæˆ–æ¯”è‡ªå·±å°çš„èŠ‚ç‚¹éƒ½æ˜¯è¯»è¯·æ±‚</strong> ï¼Œåˆ™å¯ä»¥èŽ·å–åˆ°è¯»é”ï¼Œç„¶åŽå°±å¯ä»¥å¼€å§‹è¯»äº†ã€‚<strong>è‹¥æ¯”è‡ªå·±å°çš„èŠ‚ç‚¹ä¸­æœ‰å†™è¯·æ±‚</strong> ï¼Œåˆ™å½“å‰å®¢æˆ·ç«¯æ— æ³•èŽ·å–åˆ°è¯»é”ï¼Œåªèƒ½ç­‰å¾…å‰é¢çš„å†™è¯·æ±‚å®Œæˆã€‚</p><p>å¦‚æžœä½ æ˜¯å†™è¯·æ±‚ï¼ˆèŽ·å–ç‹¬å é”ï¼‰ï¼Œè‹¥ <strong>æ²¡æœ‰æ¯”è‡ªå·±æ›´å°çš„èŠ‚ç‚¹</strong> ï¼Œåˆ™è¡¨ç¤ºå½“å‰å®¢æˆ·ç«¯å¯ä»¥ç›´æŽ¥èŽ·å–åˆ°å†™é”ï¼Œå¯¹æ•°æ®è¿›è¡Œä¿®æ”¹ã€‚è‹¥å‘çŽ° <strong>æœ‰æ¯”è‡ªå·±æ›´å°çš„èŠ‚ç‚¹ï¼Œæ— è®ºæ˜¯è¯»æ“ä½œè¿˜æ˜¯å†™æ“ä½œï¼Œå½“å‰å®¢æˆ·ç«¯éƒ½æ— æ³•èŽ·å–åˆ°å†™é”</strong> ï¼Œç­‰å¾…æ‰€æœ‰å‰é¢çš„æ“ä½œå®Œæˆã€‚</p><p>è¿™å°±å¾ˆå¥½åœ°åŒæ—¶å®žçŽ°äº†å…±äº«é”å’Œç‹¬å é”ï¼Œå½“ç„¶è¿˜æœ‰ä¼˜åŒ–çš„åœ°æ–¹ï¼Œæ¯”å¦‚å½“ä¸€ä¸ªé”å¾—åˆ°é‡Šæ”¾å®ƒä¼šé€šçŸ¥æ‰€æœ‰ç­‰å¾…çš„å®¢æˆ·ç«¯ä»Žè€Œé€ æˆ <strong>ç¾Šç¾¤æ•ˆåº”</strong> ã€‚æ­¤æ—¶ä½ å¯ä»¥é€šè¿‡è®©ç­‰å¾…çš„èŠ‚ç‚¹åªç›‘å¬ä»–ä»¬å‰é¢çš„èŠ‚ç‚¹ã€‚</p><p>å…·ä½“æ€Žä¹ˆåšå‘¢ï¼Ÿå…¶å®žä¹Ÿå¾ˆç®€å•ï¼Œä½ å¯ä»¥è®© <strong>è¯»è¯·æ±‚ç›‘å¬æ¯”è‡ªå·±å°çš„æœ€åŽä¸€ä¸ªå†™è¯·æ±‚èŠ‚ç‚¹ï¼Œå†™è¯·æ±‚åªç›‘å¬æ¯”è‡ªå·±å°çš„æœ€åŽä¸€ä¸ªèŠ‚ç‚¹</strong> ï¼Œæ„Ÿå…´è¶£çš„å°ä¼™ä¼´å¯ä»¥è‡ªå·±åŽ»ç ”ç©¶ä¸€ä¸‹ã€‚</p><h3 id="_7-3-å‘½åæœåŠ¡" tabindex="-1"><a class="header-anchor" href="#_7-3-å‘½åæœåŠ¡" aria-hidden="true">#</a> 7.3. å‘½åæœåŠ¡</h3><p>å¦‚ä½•ç»™ä¸€ä¸ªå¯¹è±¡è®¾ç½®IDï¼Œå¤§å®¶å¯èƒ½éƒ½ä¼šæƒ³åˆ° <code>UUID</code>ï¼Œä½†æ˜¯ <code>UUID</code> æœ€å¤§çš„é—®é¢˜å°±åœ¨äºŽå®ƒå¤ªé•¿äº†ã€‚ã€‚ã€‚(å¤ªé•¿ä¸ä¸€å®šæ˜¯å¥½äº‹ï¼Œå˜¿å˜¿å˜¿)ã€‚é‚£ä¹ˆåœ¨æ¡ä»¶å…è®¸çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬èƒ½ä¸èƒ½ä½¿ç”¨ <code>zookeeper</code> æ¥å®žçŽ°å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬ä¹‹å‰æåˆ°è¿‡ <code>zookeeper</code> æ˜¯é€šè¿‡ <strong>æ ‘å½¢ç»“æž„</strong> æ¥å­˜å‚¨æ•°æ®èŠ‚ç‚¹çš„ï¼Œé‚£ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹äºŽæ¯ä¸ªèŠ‚ç‚¹çš„ <strong>å…¨è·¯å¾„</strong>ï¼Œå®ƒå¿…å®šæ˜¯å”¯ä¸€çš„ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨èŠ‚ç‚¹çš„å…¨è·¯å¾„ä½œä¸ºå‘½åæ–¹å¼äº†ã€‚è€Œä¸”æ›´é‡è¦çš„æ˜¯ï¼Œè·¯å¾„æ˜¯æˆ‘ä»¬å¯ä»¥è‡ªå·±å®šä¹‰çš„ï¼Œè¿™å¯¹äºŽæˆ‘ä»¬å¯¹æœ‰äº›æœ‰è¯­æ„çš„å¯¹è±¡çš„IDè®¾ç½®å¯ä»¥æ›´åŠ ä¾¿äºŽç†è§£ã€‚</p><h3 id="_7-4-é›†ç¾¤ç®¡ç†å’Œæ³¨å†Œä¸­å¿ƒ" tabindex="-1"><a class="header-anchor" href="#_7-4-é›†ç¾¤ç®¡ç†å’Œæ³¨å†Œä¸­å¿ƒ" aria-hidden="true">#</a> 7.4. é›†ç¾¤ç®¡ç†å’Œæ³¨å†Œä¸­å¿ƒ</h3><p>çœ‹åˆ°è¿™é‡Œæ˜¯ä¸æ˜¯è§‰å¾— <code>zookeeper</code> å®žåœ¨æ˜¯å¤ªå¼ºå¤§äº†ï¼Œå®ƒæ€Žä¹ˆèƒ½è¿™ä¹ˆèƒ½å¹²ï¼</p><p>åˆ«æ€¥ï¼Œå®ƒèƒ½å¹²çš„äº‹æƒ…è¿˜å¾ˆå¤šå‘¢ã€‚å¯èƒ½æˆ‘ä»¬ä¼šæœ‰è¿™æ ·çš„éœ€æ±‚ï¼Œæˆ‘ä»¬éœ€è¦äº†è§£æ•´ä¸ªé›†ç¾¤ä¸­æœ‰å¤šå°‘æœºå™¨åœ¨å·¥ä½œï¼Œæˆ‘ä»¬æƒ³å¯¹é›†ç¾¤ä¸­çš„æ¯å°æœºå™¨çš„è¿è¡Œæ—¶çŠ¶æ€è¿›è¡Œæ•°æ®é‡‡é›†ï¼Œå¯¹é›†ç¾¤ä¸­æœºå™¨è¿›è¡Œä¸Šä¸‹çº¿æ“ä½œç­‰ç­‰ã€‚</p><p>è€Œ <code>zookeeper</code> å¤©ç„¶æ”¯æŒçš„ <code>watcher</code> å’Œ ä¸´æ—¶èŠ‚ç‚¹èƒ½å¾ˆå¥½çš„å®žçŽ°è¿™äº›éœ€æ±‚ã€‚æˆ‘ä»¬å¯ä»¥ä¸ºæ¯æ¡æœºå™¨åˆ›å»ºä¸´æ—¶èŠ‚ç‚¹ï¼Œå¹¶ç›‘æŽ§å…¶çˆ¶èŠ‚ç‚¹ï¼Œå¦‚æžœå­èŠ‚ç‚¹åˆ—è¡¨æœ‰å˜åŠ¨ï¼ˆæˆ‘ä»¬å¯èƒ½åˆ›å»ºåˆ é™¤äº†ä¸´æ—¶èŠ‚ç‚¹ï¼‰ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ä½¿ç”¨åœ¨å…¶çˆ¶èŠ‚ç‚¹ç»‘å®šçš„ <code>watcher</code> è¿›è¡ŒçŠ¶æ€ç›‘æŽ§å’Œå›žè°ƒã€‚</p><figure><img src="https://img-blog.csdnimg.cn/img_convert/6115820219c35c68bcb2c9a855ebace3.png" alt="é›†ç¾¤ç®¡ç†" tabindex="0" loading="lazy"><figcaption>é›†ç¾¤ç®¡ç†</figcaption></figure><p>è‡³äºŽæ³¨å†Œä¸­å¿ƒä¹Ÿå¾ˆç®€å•ï¼Œæˆ‘ä»¬åŒæ ·ä¹Ÿæ˜¯è®© <strong>æœåŠ¡æä¾›è€…</strong> åœ¨ <code>zookeeper</code> ä¸­åˆ›å»ºä¸€ä¸ªä¸´æ—¶èŠ‚ç‚¹å¹¶ä¸”å°†è‡ªå·±çš„ <code>ipã€portã€è°ƒç”¨æ–¹å¼</code> å†™å…¥èŠ‚ç‚¹ï¼Œå½“ <strong>æœåŠ¡æ¶ˆè´¹è€…</strong> éœ€è¦è¿›è¡Œè°ƒç”¨çš„æ—¶å€™ä¼š <strong>é€šè¿‡æ³¨å†Œä¸­å¿ƒæ‰¾åˆ°ç›¸åº”çš„æœåŠ¡çš„åœ°å€åˆ—è¡¨(IPç«¯å£ä»€ä¹ˆçš„)</strong> ï¼Œå¹¶ç¼“å­˜åˆ°æœ¬åœ°(æ–¹ä¾¿ä»¥åŽè°ƒç”¨)ï¼Œå½“æ¶ˆè´¹è€…è°ƒç”¨æœåŠ¡æ—¶ï¼Œä¸ä¼šå†åŽ»è¯·æ±‚æ³¨å†Œä¸­å¿ƒï¼Œè€Œæ˜¯ç›´æŽ¥é€šè¿‡è´Ÿè½½å‡è¡¡ç®—æ³•ä»Žåœ°å€åˆ—è¡¨ä¸­å–ä¸€ä¸ªæœåŠ¡æä¾›è€…çš„æœåŠ¡å™¨è°ƒç”¨æœåŠ¡ã€‚</p><p>å½“æœåŠ¡æä¾›è€…çš„æŸå°æœåŠ¡å™¨å®•æœºæˆ–ä¸‹çº¿æ—¶ï¼Œç›¸åº”çš„åœ°å€ä¼šä»ŽæœåŠ¡æä¾›è€…åœ°å€åˆ—è¡¨ä¸­ç§»é™¤ã€‚åŒæ—¶ï¼Œæ³¨å†Œä¸­å¿ƒä¼šå°†æ–°çš„æœåŠ¡åœ°å€åˆ—è¡¨å‘é€ç»™æœåŠ¡æ¶ˆè´¹è€…çš„æœºå™¨å¹¶ç¼“å­˜åœ¨æ¶ˆè´¹è€…æœ¬æœºï¼ˆå½“ç„¶ä½ å¯ä»¥è®©æ¶ˆè´¹è€…è¿›è¡ŒèŠ‚ç‚¹ç›‘å¬ï¼Œæˆ‘è®°å¾— <code>Eureka</code> ä¼šå…ˆè¯•é”™ï¼Œç„¶åŽå†æ›´æ–°ï¼‰ã€‚</p><figure><img src="https://img-blog.csdnimg.cn/img_convert/0b5b3911a7c2dae23391d17c91416b29.png" alt="æ³¨å†Œä¸­å¿ƒ" tabindex="0" loading="lazy"><figcaption>æ³¨å†Œä¸­å¿ƒ</figcaption></figure><h2 id="_8-æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#_8-æ€»ç»“" aria-hidden="true">#</a> 8. æ€»ç»“</h2><p>çœ‹åˆ°è¿™é‡Œçš„åŒå­¦å®žåœ¨æ˜¯å¤ªæœ‰è€å¿ƒäº†ðŸ‘ðŸ‘ðŸ‘ï¼Œå¦‚æžœè§‰å¾—æˆ‘å†™å¾—ä¸é”™çš„è¯ç‚¹ä¸ªèµžå“ˆã€‚</p><p>ä¸çŸ¥é“å¤§å®¶æ˜¯å¦è¿˜è®°å¾—æˆ‘è®²äº†ä»€ä¹ˆðŸ˜’ã€‚</p><figure><img src="https://img-blog.csdnimg.cn/img_convert/b0bde9f3979b8f19187e6c374ad98993.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>è¿™ç¯‡æ–‡ç« ä¸­æˆ‘å¸¦å¤§å®¶å…¥é—¨äº† <code>zookeeper</code> è¿™ä¸ªå¼ºå¤§çš„åˆ†å¸ƒå¼åè°ƒæ¡†æž¶ã€‚çŽ°åœ¨æˆ‘ä»¬æ¥ç®€å•æ¢³ç†ä¸€ä¸‹æ•´ç¯‡æ–‡ç« çš„å†…å®¹ã€‚</p><ul><li><p>åˆ†å¸ƒå¼ä¸Žé›†ç¾¤çš„åŒºåˆ«</p></li><li><p><code>2PC</code> ã€<code>3PC</code> ä»¥åŠ <code>paxos</code> ç®—æ³•è¿™äº›ä¸€è‡´æ€§æ¡†æž¶çš„åŽŸç†å’Œå®žçŽ°ã€‚</p></li><li><p><code>zookeeper</code> ä¸“é—¨çš„ä¸€è‡´æ€§ç®—æ³• <code>ZAB</code> åŽŸå­å¹¿æ’­åè®®çš„å†…å®¹ï¼ˆ<code>Leader</code> é€‰ä¸¾ã€å´©æºƒæ¢å¤ã€æ¶ˆæ¯å¹¿æ’­ï¼‰ã€‚</p></li><li><p><code>zookeeper</code> ä¸­çš„ä¸€äº›åŸºæœ¬æ¦‚å¿µï¼Œæ¯”å¦‚ <code>ACL</code>ï¼Œæ•°æ®èŠ‚ç‚¹ï¼Œä¼šè¯ï¼Œ<code>watcher</code>æœºåˆ¶ç­‰ç­‰ã€‚</p></li><li><p><code>zookeeper</code> çš„å…¸åž‹åº”ç”¨åœºæ™¯ï¼Œæ¯”å¦‚é€‰ä¸»ï¼Œæ³¨å†Œä¸­å¿ƒç­‰ç­‰ã€‚</p><p>å¦‚æžœå¿˜äº†å¯ä»¥å›žåŽ»çœ‹çœ‹å†æ¬¡ç†è§£ä¸€ä¸‹ï¼Œå¦‚æžœæœ‰ç–‘é—®å’Œå»ºè®®æ¬¢è¿Žæå‡ºðŸ¤ðŸ¤ðŸ¤ã€‚</p></li></ul></div><!--[--><!----><!--]--><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/began-zhao/begun-blog/edit/master/src/code/java/distributed-system/distributed-process-coordination/zookeeper/zookeeper-plus.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page on GitHub" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->Edit this page on GitHub<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item git-info"><div class="update-time"><span class="label">ä¸Šæ¬¡ç¼–è¾‘äºŽ: </span><!----></div><div class="contributors"><span class="label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="contributor" title="email: z-begun@outlook.com">z-begun</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a aria-label="ZooKeeper å®žæˆ˜" class="vp-link nav-link prev nav-link prev" href="/begun-blog/code/java/distributed-system/distributed-process-coordination/zookeeper/zookeeper-intro.html"><div class="hint"><span class="arrow start"></span>ä¸Šä¸€é¡µ</div><div class="link"><span class="font-icon icon iconfont icon-ZooKeeper" style=""></span>ZooKeeper å®žæˆ˜</div></a><a aria-label="ZooKeeper å®žæˆ˜" class="vp-link nav-link next nav-link next" href="/begun-blog/code/java/distributed-system/distributed-process-coordination/zookeeper/zookeeper-in-action.html"><div class="hint">ä¸‹ä¸€é¡µ<span class="arrow end"></span></div><div class="link">ZooKeeper å®žæˆ˜<span class="font-icon icon iconfont icon-ZooKeeper" style=""></span></div></a></nav><div id="comment" class="waline-wrapper" darkmode="false" style="display:block;"><div data-waline provider="Waline"><!--v-if--><div class="wl-comment"><!--v-if--><div class="wl-panel"><div class="wl-header item3"><!--[--><div class="wl-header-item"><label for="wl-nick">æ˜µç§°</label><input id="wl-nick" class="wl-input wl-nick" name="nick" type="text" value></div><div class="wl-header-item"><label for="wl-mail">é‚®ç®±</label><input id="wl-mail" class="wl-input wl-mail" name="mail" type="email" value></div><div class="wl-header-item"><label for="wl-link">ç½‘å€</label><input id="wl-link" class="wl-input wl-link" name="link" type="text" value></div><!--]--></div><textarea id="wl-edit" class="wl-editor" placeholder="è¯·ç•™è¨€ã€‚(å¡«å†™é‚®ç®±å¯åœ¨è¢«å›žå¤æ—¶æ”¶åˆ°é‚®ä»¶æé†’)"></textarea><div class="wl-preview" style="display:none;"><hr><h4>é¢„è§ˆ:</h4><div class="wl-content"></div></div><div class="wl-footer"><div class="wl-actions"><a href="https://guides.github.com/features/mastering-markdown/" title="Markdown Guide" aria-label="Markdown is supported" class="wl-action" target="_blank" rel="noopener noreferrer"><svg width="16" height="16" ariaHidden="true"><path d="M14.85 3H1.15C.52 3 0 3.52 0 4.15v7.69C0 12.48.52 13 1.15 13h13.69c.64 0 1.15-.52 1.15-1.15v-7.7C16 3.52 15.48 3 14.85 3zM9 11H7V8L5.5 9.92 4 8v3H2V5h2l1.5 2L7 5h2v6zm2.99.5L9.5 8H11V5h2v3h1.5l-2.51 3.5z" fill="currentColor"></path></svg></a><button type="button" class="wl-action" title="è¡¨æƒ…" style="display:none;"><svg viewBox="0 0 1024 1024" width="24" height="24"><path d="M563.2 463.3 677 540c1.7 1.2 3.7 1.8 5.8 1.8.7 0 1.4-.1 2-.2 2.7-.5 5.1-2.1 6.6-4.4l25.3-37.8c1.5-2.3 2.1-5.1 1.6-7.8s-2.1-5.1-4.4-6.6l-73.6-49.1 73.6-49.1c2.3-1.5 3.9-3.9 4.4-6.6.5-2.7 0-5.5-1.6-7.8l-25.3-37.8a10.1 10.1 0 0 0-6.6-4.4c-.7-.1-1.3-.2-2-.2-2.1 0-4.1.6-5.8 1.8l-113.8 76.6c-9.2 6.2-14.7 16.4-14.7 27.5.1 11 5.5 21.3 14.7 27.4zM387 348.8h-45.5c-5.7 0-10.4 4.7-10.4 10.4v153.3c0 5.7 4.7 10.4 10.4 10.4H387c5.7 0 10.4-4.7 10.4-10.4V359.2c0-5.7-4.7-10.4-10.4-10.4zm333.8 241.3-41-20a10.3 10.3 0 0 0-8.1-.5c-2.6.9-4.8 2.9-5.9 5.4-30.1 64.9-93.1 109.1-164.4 115.2-5.7.5-9.9 5.5-9.5 11.2l3.9 45.5c.5 5.3 5 9.5 10.3 9.5h.9c94.8-8 178.5-66.5 218.6-152.7 2.4-5 .3-11.2-4.8-13.6zm186-186.1c-11.9-42-30.5-81.4-55.2-117.1-24.1-34.9-53.5-65.6-87.5-91.2-33.9-25.6-71.5-45.5-111.6-59.2-41.2-14-84.1-21.1-127.8-21.1h-1.2c-75.4 0-148.8 21.4-212.5 61.7-63.7 40.3-114.3 97.6-146.5 165.8-32.2 68.1-44.3 143.6-35.1 218.4 9.3 74.8 39.4 145 87.3 203.3.1.2.3.3.4.5l36.2 38.4c1.1 1.2 2.5 2.1 3.9 2.6 73.3 66.7 168.2 103.5 267.5 103.5 73.3 0 145.2-20.3 207.7-58.7 37.3-22.9 70.3-51.5 98.1-85 27.1-32.7 48.7-69.5 64.2-109.1 15.5-39.7 24.4-81.3 26.6-123.8 2.4-43.6-2.5-87-14.5-129zm-60.5 181.1c-8.3 37-22.8 72-43 104-19.7 31.1-44.3 58.6-73.1 81.7-28.8 23.1-61 41-95.7 53.4-35.6 12.7-72.9 19.1-110.9 19.1-82.6 0-161.7-30.6-222.8-86.2l-34.1-35.8c-23.9-29.3-42.4-62.2-55.1-97.7-12.4-34.7-18.8-71-19.2-107.9-.4-36.9 5.4-73.3 17.1-108.2 12-35.8 30-69.2 53.4-99.1 31.7-40.4 71.1-72 117.2-94.1 44.5-21.3 94-32.6 143.4-32.6 49.3 0 97 10.8 141.8 32 34.3 16.3 65.3 38.1 92 64.8 26.1 26 47.5 56 63.6 89.2 16.2 33.2 26.6 68.5 31 105.1 4.6 37.5 2.7 75.3-5.6 112.3z" fill="currentColor"></path></svg></button><button type="button" class="wl-action" title="è¡¨æƒ…åŒ…"><svg width="24" height="24" fill="currentcolor" viewBox="0 0 24 24"><path style="transform: translateY(0.5px)" d="M18.968 10.5H15.968V11.484H17.984V12.984H15.968V15H14.468V9H18.968V10.5V10.5ZM8.984 9C9.26533 9 9.49967 9.09367 9.687 9.281C9.87433 9.46833 9.968 9.70267 9.968 9.984V10.5H6.499V13.5H8.468V12H9.968V14.016C9.968 14.2973 9.87433 14.5317 9.687 14.719C9.49967 14.9063 9.26533 15 8.984 15H5.984C5.70267 15 5.46833 14.9063 5.281 14.719C5.09367 14.5317 5 14.2973 5 14.016V9.985C5 9.70367 5.09367 9.46933 5.281 9.282C5.46833 9.09467 5.70267 9.001 5.984 9.001H8.984V9ZM11.468 9H12.968V15H11.468V9V9Z"></path><path d="M18.5 3H5.75C3.6875 3 2 4.6875 2 6.75V18C2 20.0625 3.6875 21.75 5.75 21.75H18.5C20.5625 21.75 22.25 20.0625 22.25 18V6.75C22.25 4.6875 20.5625 3 18.5 3ZM20.75 18C20.75 19.2375 19.7375 20.25 18.5 20.25H5.75C4.5125 20.25 3.5 19.2375 3.5 18V6.75C3.5 5.5125 4.5125 4.5 5.75 4.5H18.5C19.7375 4.5 20.75 5.5125 20.75 6.75V18Z"></path></svg></button><input id="wl-image-upload" class="upload" type="file" accept=".png,.jpg,.jpeg,.webp,.bmp,.gif"><label for="wl-image-upload" class="wl-action" title="ä¸Šä¼ å›¾ç‰‡"><svg viewBox="0 0 1024 1024" width="24" height="24"><path d="M784 112H240c-88 0-160 72-160 160v480c0 88 72 160 160 160h544c88 0 160-72 160-160V272c0-88-72-160-160-160zm96 640c0 52.8-43.2 96-96 96H240c-52.8 0-96-43.2-96-96V272c0-52.8 43.2-96 96-96h544c52.8 0 96 43.2 96 96v480z" fill="currentColor"></path><path d="M352 480c52.8 0 96-43.2 96-96s-43.2-96-96-96-96 43.2-96 96 43.2 96 96 96zm0-128c17.6 0 32 14.4 32 32s-14.4 32-32 32-32-14.4-32-32 14.4-32 32-32zm462.4 379.2-3.2-3.2-177.6-177.6c-25.6-25.6-65.6-25.6-91.2 0l-80 80-36.8-36.8c-25.6-25.6-65.6-25.6-91.2 0L200 728c-4.8 6.4-8 14.4-8 24 0 17.6 14.4 32 32 32 9.6 0 16-3.2 22.4-9.6L380.8 640l134.4 134.4c6.4 6.4 14.4 9.6 24 9.6 17.6 0 32-14.4 32-32 0-9.6-4.8-17.6-9.6-24l-52.8-52.8 80-80L769.6 776c6.4 4.8 12.8 8 20.8 8 17.6 0 32-14.4 32-32 0-8-3.2-16-8-20.8z" fill="currentColor"></path></svg></label><button type="button" class="wl-action" title="é¢„è§ˆ"><svg viewBox="0 0 1024 1024" width="24" height="24"><path d="M710.816 654.301c70.323-96.639 61.084-230.578-23.705-314.843-46.098-46.098-107.183-71.109-172.28-71.109-65.008 0-126.092 25.444-172.28 71.109-45.227 46.098-70.756 107.183-70.756 172.106 0 64.923 25.444 126.007 71.194 172.106 46.099 46.098 107.184 71.109 172.28 71.109 51.414 0 100.648-16.212 142.824-47.404l126.53 126.006c7.058 7.06 16.297 10.979 26.406 10.979 10.105 0 19.343-3.919 26.402-10.979 14.467-14.467 14.467-38.172 0-52.723L710.816 654.301zm-315.107-23.265c-65.88-65.88-65.88-172.54 0-238.42 32.069-32.07 74.245-49.149 119.471-49.149 45.227 0 87.407 17.603 119.472 49.149 65.88 65.879 65.88 172.539 0 238.42-63.612 63.178-175.242 63.178-238.943 0zm0 0" fill="currentColor"></path><path d="M703.319 121.603H321.03c-109.8 0-199.469 89.146-199.469 199.38v382.034c0 109.796 89.236 199.38 199.469 199.38h207.397c20.653 0 37.384-16.645 37.384-37.299 0-20.649-16.731-37.296-37.384-37.296H321.03c-68.582 0-124.352-55.77-124.352-124.267V321.421c0-68.496 55.77-124.267 124.352-124.267h382.289c68.582 0 124.352 55.771 124.352 124.267V524.72c0 20.654 16.736 37.299 37.385 37.299 20.654 0 37.384-16.645 37.384-37.299V320.549c-.085-109.8-89.321-198.946-199.121-198.946zm0 0" fill="currentColor"></path></svg></button></div><div class="wl-info"><div class="wl-captcha-container"></div><div class="wl-text-number">0 <!--v-if--> Â å­—</div><button type="button" class="wl-btn">ç™»å½•</button><button type="submit" class="primary wl-btn" title="Cmd|Ctrl + Enter"><!--[-->æäº¤<!--]--></button></div><div class="wl-gif-popup"><input type="text" placeholder="æœç´¢è¡¨æƒ…åŒ…"><!--v-if--><div class="wl-loading"><svg width="30" height="30" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid"><circle cx="50" cy="50" fill="none" stroke="currentColor" strokeWidth="4" r="40" stroke-dasharray="85 30"><animateTransform attributeName="transform" type="rotate" repeatCount="indefinite" dur="1s" values="0 50 50;360 50 50" keyTimes="0;1"></animateTransform></circle></svg></div></div><div class="wl-emoji-popup"><!--[--><!--]--><!--v-if--></div></div></div><!--v-if--></div><div class="wl-meta-head"><div class="wl-count"><!--v-if--> è¯„è®º</div><ul class="wl-sort"><!--[--><li class="active">æŒ‰æ­£åº</li><li class="">æŒ‰å€’åº</li><li class="">æŒ‰çƒ­åº¦</li><!--]--></ul></div><div class="wl-cards"><!--[--><!--]--></div><div class="wl-loading"><svg width="30" height="30" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid"><circle cx="50" cy="50" fill="none" stroke="currentColor" strokeWidth="4" r="40" stroke-dasharray="85 30"><animateTransform attributeName="transform" type="rotate" repeatCount="indefinite" dur="1s" values="0 50 50;360 50 50" keyTimes="0;1"></animateTransform></circle></svg></div><div class="wl-power"> Powered by <a href="https://github.com/walinejs/waline" target="_blank" rel="noopener noreferrer"> Waline </a> v3.0.0-alpha.8</div></div></div><!--[--><!----><!--]--><!--]--></main><!--]--><footer class="vp-footer-wrapper"><div class="vp-footer"> </div><div class="vp-copyright">Copyright Â© 2024 å’–é£ž</div></footer></div><!--]--><!--]--><!----><!--]--></div>
    <script type="module" src="/begun-blog/assets/app-4Zcd0y0J.js" defer></script>
  </body>
</html>

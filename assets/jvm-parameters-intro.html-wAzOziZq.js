import{_ as r}from"./plugin-vue_export-helper-x3n3nnut.js";import{r as o,o as i,c as l,b as e,e as a,d as s,f as t}from"./app-57Y6i9bT.js";const d={},c=e("h1",{id:"æœ€é‡è¦çš„-jvm-å‚æ•°æ€»ç»“",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#æœ€é‡è¦çš„-jvm-å‚æ•°æ€»ç»“","aria-hidden":"true"},"#"),a(" æœ€é‡è¦çš„ JVM å‚æ•°æ€»ç»“")],-1),p={href:"https://www.baeldung.com/jvm-parameters",target:"_blank",rel:"noopener noreferrer"},m={href:"https://www.baeldung.com/author/baeldung/",target:"_blank",rel:"noopener noreferrer"},u=t(`<h2 id="_1-æ¦‚è¿°" tabindex="-1"><a class="header-anchor" href="#_1-æ¦‚è¿°" aria-hidden="true">#</a> 1.æ¦‚è¿°</h2><p>åœ¨æœ¬ç¯‡æ–‡ç« ä¸­ï¼Œä½ å°†æŒæ¡æœ€å¸¸ç”¨çš„ JVM å‚æ•°é…ç½®ã€‚å¦‚æœå¯¹äºä¸‹é¢æåˆ°äº†ä¸€äº›æ¦‚å¿µæ¯”å¦‚å †ã€</p><h2 id="_2-å †å†…å­˜ç›¸å…³" tabindex="-1"><a class="header-anchor" href="#_2-å †å†…å­˜ç›¸å…³" aria-hidden="true">#</a> 2.å †å†…å­˜ç›¸å…³</h2><blockquote><p>Java è™šæ‹Ÿæœºæ‰€ç®¡ç†çš„å†…å­˜ä¸­æœ€å¤§çš„ä¸€å—ï¼ŒJava å †æ˜¯æ‰€æœ‰çº¿ç¨‹å…±äº«çš„ä¸€å—å†…å­˜åŒºåŸŸï¼Œåœ¨è™šæ‹Ÿæœºå¯åŠ¨æ—¶åˆ›å»ºã€‚<strong>æ­¤å†…å­˜åŒºåŸŸçš„å”¯ä¸€ç›®çš„å°±æ˜¯å­˜æ”¾å¯¹è±¡å®ä¾‹ï¼Œå‡ ä¹æ‰€æœ‰çš„å¯¹è±¡å®ä¾‹ä»¥åŠæ•°ç»„éƒ½åœ¨è¿™é‡Œåˆ†é…å†…å­˜ã€‚</strong></p></blockquote><h3 id="_2-1-æ˜¾å¼æŒ‡å®šå †å†…å­˜â€“xmså’Œ-xmx" tabindex="-1"><a class="header-anchor" href="#_2-1-æ˜¾å¼æŒ‡å®šå †å†…å­˜â€“xmså’Œ-xmx" aria-hidden="true">#</a> 2.1.æ˜¾å¼æŒ‡å®šå †å†…å­˜<code>â€“Xms</code>å’Œ<code>-Xmx</code></h3><p>ä¸æ€§èƒ½æœ‰å…³çš„æœ€å¸¸è§å®è·µä¹‹ä¸€æ˜¯æ ¹æ®åº”ç”¨ç¨‹åºè¦æ±‚åˆå§‹åŒ–å †å†…å­˜ã€‚å¦‚æœæˆ‘ä»¬éœ€è¦æŒ‡å®šæœ€å°å’Œæœ€å¤§å †å¤§å°ï¼ˆæ¨èæ˜¾ç¤ºæŒ‡å®šå¤§å°ï¼‰ï¼Œä»¥ä¸‹å‚æ•°å¯ä»¥å¸®åŠ©ä½ å®ç°ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>-Xms&lt;heap size&gt;[unit] 
-Xmx&lt;heap size&gt;[unit]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><strong>heap size</strong> è¡¨ç¤ºè¦åˆå§‹åŒ–å†…å­˜çš„å…·ä½“å¤§å°ã€‚</li><li><strong>unit</strong> è¡¨ç¤ºè¦åˆå§‹åŒ–å†…å­˜çš„å•ä½ã€‚å•ä½ä¸º***â€œ gâ€*** (GB) ã€<em><strong>â€œ mâ€</strong></em>ï¼ˆMBï¼‰ã€<em><strong>â€œ kâ€</strong></em>ï¼ˆKBï¼‰ã€‚</li></ul><p>ä¸¾ä¸ªæ —å­ğŸŒ°ï¼Œå¦‚æœæˆ‘ä»¬è¦ä¸ºJVMåˆ†é…æœ€å°2 GBå’Œæœ€å¤§5 GBçš„å †å†…å­˜å¤§å°ï¼Œæˆ‘ä»¬çš„å‚æ•°åº”è¯¥è¿™æ ·æ¥å†™ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>-Xms2G -Xmx5G
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_2-2-æ˜¾å¼æ–°ç”Ÿä»£å†…å­˜-young-generation" tabindex="-1"><a class="header-anchor" href="#_2-2-æ˜¾å¼æ–°ç”Ÿä»£å†…å­˜-young-generation" aria-hidden="true">#</a> 2.2.æ˜¾å¼æ–°ç”Ÿä»£å†…å­˜(Young Generation)</h3>`,11),h={href:"https://docs.oracle.com/javase/8/docs/technotes/guides/vm/gctuning/sizing.html",target:"_blank",rel:"noopener noreferrer"},g=e("code",null,"Young Generation",-1),v=e("em",null,"MB",-1),b=e("em",null,"æ— é™åˆ¶",-1),_=t(`<p>ä¸€å…±æœ‰ä¸¤ç§æŒ‡å®š æ–°ç”Ÿä»£å†…å­˜(Young Ceneration)å¤§å°çš„æ–¹æ³•ï¼š</p><p><strong>1.é€šè¿‡<code>-XX:NewSize</code>å’Œ<code>-XX:MaxNewSize</code>æŒ‡å®š</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>-XX:NewSize=&lt;young size&gt;[unit] 
-XX:MaxNewSize=&lt;young size&gt;[unit]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸¾ä¸ªæ —å­ğŸŒ°ï¼Œå¦‚æœæˆ‘ä»¬è¦ä¸º æ–°ç”Ÿä»£åˆ†é… æœ€å°256m çš„å†…å­˜ï¼Œæœ€å¤§ 1024mçš„å†…å­˜æˆ‘ä»¬çš„å‚æ•°åº”è¯¥è¿™æ ·æ¥å†™ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>-XX:NewSize=256m
-XX:MaxNewSize=1024m
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>2.é€šè¿‡<code>-Xmn&lt;young size&gt;[unit] </code>æŒ‡å®š</strong></p><p>ä¸¾ä¸ªæ —å­ğŸŒ°ï¼Œå¦‚æœæˆ‘ä»¬è¦ä¸º æ–°ç”Ÿä»£åˆ†é…256mçš„å†…å­˜ï¼ˆNewSizeä¸MaxNewSizeè®¾ä¸ºä¸€è‡´ï¼‰ï¼Œæˆ‘ä»¬çš„å‚æ•°åº”è¯¥è¿™æ ·æ¥å†™ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>-Xmn256m 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>GC è°ƒä¼˜ç­–ç•¥ä¸­å¾ˆé‡è¦çš„ä¸€æ¡ç»éªŒæ€»ç»“æ˜¯è¿™æ ·è¯´çš„ï¼š</p><blockquote><p>å°†æ–°å¯¹è±¡é¢„ç•™åœ¨æ–°ç”Ÿä»£ï¼Œç”±äº Full GC çš„æˆæœ¬è¿œé«˜äº Minor GCï¼Œå› æ­¤å°½å¯èƒ½å°†å¯¹è±¡åˆ†é…åœ¨æ–°ç”Ÿä»£æ˜¯æ˜æ™ºçš„åšæ³•ï¼Œå®é™…é¡¹ç›®ä¸­æ ¹æ® GC æ—¥å¿—åˆ†ææ–°ç”Ÿä»£ç©ºé—´å¤§å°åˆ†é…æ˜¯å¦åˆç†ï¼Œé€‚å½“é€šè¿‡â€œ-Xmnâ€å‘½ä»¤è°ƒèŠ‚æ–°ç”Ÿä»£å¤§å°ï¼Œæœ€å¤§é™åº¦é™ä½æ–°å¯¹è±¡ç›´æ¥è¿›å…¥è€å¹´ä»£çš„æƒ…å†µã€‚</p></blockquote><p>å¦å¤–ï¼Œä½ è¿˜å¯ä»¥é€šè¿‡**<code>-XX:NewRatio=&lt;int&gt;</code>**æ¥è®¾ç½®æ–°ç”Ÿä»£å’Œè€å¹´ä»£å†…å­˜çš„æ¯”å€¼ã€‚</p><p>æ¯”å¦‚ä¸‹é¢çš„å‚æ•°å°±æ˜¯è®¾ç½®æ–°ç”Ÿä»£ï¼ˆåŒ…æ‹¬Edenå’Œä¸¤ä¸ªSurvivoråŒºï¼‰ä¸è€å¹´ä»£çš„æ¯”å€¼ä¸º1ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼šæ–°ç”Ÿä»£ä¸è€å¹´ä»£æ‰€å æ¯”å€¼ä¸º1ï¼š1ï¼Œæ–°ç”Ÿä»£å æ•´ä¸ªå †æ ˆçš„ 1/2ã€‚</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>-XX:NewRatio=1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_2-3-æ˜¾å¼æŒ‡å®šæ°¸ä¹…ä»£-å…ƒç©ºé—´çš„å¤§å°" tabindex="-1"><a class="header-anchor" href="#_2-3-æ˜¾å¼æŒ‡å®šæ°¸ä¹…ä»£-å…ƒç©ºé—´çš„å¤§å°" aria-hidden="true">#</a> 2.3.æ˜¾å¼æŒ‡å®šæ°¸ä¹…ä»£/å…ƒç©ºé—´çš„å¤§å°</h3><p><strong>ä»Java 8å¼€å§‹ï¼Œå¦‚æœæˆ‘ä»¬æ²¡æœ‰æŒ‡å®š Metaspace çš„å¤§å°ï¼Œéšç€æ›´å¤šç±»çš„åˆ›å»ºï¼Œè™šæ‹Ÿæœºä¼šè€—å°½æ‰€æœ‰å¯ç”¨çš„ç³»ç»Ÿå†…å­˜ï¼ˆæ°¸ä¹…ä»£å¹¶ä¸ä¼šå‡ºç°è¿™ç§æƒ…å†µï¼‰ã€‚</strong></p><p>JDK 1.8 ä¹‹å‰æ°¸ä¹…ä»£è¿˜æ²¡è¢«å½»åº•ç§»é™¤çš„æ—¶å€™é€šå¸¸é€šè¿‡ä¸‹é¢è¿™äº›å‚æ•°æ¥è°ƒèŠ‚æ–¹æ³•åŒºå¤§å°</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token operator">-</span><span class="token constant">XX</span><span class="token operator">:</span><span class="token class-name">PermSize</span><span class="token operator">=</span><span class="token class-name">N</span> <span class="token comment">//æ–¹æ³•åŒº (æ°¸ä¹…ä»£) åˆå§‹å¤§å°</span>
<span class="token operator">-</span><span class="token constant">XX</span><span class="token operator">:</span><span class="token class-name">MaxPermSize</span><span class="token operator">=</span><span class="token class-name">N</span> <span class="token comment">//æ–¹æ³•åŒº (æ°¸ä¹…ä»£) æœ€å¤§å¤§å°,è¶…è¿‡è¿™ä¸ªå€¼å°†ä¼šæŠ›å‡º OutOfMemoryError å¼‚å¸¸:java.lang.OutOfMemoryError: PermGen</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>ç›¸å¯¹è€Œè¨€ï¼Œåƒåœ¾æ”¶é›†è¡Œä¸ºåœ¨è¿™ä¸ªåŒºåŸŸæ˜¯æ¯”è¾ƒå°‘å‡ºç°çš„ï¼Œä½†å¹¶éæ•°æ®è¿›å…¥æ–¹æ³•åŒºåå°±â€œæ°¸ä¹…å­˜åœ¨â€äº†ã€‚</p><p><strong>JDK 1.8 çš„æ—¶å€™ï¼Œæ–¹æ³•åŒºï¼ˆHotSpot çš„æ°¸ä¹…ä»£ï¼‰è¢«å½»åº•ç§»é™¤äº†ï¼ˆJDK1.7 å°±å·²ç»å¼€å§‹äº†ï¼‰ï¼Œå–è€Œä»£ä¹‹æ˜¯å…ƒç©ºé—´ï¼Œå…ƒç©ºé—´ä½¿ç”¨çš„æ˜¯æœ¬åœ°å†…å­˜ã€‚</strong></p><p>ä¸‹é¢æ˜¯ä¸€äº›å¸¸ç”¨å‚æ•°ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token operator">-</span><span class="token constant">XX</span><span class="token operator">:</span><span class="token class-name">MetaspaceSize</span><span class="token operator">=</span><span class="token class-name">N</span> <span class="token comment">//è®¾ç½® Metaspace çš„åˆå§‹ï¼ˆå’Œæœ€å°å¤§å°ï¼‰</span>
<span class="token operator">-</span><span class="token constant">XX</span><span class="token operator">:</span><span class="token class-name">MaxMetaspaceSize</span><span class="token operator">=</span><span class="token class-name">N</span> <span class="token comment">//è®¾ç½® Metaspace çš„æœ€å¤§å¤§å°ï¼Œå¦‚æœä¸æŒ‡å®šå¤§å°çš„è¯ï¼Œéšç€æ›´å¤šç±»çš„åˆ›å»ºï¼Œè™šæ‹Ÿæœºä¼šè€—å°½æ‰€æœ‰å¯ç”¨çš„ç³»ç»Ÿå†…å­˜ã€‚</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-åƒåœ¾æ”¶é›†ç›¸å…³" tabindex="-1"><a class="header-anchor" href="#_3-åƒåœ¾æ”¶é›†ç›¸å…³" aria-hidden="true">#</a> 3.åƒåœ¾æ”¶é›†ç›¸å…³</h2><h3 id="_3-1-åƒåœ¾å›æ”¶å™¨" tabindex="-1"><a class="header-anchor" href="#_3-1-åƒåœ¾å›æ”¶å™¨" aria-hidden="true">#</a> 3.1.åƒåœ¾å›æ”¶å™¨</h3>`,23),x={href:"http://www.oracle.com/webfolder/technetwork/tutorials/obe/java/gc01/index.html",target:"_blank",rel:"noopener noreferrer"},f=t(`<p>JVMå…·æœ‰å››ç§ç±»å‹çš„<em>GC</em>å®ç°ï¼š</p><ul><li>ä¸²è¡Œåƒåœ¾æ”¶é›†å™¨</li><li>å¹¶è¡Œåƒåœ¾æ”¶é›†å™¨</li><li>CMSåƒåœ¾æ”¶é›†å™¨</li><li>G1åƒåœ¾æ”¶é›†å™¨</li></ul><p>å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‚æ•°å£°æ˜è¿™äº›å®ç°ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>-XX:+UseSerialGC
-XX:+UseParallelGC
-XX:+UseParNewGC
-XX:+UseG1GC
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,4),k=e("em",null,"åƒåœ¾å›æ”¶",-1),X={href:"https://github.com/Snailclimb/JavaGuide/blob/master/docs/java/jvm/JVM%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6.md",target:"_blank",rel:"noopener noreferrer"},w=t(`<h3 id="_3-2-gcè®°å½•" tabindex="-1"><a class="header-anchor" href="#_3-2-gcè®°å½•" aria-hidden="true">#</a> 3.2.GCè®°å½•</h3><p>ä¸ºäº†ä¸¥æ ¼ç›‘æ§åº”ç”¨ç¨‹åºçš„è¿è¡ŒçŠ¶å†µï¼Œæˆ‘ä»¬åº”è¯¥å§‹ç»ˆæ£€æŸ¥JVMçš„<em>åƒåœ¾å›æ”¶</em>æ€§èƒ½ã€‚æœ€ç®€å•çš„æ–¹æ³•æ˜¯ä»¥äººç±»å¯è¯»çš„æ ¼å¼è®°å½•<em>GC</em>æ´»åŠ¨ã€‚</p><p>ä½¿ç”¨ä»¥ä¸‹å‚æ•°ï¼Œæˆ‘ä»¬å¯ä»¥è®°å½•<em>GC</em>æ´»åŠ¨ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>-XX:+UseGCLogFileRotation 
-XX:NumberOfGCLogFiles=&lt; number of log files &gt; 
-XX:GCLogFileSize=&lt; file size &gt;[ unit ]
-Xloggc:/path/to/gc.log
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="æ¨èé˜…è¯»" tabindex="-1"><a class="header-anchor" href="#æ¨èé˜…è¯»" aria-hidden="true">#</a> æ¨èé˜…è¯»</h2>`,5),G={href:"https://www.jianshu.com/p/832fc4d4cb53",target:"_blank",rel:"noopener noreferrer"},M={href:"https://www.cnblogs.com/hongdada/p/10277782.html",target:"_blank",rel:"noopener noreferrer"},C={href:"https://tech.meituan.com/2017/12/29/jvm-optimize.html",target:"_blank",rel:"noopener noreferrer"},z={href:"https://www.choupangxia.com/2019/11/11/interview-jvm-gc-08/",target:"_blank",rel:"noopener noreferrer"},S={href:"https://segmentfault.com/a/1190000010603813",target:"_blank",rel:"noopener noreferrer"};function j(N,J){const n=o("ExternalLinkIcon");return i(),l("div",null,[c,e("p",null,[a("æœ¬æ–‡ç”±ç¿»è¯‘è‡ª "),e("a",p,[a("https://www.baeldung.com/jvm-parameters"),s(n)]),a("ï¼Œå¹¶å¯¹æ–‡ç« è¿›è¡Œäº†å¤§é‡çš„å®Œå–„è¡¥å……ã€‚ç¿»è¯‘ä¸æ˜“ï¼Œå¦‚éœ€è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼Œä½œè€…ï¼š"),e("a",m,[a("baeldung"),s(n)]),a(" ã€‚")]),u,e("p",null,[a("æ ¹æ®"),e("a",h,[a("Oracleå®˜æ–¹æ–‡æ¡£"),s(n)]),a("ï¼Œåœ¨å †æ€»å¯ç”¨å†…å­˜é…ç½®å®Œæˆä¹‹åï¼Œç¬¬äºŒå¤§å½±å“å› ç´ æ˜¯ä¸º "),g,a(" åœ¨å †å†…å­˜æ‰€å çš„æ¯”ä¾‹ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒYG çš„æœ€å°å¤§å°ä¸º 1310 "),v,a("ï¼Œæœ€å¤§å¤§å°ä¸º"),b,a("ã€‚")]),_,e("p",null,[a("ä¸ºäº†æé«˜åº”ç”¨ç¨‹åºçš„ç¨³å®šæ€§ï¼Œé€‰æ‹©æ­£ç¡®çš„"),e("a",x,[a("åƒåœ¾æ”¶é›†"),s(n)]),a("ç®—æ³•è‡³å…³é‡è¦ã€‚")]),f,e("p",null,[a("æœ‰å…³"),k,a("å®æ–½çš„æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§"),e("a",X,[a("æ­¤å¤„"),s(n)]),a("ã€‚")]),w,e("ul",null,[e("li",null,[e("a",G,[a("CMS GC é»˜è®¤æ–°ç”Ÿä»£æ˜¯å¤šå¤§ï¼Ÿ"),s(n)])]),e("li",null,[e("a",M,[a("CMS GCå¯åŠ¨å‚æ•°ä¼˜åŒ–é…ç½®"),s(n)])]),e("li",null,[e("a",C,[a("ä»å®é™…æ¡ˆä¾‹èŠèŠJavaåº”ç”¨çš„GCä¼˜åŒ–-ç¾å›¢æŠ€æœ¯å›¢é˜Ÿ"),s(n)])]),e("li",null,[e("a",z,[a("JVMæ€§èƒ½è°ƒä¼˜è¯¦è§£"),s(n)]),a(" ï¼ˆ2019-11-11ï¼‰")]),e("li",null,[e("a",S,[a("JVMå‚æ•°ä½¿ç”¨æ‰‹å†Œ"),s(n)])])])])}const V=r(d,[["render",j],["__file","jvm-parameters-intro.html.vue"]]);export{V as default};
